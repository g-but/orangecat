a82da5c98c11ef1f665baefee77f2b21
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
// Mock useAuth hook
jest.mock('@/hooks/useAuth', () => ({
    useAuth: jest.fn()
}));
// Mock next/link
jest.mock('next/link', () => {
    return function MockLink({ children, href, className }) {
        return (0, jsx_runtime_1.jsx)("a", { href: href, className: className, children: children });
    };
});
// Mock Button component
jest.mock('@/components/ui/Button', () => {
    return function MockButton({ children, variant, className }) {
        return (0, jsx_runtime_1.jsx)("button", { "data-variant": variant, className: className, children: children });
    };
});
// Mock UserProfileDropdown component
jest.mock('@/components/ui/UserProfileDropdown', () => {
    return function MockUserProfileDropdown({ variant }) {
        return (0, jsx_runtime_1.jsx)("div", { "data-testid": "user-profile-dropdown", "data-variant": variant, children: "User Profile Dropdown" });
    };
});
// Mock Lucide React icons
jest.mock('lucide-react', () => ({
    Loader2: ({ className }) => ((0, jsx_runtime_1.jsx)("div", { "data-testid": "loader2-icon", className: className, children: "Loading" }))
}));
/**
 * AuthButtons Component Tests
 * Testing critical authentication UI component for the Bitcoin platform
 */
const react_1 = __importDefault(require("react"));
const react_2 = require("@testing-library/react");
require("@testing-library/jest-dom");
const AuthButtons_1 = __importDefault(require("../AuthButtons"));
const useAuth_1 = require("@/hooks/useAuth");
const mockUseAuth = useAuth_1.useAuth;
describe('🔐 AuthButtons Component Tests', () => {
    beforeEach(() => {
        mockUseAuth.mockClear();
    });
    describe('✅ Hydration & Loading States', () => {
        test('should show hydration loading indicator when not hydrated', () => {
            mockUseAuth.mockReturnValue({
                user: null,
                session: null,
                isLoading: false,
                hydrated: false
            });
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            const pulseDiv = document.querySelector('.animate-pulse');
            expect(pulseDiv).toBeInTheDocument();
            expect(pulseDiv).toHaveClass('w-4', 'h-4', 'bg-gray-200', 'rounded-full', 'animate-pulse');
        });
        test('should show loading spinner when hydrated but loading', () => {
            mockUseAuth.mockReturnValue({
                user: null,
                session: null,
                isLoading: true,
                hydrated: true
            });
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            expect(react_2.screen.getByTestId('loader2-icon')).toBeInTheDocument();
            expect(react_2.screen.getByTestId('loader2-icon')).toHaveClass('h-5', 'w-5', 'animate-spin', 'text-tiffany-500');
        });
        test('should apply custom className to hydration indicator', () => {
            mockUseAuth.mockReturnValue({
                user: null,
                session: null,
                isLoading: false,
                hydrated: false
            });
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, { className: "custom-class" }));
            const container = document.querySelector('.custom-class');
            expect(container).toBeInTheDocument();
            expect(container).toHaveClass('flex', 'items-center', 'justify-center', 'custom-class');
        });
    });
    describe('🔑 Authenticated User States', () => {
        test('should render UserProfileDropdown when user is authenticated', () => {
            mockUseAuth.mockReturnValue({
                user: { id: '123', email: 'user@example.com' },
                session: { access_token: 'token' },
                isLoading: false,
                hydrated: true
            });
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            const dropdown = react_2.screen.getByTestId('user-profile-dropdown');
            expect(dropdown).toBeInTheDocument();
            expect(dropdown).toHaveAttribute('data-variant', 'advanced');
        });
        test('should render UserProfileDropdown when only user exists', () => {
            mockUseAuth.mockReturnValue({
                user: { id: '123', email: 'user@example.com' },
                session: null,
                isLoading: false,
                hydrated: true
            });
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            expect(react_2.screen.getByTestId('user-profile-dropdown')).toBeInTheDocument();
        });
        test('should render UserProfileDropdown when only session exists', () => {
            mockUseAuth.mockReturnValue({
                user: null,
                session: { access_token: 'token', user: { id: '123' } },
                isLoading: false,
                hydrated: true
            });
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            expect(react_2.screen.getByTestId('user-profile-dropdown')).toBeInTheDocument();
        });
    });
    describe('🚫 Unauthenticated User States', () => {
        beforeEach(() => {
            mockUseAuth.mockReturnValue({
                user: null,
                session: null,
                isLoading: false,
                hydrated: true
            });
        });
        test('should render login and register buttons when not authenticated', () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            expect(react_2.screen.getByText('Log in')).toBeInTheDocument();
            expect(react_2.screen.getByText('Get Started')).toBeInTheDocument();
        });
        test('should have correct href attributes for auth buttons', () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            const loginLink = react_2.screen.getByText('Log in').closest('a');
            const registerLink = react_2.screen.getByText('Get Started').closest('a');
            expect(loginLink).toHaveAttribute('href', '/auth?mode=login');
            expect(registerLink).toHaveAttribute('href', '/auth?mode=register');
        });
        test('should use ghost variant for login button', () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            const loginButton = react_2.screen.getByText('Log in');
            expect(loginButton).toHaveAttribute('data-variant', 'ghost');
        });
        test('should have minimum touch target size for buttons', () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            const loginButton = react_2.screen.getByText('Log in');
            const registerButton = react_2.screen.getByText('Get Started');
            expect(loginButton).toHaveClass('min-h-[44px]');
            expect(registerButton).toHaveClass('min-h-[44px]');
        });
    });
    describe('📱 Mobile Navigation Layout', () => {
        beforeEach(() => {
            mockUseAuth.mockReturnValue({
                user: null,
                session: null,
                isLoading: false,
                hydrated: true
            });
        });
        test('should detect mobile navigation layout from className', () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, { className: "flex-col mobile-nav" }));
            const container = react_2.screen.getByText('Log in').closest('div');
            expect(container).toHaveClass('flex-col', 'space-y-3', 'w-full');
            expect(container).not.toHaveClass('space-x-4');
        });
        test('should apply full width styling to links in mobile layout', () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, { className: "flex-col" }));
            const loginLink = react_2.screen.getByText('Log in').closest('a');
            const registerLink = react_2.screen.getByText('Get Started').closest('a');
            expect(loginLink).toHaveClass('w-full');
            expect(registerLink).toHaveClass('w-full');
        });
        test('should apply full width and center styling to buttons in mobile layout', () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, { className: "flex-col" }));
            const loginButton = react_2.screen.getByText('Log in');
            const registerButton = react_2.screen.getByText('Get Started');
            expect(loginButton).toHaveClass('w-full', 'justify-center');
            expect(registerButton).toHaveClass('w-full', 'justify-center');
        });
    });
    describe('🔄 State Transitions', () => {
        test('should transition from hydration to loading state', () => {
            const { rerender } = (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            mockUseAuth.mockReturnValue({
                user: null,
                session: null,
                isLoading: false,
                hydrated: false
            });
            rerender((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            const pulseDiv = document.querySelector('.animate-pulse');
            expect(pulseDiv).toBeInTheDocument();
            expect(pulseDiv).toHaveClass('animate-pulse');
            mockUseAuth.mockReturnValue({
                user: null,
                session: null,
                isLoading: true,
                hydrated: true
            });
            rerender((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            expect(react_2.screen.getByTestId('loader2-icon')).toHaveClass('animate-spin');
        });
        test('should transition from loading to unauthenticated state', () => {
            const { rerender } = (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            mockUseAuth.mockReturnValue({
                user: null,
                session: null,
                isLoading: true,
                hydrated: true
            });
            rerender((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            expect(react_2.screen.getByTestId('loader2-icon')).toBeInTheDocument();
            mockUseAuth.mockReturnValue({
                user: null,
                session: null,
                isLoading: false,
                hydrated: true
            });
            rerender((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            expect(react_2.screen.getByText('Log in')).toBeInTheDocument();
            expect(react_2.screen.getByText('Get Started')).toBeInTheDocument();
        });
        test('should transition from unauthenticated to authenticated state', () => {
            const { rerender } = (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            mockUseAuth.mockReturnValue({
                user: null,
                session: null,
                isLoading: false,
                hydrated: true
            });
            rerender((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            expect(react_2.screen.getByText('Log in')).toBeInTheDocument();
            mockUseAuth.mockReturnValue({
                user: { id: '123', email: 'user@example.com' },
                session: { access_token: 'token' },
                isLoading: false,
                hydrated: true
            });
            rerender((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            expect(react_2.screen.getByTestId('user-profile-dropdown')).toBeInTheDocument();
            expect(react_2.screen.queryByText('Log in')).not.toBeInTheDocument();
        });
    });
    describe('♿ Accessibility', () => {
        beforeEach(() => {
            mockUseAuth.mockReturnValue({
                user: null,
                session: null,
                isLoading: false,
                hydrated: true
            });
        });
        test('should have accessible button text', () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            expect(react_2.screen.getByRole('button', { name: 'Log in' })).toBeInTheDocument();
            expect(react_2.screen.getByRole('button', { name: 'Get Started' })).toBeInTheDocument();
        });
        test('should have proper link semantics', () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            const loginLink = react_2.screen.getByRole('link', { name: 'Log in' });
            const registerLink = react_2.screen.getByRole('link', { name: 'Get Started' });
            expect(loginLink).toHaveAttribute('href', '/auth?mode=login');
            expect(registerLink).toHaveAttribute('href', '/auth?mode=register');
        });
        test('should maintain minimum touch target sizes', () => {
            (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}));
            const loginButton = react_2.screen.getByText('Log in');
            const registerButton = react_2.screen.getByText('Get Started');
            expect(loginButton).toHaveClass('min-h-[44px]');
            expect(registerButton).toHaveClass('min-h-[44px]');
        });
    });
    describe('🔧 Edge Cases & Error Handling', () => {
        test('should handle undefined auth hook return', () => {
            mockUseAuth.mockReturnValue({
                user: null,
                session: null,
                isLoading: false,
                hydrated: true
            });
            expect(() => (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}))).not.toThrow();
        });
        test('should handle empty auth hook return', () => {
            mockUseAuth.mockReturnValue({});
            expect(() => (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}))).not.toThrow();
        });
        test('should handle partial auth state', () => {
            mockUseAuth.mockReturnValue({
                user: null,
                session: null,
            });
            expect(() => (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, {}))).not.toThrow();
        });
        test('should handle className edge cases', () => {
            const edgeCases = ['', '   ', 'flex-col-something', 'not-flex-col'];
            edgeCases.forEach(className => {
                mockUseAuth.mockReturnValue({
                    user: null,
                    session: null,
                    isLoading: false,
                    hydrated: true
                });
                const { unmount } = (0, react_2.render)((0, jsx_runtime_1.jsx)(AuthButtons_1.default, { className: className }));
                expect(react_2.screen.getByText('Log in')).toBeInTheDocument();
                unmount();
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvZy9kZXYvb3JhbmdlY2F0L3NyYy9jb21wb25lbnRzL2xheW91dC9fX3Rlc3RzX18vQXV0aEJ1dHRvbnMudGVzdC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBV0Esb0JBQW9CO0FBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNsQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtDQUNuQixDQUFDLENBQUMsQ0FBQztBQUVKLGlCQUFpQjtBQUNqQixJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxHQUFHLEVBQUU7SUFDMUIsT0FBTyxTQUFTLFFBQVEsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFO1FBQ3BELE9BQU8sOEJBQUcsSUFBSSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsU0FBUyxZQUFHLFFBQVEsR0FBSyxDQUFDO0lBQzdELENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyxDQUFDO0FBRUgsd0JBQXdCO0FBQ3hCLElBQUksQ0FBQyxJQUFJLENBQUMsd0JBQXdCLEVBQUUsR0FBRyxFQUFFO0lBQ3ZDLE9BQU8sU0FBUyxVQUFVLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRTtRQUN6RCxPQUFPLG1EQUFzQixPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsWUFBRyxRQUFRLEdBQVUsQ0FBQztJQUNsRixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMsQ0FBQztBQUVILHFDQUFxQztBQUNyQyxJQUFJLENBQUMsSUFBSSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtJQUNwRCxPQUFPLFNBQVMsdUJBQXVCLENBQUMsRUFBRSxPQUFPLEVBQUU7UUFDakQsT0FBTywrQ0FBaUIsdUJBQXVCLGtCQUFlLE9BQU8sc0NBQTZCLENBQUM7SUFDckcsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDLENBQUM7QUFFSCwwQkFBMEI7QUFDMUIsSUFBSSxDQUFDLElBQUksQ0FB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QUFPLEVBQUUsSUFBSTthQUNkLENBQUMsQ0FBQztZQUVILE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFBLGNBQU0sRUFBQyx1QkFBQyxxQkFBVyxLQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUN0RCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxvQ0FBb0MsRUFBRSxHQUFHLEVBQUU7WUFDOUMsTUFBTSxTQUFTLEdBQUcsQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLG9CQUFvQixFQUFFLGNBQWMsQ0FBQyxDQUFDO1lBRXBFLFNBQVMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUU7Z0JBQzVCLFdBQVcsQ0FBQyxlQUFlLENBQUM7b0JBQzFCLElBQUksRUFBRSxJQUFJO29CQUNWLE9BQU8sRUFBRSxJQUFJO29CQUNiLFNBQVMsRUFBRSxLQUFLO29CQUNoQixRQUFRLEVBQUUsSUFBSTtpQkFDZixDQUFDLENBQUM7Z0JBRUgsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLElBQUEsY0FBTSxFQUFDLHVCQUFDLHFCQUFXLElBQUMsU0FBUyxFQUFFLFNBQVMsR0FBSSxDQUFDLENBQUM7Z0JBQ2xFLE1BQU0sQ0FBQyxjQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztnQkFDdkQsT0FBTyxFQUFFLENBQUM7WUFDWixDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9nL2Rldi9vcmFuZ2VjYXQvc3JjL2NvbXBvbmVudHMvbGF5b3V0L19fdGVzdHNfXy9BdXRoQnV0dG9ucy50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEF1dGhCdXR0b25zIENvbXBvbmVudCBUZXN0c1xuICogVGVzdGluZyBjcml0aWNhbCBhdXRoZW50aWNhdGlvbiBVSSBjb21wb25lbnQgZm9yIHRoZSBCaXRjb2luIHBsYXRmb3JtXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgJ0B0ZXN0aW5nLWxpYnJhcnkvamVzdC1kb20nO1xuaW1wb3J0IEF1dGhCdXR0b25zIGZyb20gJy4uL0F1dGhCdXR0b25zJztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2hvb2tzL3VzZUF1dGgnO1xuXG4vLyBNb2NrIHVzZUF1dGggaG9va1xuamVzdC5tb2NrKCdAL2hvb2tzL3VzZUF1dGgnLCAoKSA9PiAoe1xuICB1c2VBdXRoOiBqZXN0LmZuKClcbn0pKTtcblxuLy8gTW9jayBuZXh0L2xpbmtcbmplc3QubW9jaygnbmV4dC9saW5rJywgKCkgPT4ge1xuICByZXR1cm4gZnVuY3Rpb24gTW9ja0xpbmsoeyBjaGlsZHJlbiwgaHJlZiwgY2xhc3NOYW1lIH0pIHtcbiAgICByZXR1cm4gPGEgaHJlZj17aHJlZn0gY2xhc3NOYW1lPXtjbGFzc05hbWV9PntjaGlsZHJlbn08L2E+O1xuICB9O1xufSk7XG5cbi8vIE1vY2sgQnV0dG9uIGNvbXBvbmVudFxuamVzdC5tb2NrKCdAL2NvbXBvbmVudHMvdWkvQnV0dG9uJywgKCkgPT4ge1xuICByZXR1cm4gZnVuY3Rpb24gTW9ja0J1dHRvbih7IGNoaWxkcmVuLCB2YXJpYW50LCBjbGFzc05hbWUgfSkge1xuICAgIHJldHVybiA8YnV0dG9uIGRhdGEtdmFyaWFudD17dmFyaWFudH0gY2xhc3NOYW1lPXtjbGFzc05hbWV9PntjaGlsZHJlbn08L2J1dHRvbj47XG4gIH07XG59KTtcblxuLy8gTW9jayBVc2VyUHJvZmlsZURyb3Bkb3duIGNvbXBvbmVudFxuamVzdC5tb2NrKCdAL2NvbXBvbmVudHMvdWkvVXNlclByb2ZpbGVEcm9wZG93bicsICgpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIE1vY2tVc2VyUHJvZmlsZURyb3Bkb3duKHsgdmFyaWFudCB9KSB7XG4gICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9XCJ1c2VyLXByb2ZpbGUtZHJvcGRvd25cIiBkYXRhLXZhcmlhbnQ9e3ZhcmlhbnR9PlVzZXIgUHJvZmlsZSBEcm9wZG93bjwvZGl2PjtcbiAgfTtcbn0pO1xuXG4vLyBNb2NrIEx1Y2lkZSBSZWFjdCBpY29uc1xuamVzdC5tb2NrKCdsdWNpZGUtcmVhY3QnLCAoKSA9PiAoe1xuICBMb2FkZXIyOiAoeyBjbGFzc05hbWUgfSkgPT4gKFxuICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJsb2FkZXIyLWljb25cIiBjbGFzc05hbWU9e2NsYXNzTmFtZX0+TG9hZGluZzwvZGl2PlxuICApXG59KSk7XG5cbmNvbnN0IG1vY2tVc2VBdXRoID0gdXNlQXV0aCBhcyBqZXN0Lk1vY2s7XG5cbmRlc2NyaWJlKCfwn5SQIEF1dGhCdXR0b25zIENvbXBvbmVudCBUZXN0cycsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgbW9ja1VzZUF1dGgubW9ja0NsZWFyKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfinIUgSHlkcmF0aW9uICYgTG9hZGluZyBTdGF0ZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHNob3cgaHlkcmF0aW9uIGxvYWRpbmcgaW5kaWNhdG9yIHdoZW4gbm90IGh5ZHJhdGVkJywgKCkgPT4ge1xuICAgICAgbW9ja1VzZUF1dGgubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgICAgc2Vzc2lvbjogbnVsbCxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgaHlkcmF0ZWQ6IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxBdXRoQnV0dG9ucyAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IHB1bHNlRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFuaW1hdGUtcHVsc2UnKTtcbiAgICAgIGV4cGVjdChwdWxzZURpdikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChwdWxzZURpdikudG9IYXZlQ2xhc3MoJ3ctNCcsICdoLTQnLCAnYmctZ3JheS0yMDAnLCAncm91bmRlZC1mdWxsJywgJ2FuaW1hdGUtcHVsc2UnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBzaG93IGxvYWRpbmcgc3Bpbm5lciB3aGVuIGh5ZHJhdGVkIGJ1dCBsb2FkaW5nJywgKCkgPT4ge1xuICAgICAgbW9ja1VzZUF1dGgubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgICAgc2Vzc2lvbjogbnVsbCxcbiAgICAgICAgaXNMb2FkaW5nOiB0cnVlLFxuICAgICAgICBoeWRyYXRlZDogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8QXV0aEJ1dHRvbnMgLz4pO1xuICAgICAgXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdsb2FkZXIyLWljb24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2xvYWRlcjItaWNvbicpKS50b0hhdmVDbGFzcygnaC01JywgJ3ctNScsICdhbmltYXRlLXNwaW4nLCAndGV4dC10aWZmYW55LTUwMCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGFwcGx5IGN1c3RvbSBjbGFzc05hbWUgdG8gaHlkcmF0aW9uIGluZGljYXRvcicsICgpID0+IHtcbiAgICAgIG1vY2tVc2VBdXRoLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgIHNlc3Npb246IG51bGwsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGh5ZHJhdGVkOiBmYWxzZVxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8QXV0aEJ1dHRvbnMgY2xhc3NOYW1lPVwiY3VzdG9tLWNsYXNzXCIgLz4pO1xuICAgICAgXG4gICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VzdG9tLWNsYXNzJyk7XG4gICAgICBleHBlY3QoY29udGFpbmVyKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KGNvbnRhaW5lcikudG9IYXZlQ2xhc3MoJ2ZsZXgnLCAnaXRlbXMtY2VudGVyJywgJ2p1c3RpZnktY2VudGVyJywgJ2N1c3RvbS1jbGFzcycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn8J+UkSBBdXRoZW50aWNhdGVkIFVzZXIgU3RhdGVzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCByZW5kZXIgVXNlclByb2ZpbGVEcm9wZG93biB3aGVuIHVzZXIgaXMgYXV0aGVudGljYXRlZCcsICgpID0+IHtcbiAgICAgIG1vY2tVc2VBdXRoLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXI6IHsgaWQ6ICcxMjMnLCBlbWFpbDogJ3VzZXJAZXhhbXBsZS5jb20nIH0sXG4gICAgICAgIHNlc3Npb246IHsgYWNjZXNzX3Rva2VuOiAndG9rZW4nIH0sXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGh5ZHJhdGVkOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxBdXRoQnV0dG9ucyAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IGRyb3Bkb3duID0gc2NyZWVuLmdldEJ5VGVzdElkKCd1c2VyLXByb2ZpbGUtZHJvcGRvd24nKTtcbiAgICAgIGV4cGVjdChkcm9wZG93bikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChkcm9wZG93bikudG9IYXZlQXR0cmlidXRlKCdkYXRhLXZhcmlhbnQnLCAnYWR2YW5jZWQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZW5kZXIgVXNlclByb2ZpbGVEcm9wZG93biB3aGVuIG9ubHkgdXNlciBleGlzdHMnLCAoKSA9PiB7XG4gICAgICBtb2NrVXNlQXV0aC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICB1c2VyOiB7IGlkOiAnMTIzJywgZW1haWw6ICd1c2VyQGV4YW1wbGUuY29tJyB9LFxuICAgICAgICBzZXNzaW9uOiBudWxsLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBoeWRyYXRlZDogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8QXV0aEJ1dHRvbnMgLz4pO1xuICAgICAgXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCd1c2VyLXByb2ZpbGUtZHJvcGRvd24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZW5kZXIgVXNlclByb2ZpbGVEcm9wZG93biB3aGVuIG9ubHkgc2Vzc2lvbiBleGlzdHMnLCAoKSA9PiB7XG4gICAgICBtb2NrVXNlQXV0aC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgICBzZXNzaW9uOiB7IGFjY2Vzc190b2tlbjogJ3Rva2VuJywgdXNlcjogeyBpZDogJzEyMycgfSB9LFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBoeWRyYXRlZDogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8QXV0aEJ1dHRvbnMgLz4pO1xuICAgICAgXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCd1c2VyLXByb2ZpbGUtZHJvcGRvd24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ/CfmqsgVW5hdXRoZW50aWNhdGVkIFVzZXIgU3RhdGVzJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbW9ja1VzZUF1dGgubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgICAgc2Vzc2lvbjogbnVsbCxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgaHlkcmF0ZWQ6IHRydWVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJlbmRlciBsb2dpbiBhbmQgcmVnaXN0ZXIgYnV0dG9ucyB3aGVuIG5vdCBhdXRoZW50aWNhdGVkJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoQnV0dG9ucyAvPik7XG4gICAgICBcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdMb2cgaW4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdHZXQgU3RhcnRlZCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgY29ycmVjdCBocmVmIGF0dHJpYnV0ZXMgZm9yIGF1dGggYnV0dG9ucycsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aEJ1dHRvbnMgLz4pO1xuICAgICAgXG4gICAgICBjb25zdCBsb2dpbkxpbmsgPSBzY3JlZW4uZ2V0QnlUZXh0KCdMb2cgaW4nKS5jbG9zZXN0KCdhJyk7XG4gICAgICBjb25zdCByZWdpc3RlckxpbmsgPSBzY3JlZW4uZ2V0QnlUZXh0KCdHZXQgU3RhcnRlZCcpLmNsb3Nlc3QoJ2EnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGxvZ2luTGluaykudG9IYXZlQXR0cmlidXRlKCdocmVmJywgJy9hdXRoP21vZGU9bG9naW4nKTtcbiAgICAgIGV4cGVjdChyZWdpc3RlckxpbmspLnRvSGF2ZUF0dHJpYnV0ZSgnaHJlZicsICcvYXV0aD9tb2RlPXJlZ2lzdGVyJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdXNlIGdob3N0IHZhcmlhbnQgZm9yIGxvZ2luIGJ1dHRvbicsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aEJ1dHRvbnMgLz4pO1xuICAgICAgXG4gICAgICBjb25zdCBsb2dpbkJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ0xvZyBpbicpO1xuICAgICAgZXhwZWN0KGxvZ2luQnV0dG9uKS50b0hhdmVBdHRyaWJ1dGUoJ2RhdGEtdmFyaWFudCcsICdnaG9zdCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgbWluaW11bSB0b3VjaCB0YXJnZXQgc2l6ZSBmb3IgYnV0dG9ucycsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aEJ1dHRvbnMgLz4pO1xuICAgICAgXG4gICAgICBjb25zdCBsb2dpbkJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ0xvZyBpbicpO1xuICAgICAgY29uc3QgcmVnaXN0ZXJCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdHZXQgU3RhcnRlZCcpO1xuICAgICAgXG4gICAgICBleHBlY3QobG9naW5CdXR0b24pLnRvSGF2ZUNsYXNzKCdtaW4taC1bNDRweF0nKTtcbiAgICAgIGV4cGVjdChyZWdpc3RlckJ1dHRvbikudG9IYXZlQ2xhc3MoJ21pbi1oLVs0NHB4XScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn8J+TsSBNb2JpbGUgTmF2aWdhdGlvbiBMYXlvdXQnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrVXNlQXV0aC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgICBzZXNzaW9uOiBudWxsLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBoeWRyYXRlZDogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZGV0ZWN0IG1vYmlsZSBuYXZpZ2F0aW9uIGxheW91dCBmcm9tIGNsYXNzTmFtZScsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aEJ1dHRvbnMgY2xhc3NOYW1lPVwiZmxleC1jb2wgbW9iaWxlLW5hdlwiIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgY29udGFpbmVyID0gc2NyZWVuLmdldEJ5VGV4dCgnTG9nIGluJykuY2xvc2VzdCgnZGl2Jyk7XG4gICAgICBleHBlY3QoY29udGFpbmVyKS50b0hhdmVDbGFzcygnZmxleC1jb2wnLCAnc3BhY2UteS0zJywgJ3ctZnVsbCcpO1xuICAgICAgZXhwZWN0KGNvbnRhaW5lcikubm90LnRvSGF2ZUNsYXNzKCdzcGFjZS14LTQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBhcHBseSBmdWxsIHdpZHRoIHN0eWxpbmcgdG8gbGlua3MgaW4gbW9iaWxlIGxheW91dCcsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aEJ1dHRvbnMgY2xhc3NOYW1lPVwiZmxleC1jb2xcIiAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IGxvZ2luTGluayA9IHNjcmVlbi5nZXRCeVRleHQoJ0xvZyBpbicpLmNsb3Nlc3QoJ2EnKTtcbiAgICAgIGNvbnN0IHJlZ2lzdGVyTGluayA9IHNjcmVlbi5nZXRCeVRleHQoJ0dldCBTdGFydGVkJykuY2xvc2VzdCgnYScpO1xuICAgICAgXG4gICAgICBleHBlY3QobG9naW5MaW5rKS50b0hhdmVDbGFzcygndy1mdWxsJyk7XG4gICAgICBleHBlY3QocmVnaXN0ZXJMaW5rKS50b0hhdmVDbGFzcygndy1mdWxsJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgYXBwbHkgZnVsbCB3aWR0aCBhbmQgY2VudGVyIHN0eWxpbmcgdG8gYnV0dG9ucyBpbiBtb2JpbGUgbGF5b3V0JywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoQnV0dG9ucyBjbGFzc05hbWU9XCJmbGV4LWNvbFwiIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgbG9naW5CdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdMb2cgaW4nKTtcbiAgICAgIGNvbnN0IHJlZ2lzdGVyQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnR2V0IFN0YXJ0ZWQnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGxvZ2luQnV0dG9uKS50b0hhdmVDbGFzcygndy1mdWxsJywgJ2p1c3RpZnktY2VudGVyJyk7XG4gICAgICBleHBlY3QocmVnaXN0ZXJCdXR0b24pLnRvSGF2ZUNsYXNzKCd3LWZ1bGwnLCAnanVzdGlmeS1jZW50ZXInKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ/CflIQgU3RhdGUgVHJhbnNpdGlvbnMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHRyYW5zaXRpb24gZnJvbSBoeWRyYXRpb24gdG8gbG9hZGluZyBzdGF0ZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVyZW5kZXIgfSA9IHJlbmRlcig8QXV0aEJ1dHRvbnMgLz4pO1xuICAgICAgXG4gICAgICBtb2NrVXNlQXV0aC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgICBzZXNzaW9uOiBudWxsLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBoeWRyYXRlZDogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgcmVyZW5kZXIoPEF1dGhCdXR0b25zIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgcHVsc2VEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYW5pbWF0ZS1wdWxzZScpO1xuICAgICAgZXhwZWN0KHB1bHNlRGl2KS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHB1bHNlRGl2KS50b0hhdmVDbGFzcygnYW5pbWF0ZS1wdWxzZScpO1xuICAgICAgXG4gICAgICBtb2NrVXNlQXV0aC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgICBzZXNzaW9uOiBudWxsLFxuICAgICAgICBpc0xvYWRpbmc6IHRydWUsXG4gICAgICAgIGh5ZHJhdGVkOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHJlcmVuZGVyKDxBdXRoQnV0dG9ucyAvPik7XG4gICAgICBcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2xvYWRlcjItaWNvbicpKS50b0hhdmVDbGFzcygnYW5pbWF0ZS1zcGluJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdHJhbnNpdGlvbiBmcm9tIGxvYWRpbmcgdG8gdW5hdXRoZW50aWNhdGVkIHN0YXRlJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXJlbmRlciB9ID0gcmVuZGVyKDxBdXRoQnV0dG9ucyAvPik7XG4gICAgICBcbiAgICAgIG1vY2tVc2VBdXRoLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgIHNlc3Npb246IG51bGwsXG4gICAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICAgICAgaHlkcmF0ZWQ6IHRydWVcbiAgICAgIH0pO1xuICAgICAgcmVyZW5kZXIoPEF1dGhCdXR0b25zIC8+KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnbG9hZGVyMi1pY29uJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBcbiAgICAgIG1vY2tVc2VBdXRoLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgIHNlc3Npb246IG51bGwsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGh5ZHJhdGVkOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHJlcmVuZGVyKDxBdXRoQnV0dG9ucyAvPik7XG4gICAgICBcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdMb2cgaW4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdHZXQgU3RhcnRlZCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHRyYW5zaXRpb24gZnJvbSB1bmF1dGhlbnRpY2F0ZWQgdG8gYXV0aGVudGljYXRlZCBzdGF0ZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVyZW5kZXIgfSA9IHJlbmRlcig8QXV0aEJ1dHRvbnMgLz4pO1xuICAgICAgXG4gICAgICBtb2NrVXNlQXV0aC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgICBzZXNzaW9uOiBudWxsLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBoeWRyYXRlZDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICByZXJlbmRlcig8QXV0aEJ1dHRvbnMgLz4pO1xuICAgICAgXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTG9nIGluJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBcbiAgICAgIG1vY2tVc2VBdXRoLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXI6IHsgaWQ6ICcxMjMnLCBlbWFpbDogJ3VzZXJAZXhhbXBsZS5jb20nIH0sXG4gICAgICAgIHNlc3Npb246IHsgYWNjZXNzX3Rva2VuOiAndG9rZW4nIH0sXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGh5ZHJhdGVkOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHJlcmVuZGVyKDxBdXRoQnV0dG9ucyAvPik7XG4gICAgICBcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3VzZXItcHJvZmlsZS1kcm9wZG93bicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnTG9nIGluJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn4pm/IEFjY2Vzc2liaWxpdHknLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrVXNlQXV0aC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgICBzZXNzaW9uOiBudWxsLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBoeWRyYXRlZDogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBhY2Nlc3NpYmxlIGJ1dHRvbiB0ZXh0JywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoQnV0dG9ucyAvPik7XG4gICAgICBcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6ICdMb2cgaW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogJ0dldCBTdGFydGVkJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIHByb3BlciBsaW5rIHNlbWFudGljcycsICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXV0aEJ1dHRvbnMgLz4pO1xuICAgICAgXG4gICAgICBjb25zdCBsb2dpbkxpbmsgPSBzY3JlZW4uZ2V0QnlSb2xlKCdsaW5rJywgeyBuYW1lOiAnTG9nIGluJyB9KTtcbiAgICAgIGNvbnN0IHJlZ2lzdGVyTGluayA9IHNjcmVlbi5nZXRCeVJvbGUoJ2xpbmsnLCB7IG5hbWU6ICdHZXQgU3RhcnRlZCcgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChsb2dpbkxpbmspLnRvSGF2ZUF0dHJpYnV0ZSgnaHJlZicsICcvYXV0aD9tb2RlPWxvZ2luJyk7XG4gICAgICBleHBlY3QocmVnaXN0ZXJMaW5rKS50b0hhdmVBdHRyaWJ1dGUoJ2hyZWYnLCAnL2F1dGg/bW9kZT1yZWdpc3RlcicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIG1haW50YWluIG1pbmltdW0gdG91Y2ggdGFyZ2V0IHNpemVzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdXRoQnV0dG9ucyAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IGxvZ2luQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnTG9nIGluJyk7XG4gICAgICBjb25zdCByZWdpc3RlckJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ0dldCBTdGFydGVkJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChsb2dpbkJ1dHRvbikudG9IYXZlQ2xhc3MoJ21pbi1oLVs0NHB4XScpO1xuICAgICAgZXhwZWN0KHJlZ2lzdGVyQnV0dG9uKS50b0hhdmVDbGFzcygnbWluLWgtWzQ0cHhdJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfwn5SnIEVkZ2UgQ2FzZXMgJiBFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHVuZGVmaW5lZCBhdXRoIGhvb2sgcmV0dXJuJywgKCkgPT4ge1xuICAgICAgbW9ja1VzZUF1dGgubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgICAgc2Vzc2lvbjogbnVsbCxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgaHlkcmF0ZWQ6IHRydWVcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QoKCkgPT4gcmVuZGVyKDxBdXRoQnV0dG9ucyAvPikpLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGF1dGggaG9vayByZXR1cm4nLCAoKSA9PiB7XG4gICAgICBtb2NrVXNlQXV0aC5tb2NrUmV0dXJuVmFsdWUoe30pO1xuICAgICAgXG4gICAgICBleHBlY3QoKCkgPT4gcmVuZGVyKDxBdXRoQnV0dG9ucyAvPikpLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHBhcnRpYWwgYXV0aCBzdGF0ZScsICgpID0+IHtcbiAgICAgIG1vY2tVc2VBdXRoLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgIHNlc3Npb246IG51bGwsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KCgpID0+IHJlbmRlcig8QXV0aEJ1dHRvbnMgLz4pKS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjbGFzc05hbWUgZWRnZSBjYXNlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGVkZ2VDYXNlcyA9IFsnJywgJyAgICcsICdmbGV4LWNvbC1zb21ldGhpbmcnLCAnbm90LWZsZXgtY29sJ107XG4gICAgICBcbiAgICAgIGVkZ2VDYXNlcy5mb3JFYWNoKGNsYXNzTmFtZSA9PiB7XG4gICAgICAgIG1vY2tVc2VBdXRoLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgICAgICBzZXNzaW9uOiBudWxsLFxuICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgaHlkcmF0ZWQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcig8QXV0aEJ1dHRvbnMgY2xhc3NOYW1lPXtjbGFzc05hbWV9IC8+KTtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0xvZyBpbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICB1bm1vdW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==
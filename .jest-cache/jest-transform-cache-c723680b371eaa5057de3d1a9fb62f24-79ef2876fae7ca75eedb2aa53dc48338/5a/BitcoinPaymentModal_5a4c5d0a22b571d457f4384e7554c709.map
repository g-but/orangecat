{"version":3,"names":["cov_2mgzzf6sqd","actualCoverage","exports","default","BitcoinPaymentModal","react_1","s","require","lucide_react_1","Button_1","Input_1","__importDefault","paymentService_1","QRCodeGenerator_1","isOpen","onClose","campaignId","campaignTitle","suggestedAmount","b","f","paymentType","setPaymentType","useState","amount","setAmount","paymentRequest","setPaymentRequest","loading","setLoading","handleCreatePayment","description","result","bitcoinPaymentService","createLightningPayment","createOnChainPayment","success","jsx_runtime_1","jsx","className","children","jsxs","Button","variant","onClick","X","Fragment","Zap","Bitcoin","type","value","onChange","e","parseInt","target","placeholder","disabled","CheckCircle","getPaymentQRData","size","label"],"sources":["/home/g/dev/orangecat/src/components/bitcoin/BitcoinPaymentModal.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { X, Bitcoin, Zap, CheckCircle } from 'lucide-react'\nimport { Button } from '@/components/ui/Button'\nimport Input from '@/components/ui/Input'\nimport { bitcoinPaymentService, PaymentRequest, PaymentType } from '@/services/bitcoin/paymentService'\nimport QRCodeGenerator from './QRCodeGenerator'\n\ninterface BitcoinPaymentModalProps {\n  isOpen: boolean\n  onClose: () => void\n  campaignId: string\n  campaignTitle: string\n  suggestedAmount?: number\n}\n\nexport default function BitcoinPaymentModal({\n  isOpen,\n  onClose,\n  campaignId,\n  campaignTitle,\n  suggestedAmount = 10000\n}: BitcoinPaymentModalProps) {\n  const [paymentType, setPaymentType] = useState<PaymentType>('lightning')\n  const [amount, setAmount] = useState(suggestedAmount)\n  const [paymentRequest, setPaymentRequest] = useState<PaymentRequest | null>(null)\n  const [loading, setLoading] = useState(false)\n\n  const handleCreatePayment = async () => {\n    setLoading(true)\n    \n    const description = `Donation to ${campaignTitle}`\n    const result = paymentType === 'lightning' \n      ? await bitcoinPaymentService.createLightningPayment(campaignId, amount, description)\n      : await bitcoinPaymentService.createOnChainPayment(campaignId, amount, description, 'bc1dummy')\n    \n    if (result.success && result.paymentRequest) {\n      setPaymentRequest(result.paymentRequest)\n    }\n    \n    setLoading(false)\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl max-w-md w-full\">\n        <div className=\"flex items-center justify-between p-6 border-b\">\n          <h2 className=\"text-xl font-bold\">Bitcoin Payment</h2>\n          <Button variant=\"ghost\" onClick={onClose}>\n            <X className=\"w-5 h-5\" />\n          </Button>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {!paymentRequest ? (\n            <>\n              <div className=\"text-center\">\n                <h3 className=\"font-semibold mb-1\">Supporting</h3>\n                <p className=\"text-gray-600\">{campaignTitle}</p>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-3\">\n                <Button\n                  variant={paymentType === 'lightning' ? 'primary' : 'outline'}\n                  onClick={() => setPaymentType('lightning')}\n                  className=\"flex items-center gap-2\"\n                >\n                  <Zap className=\"w-4 h-4\" />\n                  Lightning\n                </Button>\n                <Button\n                  variant={paymentType === 'onchain' ? 'primary' : 'outline'}\n                  onClick={() => setPaymentType('onchain')}\n                  className=\"flex items-center gap-2\"\n                >\n                  <Bitcoin className=\"w-4 h-4\" />\n                  On-Chain\n                </Button>\n              </div>\n\n              <Input\n                type=\"number\"\n                value={amount}\n                onChange={(e) => setAmount(parseInt(e.target.value) || 0)}\n                placeholder=\"Amount in satoshis\"\n                className=\"text-center\"\n              />\n\n              <Button\n                onClick={handleCreatePayment}\n                disabled={loading}\n                className=\"w-full bg-orange-500 hover:bg-orange-600\"\n              >\n                {loading ? 'Creating...' : 'Create Payment'}\n              </Button>\n            </>\n          ) : (\n            <div className=\"text-center space-y-4\">\n              <div className=\"flex items-center justify-center gap-2 text-green-600\">\n                <CheckCircle className=\"w-5 h-5\" />\n                <span>Payment Request Created</span>\n              </div>\n\n              <QRCodeGenerator\n                value={bitcoinPaymentService.getPaymentQRData(paymentRequest)}\n                size={200}\n                label={paymentType === 'lightning' ? 'Lightning Invoice' : 'Bitcoin Address'}\n              />\n\n              <div className=\"text-sm text-gray-600\">\n                Amount: {paymentRequest.amount} sats\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n} "],"mappings":"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","ignoreList":[]}
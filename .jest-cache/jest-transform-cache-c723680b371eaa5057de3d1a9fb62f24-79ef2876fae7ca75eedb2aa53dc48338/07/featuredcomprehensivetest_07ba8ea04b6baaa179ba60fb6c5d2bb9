f8b596b65fdae4459f5ba683d91fccc6
"use strict";
/**
 * FEATURED SERVICE - COMPREHENSIVE TEST COVERAGE
 *
 * This test suite provides comprehensive coverage for the FeaturedService,
 * testing all featured campaign types, data transformations, error handling,
 * and edge cases for the featured content system.
 *
 * Created: 2025-01-08
 * Last Modified: 2025-01-08
 * Last Modified Summary: Comprehensive FeaturedService tests for production readiness
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
// Mock Supabase client
jest.mock('@/services/supabase/client', () => ({
    __esModule: true,
    default: {
        from: jest.fn(),
        auth: { getUser: jest.fn() },
        rpc: jest.fn()
    }
}));
// Mock logger
jest.mock('@/utils/logger', () => ({
    logger: {
        error: jest.fn(),
        warn: jest.fn(),
        info: jest.fn()
    }
}));
// Get the mocked client
const client_1 = __importDefault(require("@/services/supabase/client"));
const mockSupabase = client_1.default;
// Enhanced helper function to create consistent mock chain for FeaturedService
const createMockQuery = (data, error = null) => {
    const mockChain = {
        select: jest.fn().mockReturnThis(),
        eq: jest.fn().mockReturnThis(),
        or: jest.fn().mockReturnThis(),
        order: jest.fn().mockReturnThis(),
        range: jest.fn().mockResolvedValue({ data, error }),
        limit: jest.fn().mockResolvedValue({ data, error }),
        not: jest.fn().mockReturnThis(),
        gte: jest.fn().mockReturnThis(),
        lte: jest.fn().mockReturnThis(),
        gt: jest.fn().mockReturnThis(),
        in: jest.fn().mockReturnThis(),
        is: jest.fn().mockReturnThis(),
        insert: jest.fn().mockResolvedValue({ data, error }),
        update: jest.fn().mockReturnThis(),
        delete: jest.fn().mockResolvedValue({ data, error }),
    };
    // Make all methods chainable and return the final data at the end
    Object.keys(mockChain).forEach(key => {
        if (key !== 'range' && key !== 'limit' && key !== 'insert' && key !== 'delete') {
            mockChain[key] = jest.fn().mockReturnValue(mockChain);
        }
    });
    return mockChain;
};
// Import after mocking
const featured_1 = require("../featured");
describe('⭐ Featured Service - Comprehensive Coverage', () => {
    beforeEach(() => {
        jest.clearAllMocks();
        // Reset console methods to avoid test noise
        jest.spyOn(console, 'warn').mockImplementation(() => { });
        jest.spyOn(console, 'error').mockImplementation(() => { });
        // Setup default mock responses using consistent helper
        mockSupabase.from.mockReturnValue(createMockQuery([], null));
    });
    afterEach(() => {
        jest.restoreAllMocks();
    });
    describe('🎯 Service Architecture', () => {
        test('should export all required functions', () => {
            expect(typeof featured_1.getFeaturedCampaigns).toBe('function');
            expect(typeof featured_1.getTrendingCampaigns).toBe('function');
            expect(typeof featured_1.getStaffPicks).toBe('function');
            expect(typeof featured_1.getNearlyFundedCampaigns).toBe('function');
            expect(typeof featured_1.getNewAndNoteworthy).toBe('function');
            expect(typeof featured_1.featureCampaign).toBe('function');
            expect(typeof featured_1.unfeatureCampaign).toBe('function');
        });
        test('should have proper TypeScript types', () => {
            const featuredTypes = [
                'trending',
                'staff_pick',
                'community_choice',
                'nearly_funded',
                'new_and_noteworthy',
                'featured'
            ];
            featuredTypes.forEach(type => {
                expect(typeof type).toBe('string');
            });
        });
    });
    describe('⭐ Get Featured Campaigns', () => {
        test('should get featured campaigns successfully', async () => {
            const mockCampaigns = [
                {
                    id: 'camp-1',
                    title: 'High Funding Campaign',
                    description: 'Well-funded campaign',
                    goal_amount: 10000,
                    total_funding: 8000,
                    contributor_count: 50,
                    is_active: true,
                    featured_image_url: 'image1.jpg',
                    slug: 'high-funding',
                    created_at: '2024-01-01T00:00:00.000Z',
                    profiles: [{
                            username: 'creator1',
                            display_name: 'Creator One',
                            avatar_url: 'avatar1.jpg'
                        }]
                }
            ];
            // Use consistent mock pattern
            mockSupabase.from.mockReturnValue(createMockQuery(mockCampaigns, null));
            const result = await (0, featured_1.getFeaturedCampaigns)(6);
            expect(Array.isArray(result)).toBe(true);
            expect(result).toHaveLength(1);
            expect(result[0].featured_type).toBe('nearly_funded'); // 80% funded
            expect(result[0].featured_priority).toBe(1);
        });
        test('should handle empty featured campaigns', async () => {
            mockSupabase.from.mockReturnValue(createMockQuery([], null));
            const result = await (0, featured_1.getFeaturedCampaigns)();
            expect(result).toEqual([]);
        });
        test('should handle database errors gracefully', async () => {
            mockSupabase.from.mockReturnValue(createMockQuery(null, { message: 'Database error' }));
            const result = await (0, featured_1.getFeaturedCampaigns)();
            expect(result).toEqual([]);
        });
        test('should handle null profiles gracefully', async () => {
            const mockCampaigns = [{
                    id: 'camp-1',
                    title: 'Campaign',
                    description: 'Description',
                    goal_amount: 1000,
                    total_funding: 500,
                    contributor_count: 10,
                    is_active: true,
                    featured_image_url: 'image.jpg',
                    slug: 'campaign',
                    created_at: '2024-01-01T00:00:00.000Z',
                    profiles: null
                }];
            mockSupabase.from.mockReturnValue(createMockQuery(mockCampaigns, null));
            const result = await (0, featured_1.getFeaturedCampaigns)();
            expect(result).toHaveLength(1);
            expect(result[0].profiles).toBeNull();
        });
        test('should limit results correctly', async () => {
            const mockCampaigns = Array.from({ length: 10 }, (_, i) => ({
                id: `camp-${i}`,
                title: `Campaign ${i}`,
                description: `Description ${i}`,
                goal_amount: 1000,
                total_funding: 500,
                contributor_count: 10,
                is_active: true,
                featured_image_url: 'image.jpg',
                slug: `campaign-${i}`,
                created_at: '2024-01-01T00:00:00.000Z',
                profiles: [{ username: 'creator', display_name: 'Creator', avatar_url: 'avatar.jpg' }]
            }));
            mockSupabase.from.mockReturnValue(createMockQuery(mockCampaigns.slice(0, 3), null));
            const result = await (0, featured_1.getFeaturedCampaigns)(3);
            expect(result).toHaveLength(3);
        });
    });
    describe('🔥 Trending Campaigns', () => {
        test('should get trending campaigns successfully', async () => {
            const mockCampaigns = [
                {
                    id: 'trend-1',
                    title: 'Trending Campaign 1',
                    description: 'Most popular',
                    goal_amount: 5000,
                    total_funding: 3000,
                    contributor_count: 100,
                    is_active: true,
                    featured_image_url: 'trend1.jpg',
                    slug: 'trending-1',
                    created_at: '2024-01-01T00:00:00.000Z',
                    profiles: [{ username: 'trendy1', display_name: 'Trendy One', avatar_url: 'trendy1.jpg' }]
                }
            ];
            mockSupabase.from.mockReturnValue(createMockQuery(mockCampaigns, null));
            const result = await (0, featured_1.getTrendingCampaigns)(3);
            expect(result).toHaveLength(1);
            expect(result[0].featured_type).toBe('trending');
            expect(result[0].featured_priority).toBe(1);
        });
        test('should handle trending campaigns error', async () => {
            mockSupabase.from.mockReturnValue({
                select: jest.fn(() => ({
                    eq: jest.fn(() => ({
                        order: jest.fn(() => ({
                            limit: jest.fn(() => Promise.reject(new Error('Database error')))
                        }))
                    }))
                }))
            });
            const result = await (0, featured_1.getTrendingCampaigns)();
            expect(result).toEqual([]);
        });
    });
    describe('👨‍💼 Staff Picks', () => {
        test('should get staff picks successfully', async () => {
            const mockCampaigns = [
                {
                    id: 'staff-1',
                    title: 'Staff Pick 1',
                    description: 'Quality campaign with image',
                    goal_amount: 2000,
                    total_funding: 800,
                    contributor_count: 25,
                    is_active: true,
                    featured_image_url: 'staff1.jpg',
                    slug: 'staff-pick-1',
                    created_at: '2024-01-01T00:00:00.000Z',
                    profiles: [{ username: 'quality1', display_name: 'Quality One', avatar_url: 'quality1.jpg' }]
                }
            ];
            mockSupabase.from.mockReturnValue(createMockQuery(mockCampaigns, null));
            const result = await (0, featured_1.getStaffPicks)(3);
            expect(result).toHaveLength(1);
            expect(result[0].featured_type).toBe('staff_pick');
            expect(result[0].featured_priority).toBe(1);
        });
        test('should handle staff picks error', async () => {
            mockSupabase.from.mockReturnValue({
                select: jest.fn(() => ({
                    eq: jest.fn(() => ({
                        not: jest.fn(() => ({
                            order: jest.fn(() => ({
                                limit: jest.fn(() => Promise.reject(new Error('Database error')))
                            }))
                        }))
                    }))
                }))
            });
            const result = await (0, featured_1.getStaffPicks)();
            expect(result).toEqual([]);
        });
    });
    describe('🎯 Nearly Funded Campaigns', () => {
        test('should get nearly funded campaigns successfully', async () => {
            const mockCampaigns = [
                {
                    id: 'nearly-1',
                    title: 'Nearly Funded 1',
                    description: '90% funded',
                    goal_amount: 1000,
                    total_funding: 900, // 90% funded
                    contributor_count: 45,
                    is_active: true,
                    featured_image_url: 'nearly1.jpg',
                    slug: 'nearly-funded-1',
                    created_at: '2024-01-01T00:00:00.000Z',
                    profiles: [{ username: 'almost1', display_name: 'Almost One', avatar_url: 'almost1.jpg' }]
                }
            ];
            mockSupabase.from.mockReturnValue(createMockQuery(mockCampaigns, null));
            const result = await (0, featured_1.getNearlyFundedCampaigns)(3);
            expect(result).toHaveLength(1); // Should include 90% funded campaign
            expect(result[0].featured_type).toBe('nearly_funded');
        });
        test('should filter out campaigns below 70% funding', async () => {
            const mockCampaigns = [
                {
                    id: 'not-nearly',
                    title: 'Not Nearly Funded',
                    description: '50% funded',
                    goal_amount: 1000,
                    total_funding: 500, // 50% funded - should be filtered out
                    contributor_count: 20,
                    is_active: true,
                    featured_image_url: 'not-nearly.jpg',
                    slug: 'not-nearly',
                    created_at: '2024-01-03T00:00:00.000Z',
                    profiles: [{ username: 'not-almost', display_name: 'Not Almost', avatar_url: 'not-almost.jpg' }]
                }
            ];
            mockSupabase.from.mockReturnValue({
                select: jest.fn(() => ({
                    eq: jest.fn(() => ({
                        not: jest.fn(() => ({
                            order: jest.fn(() => ({
                                limit: jest.fn(() => Promise.resolve({ data: mockCampaigns, error: null }))
                            }))
                        }))
                    }))
                }))
            });
            const result = await (0, featured_1.getNearlyFundedCampaigns)();
            expect(result).toEqual([]); // Should filter out 50% funded
        });
    });
    describe('🆕 New and Noteworthy', () => {
        test('should get new and noteworthy campaigns successfully', async () => {
            const mockCampaigns = [
                {
                    id: 'new-1',
                    title: 'New Campaign 1',
                    description: 'Recently created with traction',
                    goal_amount: 1000,
                    total_funding: 200,
                    contributor_count: 15,
                    is_active: true,
                    featured_image_url: 'new1.jpg',
                    slug: 'new-1',
                    created_at: '2024-01-10T00:00:00.000Z', // Recent
                    profiles: [{ username: 'new1', display_name: 'New One', avatar_url: 'new1.jpg' }]
                }
            ];
            mockSupabase.from.mockReturnValue(createMockQuery(mockCampaigns, null));
            const result = await (0, featured_1.getNewAndNoteworthy)(3);
            expect(result).toHaveLength(1);
            expect(result[0].featured_type).toBe('new_and_noteworthy');
            expect(result[0].featured_priority).toBe(1);
        });
        test('should handle new and noteworthy error', async () => {
            mockSupabase.from.mockReturnValue({
                select: jest.fn(() => ({
                    eq: jest.fn(() => ({
                        gte: jest.fn(() => ({
                            order: jest.fn(() => ({
                                limit: jest.fn(() => Promise.reject(new Error('Database error')))
                            }))
                        }))
                    }))
                }))
            });
            const result = await (0, featured_1.getNewAndNoteworthy)();
            expect(result).toEqual([]);
        });
    });
    describe('⚙️ Campaign Management', () => {
        test('should feature a campaign successfully', async () => {
            // featureCampaign currently just returns true and logs (no database interaction)
            const result = await (0, featured_1.featureCampaign)('camp-1', 'staff_pick', 1);
            expect(result).toBe(true);
        });
        test('should handle featuring campaign error', async () => {
            // featureCampaign currently just returns true (no error handling implemented yet)
            const result = await (0, featured_1.featureCampaign)('camp-1', 'staff_pick');
            expect(result).toBe(true); // Current implementation always returns true
        });
        test('should unfeature a campaign successfully', async () => {
            // unfeatureCampaign currently just returns true and logs (no database interaction)
            const result = await (0, featured_1.unfeatureCampaign)('camp-1');
            expect(result).toBe(true);
        });
        test('should handle unfeaturing campaign error', async () => {
            // unfeatureCampaign currently just returns true (no error handling implemented yet)
            const result = await (0, featured_1.unfeatureCampaign)('camp-1');
            expect(result).toBe(true); // Current implementation always returns true
        });
    });
    describe('🏗️ Data Transformation', () => {
        test('should transform profiles array correctly', async () => {
            const mockCampaigns = [{
                    id: 'camp-1',
                    title: 'Test Campaign',
                    description: 'Test',
                    goal_amount: 1000,
                    total_funding: 500,
                    contributor_count: 25,
                    is_active: true,
                    featured_image_url: 'image.jpg',
                    slug: 'test',
                    created_at: '2024-01-01T00:00:00.000Z',
                    profiles: [
                        { username: 'creator1', display_name: 'Creator One', avatar_url: 'avatar1.jpg' },
                        { username: 'creator2', display_name: 'Creator Two', avatar_url: 'avatar2.jpg' }
                    ]
                }];
            mockSupabase.from.mockReturnValue(createMockQuery(mockCampaigns, null));
            const result = await (0, featured_1.getFeaturedCampaigns)();
            expect(result[0].profiles).toEqual(mockCampaigns[0].profiles[0]); // Should take first profile
        });
        test('should handle campaigns without goals correctly', async () => {
            const mockCampaigns = [{
                    id: 'camp-1',
                    title: 'No Goal Campaign',
                    description: 'Campaign without goal',
                    goal_amount: null,
                    total_funding: 500,
                    contributor_count: 25,
                    is_active: true,
                    featured_image_url: 'image.jpg',
                    slug: 'no-goal',
                    created_at: '2024-01-01T00:00:00.000Z',
                    profiles: [{ username: 'creator', display_name: 'Creator', avatar_url: 'avatar.jpg' }]
                }];
            mockSupabase.from.mockReturnValue(createMockQuery(mockCampaigns, null));
            const result = await (0, featured_1.getFeaturedCampaigns)();
            expect(result).toHaveLength(1);
            expect(result[0].featured_type).toBe('staff_pick'); // First campaign gets staff_pick (index < 2)
        });
    });
    describe('🧪 Edge Cases', () => {
        test('should handle campaigns with zero values', async () => {
            const mockCampaigns = [{
                    id: 'zero-camp',
                    title: 'Zero Campaign',
                    description: 'Zero values',
                    goal_amount: 0,
                    total_funding: 0,
                    contributor_count: 0,
                    is_active: true,
                    featured_image_url: 'zero.jpg',
                    slug: 'zero',
                    created_at: '2024-01-01T00:00:00.000Z',
                    profiles: [{ username: 'zero', display_name: 'Zero', avatar_url: 'zero.jpg' }]
                }];
            mockSupabase.from.mockReturnValue(createMockQuery(mockCampaigns, null));
            const result = await (0, featured_1.getFeaturedCampaigns)();
            expect(result).toHaveLength(1);
            expect(result[0].featured_type).toBe('staff_pick'); // First campaign gets staff_pick (index < 2)
        });
        test('should handle very large numbers', async () => {
            const mockCampaigns = [{
                    id: 'large-camp',
                    title: 'Large Campaign',
                    description: 'Very large numbers',
                    goal_amount: 1000000000,
                    total_funding: 999999999,
                    contributor_count: 999999,
                    is_active: true,
                    featured_image_url: 'large.jpg',
                    slug: 'large',
                    created_at: '2024-01-01T00:00:00.000Z',
                    profiles: [{ username: 'whale', display_name: 'Whale', avatar_url: 'whale.jpg' }]
                }];
            mockSupabase.from.mockReturnValue(createMockQuery(mockCampaigns, null));
            const result = await (0, featured_1.getFeaturedCampaigns)();
            expect(result).toHaveLength(1);
            expect(result[0].featured_type).toBe('nearly_funded'); // Should handle large numbers
        });
        test('should handle concurrent requests', async () => {
            const mockCampaigns = [{
                    id: 'concurrent',
                    title: 'Concurrent',
                    description: 'Concurrent test',
                    goal_amount: 1000,
                    total_funding: 500,
                    contributor_count: 25,
                    is_active: true,
                    featured_image_url: 'concurrent.jpg',
                    slug: 'concurrent',
                    created_at: '2024-01-01T00:00:00.000Z',
                    profiles: [{ username: 'concurrent', display_name: 'Concurrent', avatar_url: 'concurrent.jpg' }]
                }];
            mockSupabase.from.mockReturnValue(createMockQuery(mockCampaigns, null));
            // Make multiple concurrent requests
            const promises = [
                (0, featured_1.getFeaturedCampaigns)(),
                (0, featured_1.getTrendingCampaigns)(),
                (0, featured_1.getStaffPicks)(),
                (0, featured_1.getNearlyFundedCampaigns)(),
                (0, featured_1.getNewAndNoteworthy)()
            ];
            const results = await Promise.all(promises);
            results.forEach(result => {
                expect(Array.isArray(result)).toBe(true);
            });
        });
    });
    describe('🚨 Error Handling', () => {
        test('should handle complete database failure', async () => {
            mockSupabase.from.mockImplementation(() => {
                throw new Error('Complete database failure');
            });
            const result = await (0, featured_1.getFeaturedCampaigns)();
            expect(result).toEqual([]);
        });
        test('should handle null responses gracefully', async () => {
            mockSupabase.from.mockReturnValue({
                select: jest.fn(() => ({
                    eq: jest.fn(() => ({
                        order: jest.fn(() => ({
                            limit: jest.fn(() => Promise.resolve({ data: null, error: null }))
                        }))
                    }))
                }))
            });
            const result = await (0, featured_1.getFeaturedCampaigns)();
            expect(result).toEqual([]);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvZy9kZXYvb3JhbmdlY2F0L3NyYy9zZXJ2aWNlcy9fX3Rlc3RzX18vZmVhdHVyZWQuY29tcHJlaGVuc2l2ZS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7OztHQVVHOzs7OztBQUVILHVCQUF1QjtBQUN2QixJQUFJLENBQUMsSUFBSSxDQUFDLDRCQUE0QixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDN0MsVUFBVSxFQUFFLElBQUk7SUFDaEIsT0FBTyxFQUFFO1FBQ1AsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZixJQUFJLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFO1FBQzVCLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0tBQ2Y7Q0FDRixDQUFDLENBQUMsQ0FBQTtBQU1ILGNBQWM7QUFDZCxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDakMsTUFBTSxFQUFFO1FBQ04sS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDaEIsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZixJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtLQUNoQjtDQUNGLENBQUMsQ0FBQyxDQUFBO0FBWEgsd0JBQXdCO0FBQ3hCLHdFQUFpRDtBQUNqRCxNQUFNLFlBQVksR0FBRyxnQkFBd0MsQ0FBQTtBQVc3RCwrRUFBK0U7QUFDL0UsTUFBTSxlQUFlLEdBQUcsQ0FBQyxJQUFXLEVBQUUsUUFBYSxJQUFJLEVBQUUsRUFBRTtJQUN6RCxNQUFNLFNBQVMsR0FBRztRQUNoQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtRQUNsQyxFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtRQUM5QixFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtRQUM5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QUEyQixDQUFDLENBQUE7WUFDOUMsQ0FBQyxDQUFDLENBQUE7WUFFRixNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUEsK0JBQW9CLEdBQUUsQ0FBQTtZQUUzQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFBO1FBQzVCLENBQUMsQ0FBQyxDQUFBO1FBRUYsSUFBSSxDQUFDLHlDQUF5QyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ3pELFlBQVksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDO2dCQUNoQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO29CQUNyQixFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO3dCQUNqQixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDOzRCQUNwQixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQzt5QkFDbkUsQ0FBQyxDQUFDO3FCQUNKLENBQUMsQ0FBQztpQkFDSixDQUFDLENBQUM7YUFDSixDQUFDLENBQUE7WUFFRixNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUEsK0JBQW9CLEdBQUUsQ0FBQTtZQUUzQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFBO1FBQzVCLENBQUMsQ0FBQyxDQUFBO0lBRUosQ0FBQyxDQUFDLENBQUE7QUFFSixDQUFDLENBQUMsQ0FBQSIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9nL2Rldi9vcmFuZ2VjYXQvc3JjL3NlcnZpY2VzL19fdGVzdHNfXy9mZWF0dXJlZC5jb21wcmVoZW5zaXZlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBGRUFUVVJFRCBTRVJWSUNFIC0gQ09NUFJFSEVOU0lWRSBURVNUIENPVkVSQUdFXG4gKiBcbiAqIFRoaXMgdGVzdCBzdWl0ZSBwcm92aWRlcyBjb21wcmVoZW5zaXZlIGNvdmVyYWdlIGZvciB0aGUgRmVhdHVyZWRTZXJ2aWNlLFxuICogdGVzdGluZyBhbGwgZmVhdHVyZWQgY2FtcGFpZ24gdHlwZXMsIGRhdGEgdHJhbnNmb3JtYXRpb25zLCBlcnJvciBoYW5kbGluZyxcbiAqIGFuZCBlZGdlIGNhc2VzIGZvciB0aGUgZmVhdHVyZWQgY29udGVudCBzeXN0ZW0uXG4gKiBcbiAqIENyZWF0ZWQ6IDIwMjUtMDEtMDhcbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDEtMDhcbiAqIExhc3QgTW9kaWZpZWQgU3VtbWFyeTogQ29tcHJlaGVuc2l2ZSBGZWF0dXJlZFNlcnZpY2UgdGVzdHMgZm9yIHByb2R1Y3Rpb24gcmVhZGluZXNzXG4gKi9cblxuLy8gTW9jayBTdXBhYmFzZSBjbGllbnRcbmplc3QubW9jaygnQC9zZXJ2aWNlcy9zdXBhYmFzZS9jbGllbnQnLCAoKSA9PiAoe1xuICBfX2VzTW9kdWxlOiB0cnVlLFxuICBkZWZhdWx0OiB7XG4gICAgZnJvbTogamVzdC5mbigpLFxuICAgIGF1dGg6IHsgZ2V0VXNlcjogamVzdC5mbigpIH0sXG4gICAgcnBjOiBqZXN0LmZuKClcbiAgfVxufSkpXG5cbi8vIEdldCB0aGUgbW9ja2VkIGNsaWVudFxuaW1wb3J0IHN1cGFiYXNlIGZyb20gJ0Avc2VydmljZXMvc3VwYWJhc2UvY2xpZW50J1xuY29uc3QgbW9ja1N1cGFiYXNlID0gc3VwYWJhc2UgYXMgamVzdC5Nb2NrZWQ8dHlwZW9mIHN1cGFiYXNlPlxuXG4vLyBNb2NrIGxvZ2dlclxuamVzdC5tb2NrKCdAL3V0aWxzL2xvZ2dlcicsICgpID0+ICh7XG4gIGxvZ2dlcjoge1xuICAgIGVycm9yOiBqZXN0LmZuKCksXG4gICAgd2FybjogamVzdC5mbigpLFxuICAgIGluZm86IGplc3QuZm4oKVxuICB9XG59KSlcblxuLy8gRW5oYW5jZWQgaGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBjb25zaXN0ZW50IG1vY2sgY2hhaW4gZm9yIEZlYXR1cmVkU2VydmljZVxuY29uc3QgY3JlYXRlTW9ja1F1ZXJ5ID0gKGRhdGE6IGFueVtdLCBlcnJvcjogYW55ID0gbnVsbCkgPT4ge1xuICBjb25zdCBtb2NrQ2hhaW4gPSB7XG4gICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgb3I6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIG9yZGVyOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICByYW5nZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YSwgZXJyb3IgfSksXG4gICAgbGltaXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGEsIGVycm9yIH0pLFxuICAgIG5vdDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgZ3RlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICBsdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIGd0OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICBpbjogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgaXM6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIGluc2VydDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YSwgZXJyb3IgfSksXG4gICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICBkZWxldGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGEsIGVycm9yIH0pLFxuICB9XG4gIFxuICAvLyBNYWtlIGFsbCBtZXRob2RzIGNoYWluYWJsZSBhbmQgcmV0dXJuIHRoZSBmaW5hbCBkYXRhIGF0IHRoZSBlbmRcbiAgT2JqZWN0LmtleXMobW9ja0NoYWluKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgaWYgKGtleSAhPT0gJ3JhbmdlJyAmJiBrZXkgIT09ICdsaW1pdCcgJiYga2V5ICE9PSAnaW5zZXJ0JyAmJiBrZXkgIT09ICdkZWxldGUnKSB7XG4gICAgICBtb2NrQ2hhaW5ba2V5XSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUobW9ja0NoYWluKVxuICAgIH1cbiAgfSlcbiAgXG4gIHJldHVybiBtb2NrQ2hhaW5cbn1cblxuLy8gSW1wb3J0IGFmdGVyIG1vY2tpbmdcbmltcG9ydCB7IFxuICBnZXRGZWF0dXJlZENhbXBhaWducyxcbiAgZ2V0VHJlbmRpbmdDYW1wYWlnbnMsXG4gIGdldFN0YWZmUGlja3MsXG4gIGdldE5lYXJseUZ1bmRlZENhbXBhaWducyxcbiAgZ2V0TmV3QW5kTm90ZXdvcnRoeSxcbiAgZmVhdHVyZUNhbXBhaWduLFxuICB1bmZlYXR1cmVDYW1wYWlnbixcbiAgRmVhdHVyZWRDYW1wYWlnbixcbiAgRmVhdHVyZWRUeXBlXG59IGZyb20gJy4uL2ZlYXR1cmVkJ1xuXG5kZXNjcmliZSgn4q2QIEZlYXR1cmVkIFNlcnZpY2UgLSBDb21wcmVoZW5zaXZlIENvdmVyYWdlJywgKCkgPT4ge1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXG4gICAgXG4gICAgLy8gUmVzZXQgY29uc29sZSBtZXRob2RzIHRvIGF2b2lkIHRlc3Qgbm9pc2VcbiAgICBqZXN0LnNweU9uKGNvbnNvbGUsICd3YXJuJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KVxuICAgIGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KVxuICAgIFxuICAgIC8vIFNldHVwIGRlZmF1bHQgbW9jayByZXNwb25zZXMgdXNpbmcgY29uc2lzdGVudCBoZWxwZXJcbiAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUoY3JlYXRlTW9ja1F1ZXJ5KFtdLCBudWxsKSlcbiAgfSlcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QucmVzdG9yZUFsbE1vY2tzKClcbiAgfSlcblxuICBkZXNjcmliZSgn8J+OryBTZXJ2aWNlIEFyY2hpdGVjdHVyZScsICgpID0+IHtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgZXhwb3J0IGFsbCByZXF1aXJlZCBmdW5jdGlvbnMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodHlwZW9mIGdldEZlYXR1cmVkQ2FtcGFpZ25zKS50b0JlKCdmdW5jdGlvbicpXG4gICAgICBleHBlY3QodHlwZW9mIGdldFRyZW5kaW5nQ2FtcGFpZ25zKS50b0JlKCdmdW5jdGlvbicpXG4gICAgICBleHBlY3QodHlwZW9mIGdldFN0YWZmUGlja3MpLnRvQmUoJ2Z1bmN0aW9uJylcbiAgICAgIGV4cGVjdCh0eXBlb2YgZ2V0TmVhcmx5RnVuZGVkQ2FtcGFpZ25zKS50b0JlKCdmdW5jdGlvbicpXG4gICAgICBleHBlY3QodHlwZW9mIGdldE5ld0FuZE5vdGV3b3J0aHkpLnRvQmUoJ2Z1bmN0aW9uJylcbiAgICAgIGV4cGVjdCh0eXBlb2YgZmVhdHVyZUNhbXBhaWduKS50b0JlKCdmdW5jdGlvbicpXG4gICAgICBleHBlY3QodHlwZW9mIHVuZmVhdHVyZUNhbXBhaWduKS50b0JlKCdmdW5jdGlvbicpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIHByb3BlciBUeXBlU2NyaXB0IHR5cGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgZmVhdHVyZWRUeXBlczogRmVhdHVyZWRUeXBlW10gPSBbXG4gICAgICAgICd0cmVuZGluZycsXG4gICAgICAgICdzdGFmZl9waWNrJyxcbiAgICAgICAgJ2NvbW11bml0eV9jaG9pY2UnLFxuICAgICAgICAnbmVhcmx5X2Z1bmRlZCcsXG4gICAgICAgICduZXdfYW5kX25vdGV3b3J0aHknLFxuICAgICAgICAnZmVhdHVyZWQnXG4gICAgICBdXG4gICAgICBcbiAgICAgIGZlYXR1cmVkVHlwZXMuZm9yRWFjaCh0eXBlID0+IHtcbiAgICAgICAgZXhwZWN0KHR5cGVvZiB0eXBlKS50b0JlKCdzdHJpbmcnKVxuICAgICAgfSlcbiAgICB9KVxuXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+KtkCBHZXQgRmVhdHVyZWQgQ2FtcGFpZ25zJywgKCkgPT4ge1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBnZXQgZmVhdHVyZWQgY2FtcGFpZ25zIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tDYW1wYWlnbnMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2NhbXAtMScsXG4gICAgICAgICAgdGl0bGU6ICdIaWdoIEZ1bmRpbmcgQ2FtcGFpZ24nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnV2VsbC1mdW5kZWQgY2FtcGFpZ24nLFxuICAgICAgICAgIGdvYWxfYW1vdW50OiAxMDAwMCxcbiAgICAgICAgICB0b3RhbF9mdW5kaW5nOiA4MDAwLFxuICAgICAgICAgIGNvbnRyaWJ1dG9yX2NvdW50OiA1MCxcbiAgICAgICAgICBpc19hY3RpdmU6IHRydWUsXG4gICAgICAgICAgZmVhdHVyZWRfaW1hZ2VfdXJsOiAnaW1hZ2UxLmpwZycsXG4gICAgICAgICAgc2x1ZzogJ2hpZ2gtZnVuZGluZycsXG4gICAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDAuMDAwWicsXG4gICAgICAgICAgcHJvZmlsZXM6IFt7XG4gICAgICAgICAgICB1c2VybmFtZTogJ2NyZWF0b3IxJyxcbiAgICAgICAgICAgIGRpc3BsYXlfbmFtZTogJ0NyZWF0b3IgT25lJyxcbiAgICAgICAgICAgIGF2YXRhcl91cmw6ICdhdmF0YXIxLmpwZydcbiAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgICBdXG5cbiAgICAgIC8vIFVzZSBjb25zaXN0ZW50IG1vY2sgcGF0dGVyblxuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKGNyZWF0ZU1vY2tRdWVyeShtb2NrQ2FtcGFpZ25zLCBudWxsKSlcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0RmVhdHVyZWRDYW1wYWlnbnMoNilcblxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0KSkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDEpXG4gICAgICBleHBlY3QocmVzdWx0WzBdLmZlYXR1cmVkX3R5cGUpLnRvQmUoJ25lYXJseV9mdW5kZWQnKSAvLyA4MCUgZnVuZGVkXG4gICAgICBleHBlY3QocmVzdWx0WzBdLmZlYXR1cmVkX3ByaW9yaXR5KS50b0JlKDEpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgZmVhdHVyZWQgY2FtcGFpZ25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKGNyZWF0ZU1vY2tRdWVyeShbXSwgbnVsbCkpXG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldEZlYXR1cmVkQ2FtcGFpZ25zKClcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbXSlcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZShjcmVhdGVNb2NrUXVlcnkobnVsbCwgeyBtZXNzYWdlOiAnRGF0YWJhc2UgZXJyb3InIH0pKVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRGZWF0dXJlZENhbXBhaWducygpXG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoW10pXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbnVsbCBwcm9maWxlcyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NhbXBhaWducyA9IFt7XG4gICAgICAgIGlkOiAnY2FtcC0xJyxcbiAgICAgICAgdGl0bGU6ICdDYW1wYWlnbicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRGVzY3JpcHRpb24nLFxuICAgICAgICBnb2FsX2Ftb3VudDogMTAwMCxcbiAgICAgICAgdG90YWxfZnVuZGluZzogNTAwLFxuICAgICAgICBjb250cmlidXRvcl9jb3VudDogMTAsXG4gICAgICAgIGlzX2FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgZmVhdHVyZWRfaW1hZ2VfdXJsOiAnaW1hZ2UuanBnJyxcbiAgICAgICAgc2x1ZzogJ2NhbXBhaWduJyxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDAuMDAwWicsXG4gICAgICAgIHByb2ZpbGVzOiBudWxsXG4gICAgICB9XVxuXG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUoY3JlYXRlTW9ja1F1ZXJ5KG1vY2tDYW1wYWlnbnMsIG51bGwpKVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRGZWF0dXJlZENhbXBhaWducygpXG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKVxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5wcm9maWxlcykudG9CZU51bGwoKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgbGltaXQgcmVzdWx0cyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQ2FtcGFpZ25zID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAgfSwgKF8sIGkpID0+ICh7XG4gICAgICAgIGlkOiBgY2FtcC0ke2l9YCxcbiAgICAgICAgdGl0bGU6IGBDYW1wYWlnbiAke2l9YCxcbiAgICAgICAgZGVzY3JpcHRpb246IGBEZXNjcmlwdGlvbiAke2l9YCxcbiAgICAgICAgZ29hbF9hbW91bnQ6IDEwMDAsXG4gICAgICAgIHRvdGFsX2Z1bmRpbmc6IDUwMCxcbiAgICAgICAgY29udHJpYnV0b3JfY291bnQ6IDEwLFxuICAgICAgICBpc19hY3RpdmU6IHRydWUsXG4gICAgICAgIGZlYXR1cmVkX2ltYWdlX3VybDogJ2ltYWdlLmpwZycsXG4gICAgICAgIHNsdWc6IGBjYW1wYWlnbi0ke2l9YCxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDAuMDAwWicsXG4gICAgICAgIHByb2ZpbGVzOiBbeyB1c2VybmFtZTogJ2NyZWF0b3InLCBkaXNwbGF5X25hbWU6ICdDcmVhdG9yJywgYXZhdGFyX3VybDogJ2F2YXRhci5qcGcnIH1dXG4gICAgICB9KSlcblxuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKGNyZWF0ZU1vY2tRdWVyeShtb2NrQ2FtcGFpZ25zLnNsaWNlKDAsIDMpLCBudWxsKSlcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0RmVhdHVyZWRDYW1wYWlnbnMoMylcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDMpXG4gICAgfSlcblxuICB9KVxuXG4gIGRlc2NyaWJlKCfwn5SlIFRyZW5kaW5nIENhbXBhaWducycsICgpID0+IHtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgZ2V0IHRyZW5kaW5nIGNhbXBhaWducyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQ2FtcGFpZ25zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICd0cmVuZC0xJyxcbiAgICAgICAgICB0aXRsZTogJ1RyZW5kaW5nIENhbXBhaWduIDEnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTW9zdCBwb3B1bGFyJyxcbiAgICAgICAgICBnb2FsX2Ftb3VudDogNTAwMCxcbiAgICAgICAgICB0b3RhbF9mdW5kaW5nOiAzMDAwLFxuICAgICAgICAgIGNvbnRyaWJ1dG9yX2NvdW50OiAxMDAsXG4gICAgICAgICAgaXNfYWN0aXZlOiB0cnVlLFxuICAgICAgICAgIGZlYXR1cmVkX2ltYWdlX3VybDogJ3RyZW5kMS5qcGcnLFxuICAgICAgICAgIHNsdWc6ICd0cmVuZGluZy0xJyxcbiAgICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMC4wMDBaJyxcbiAgICAgICAgICBwcm9maWxlczogW3sgdXNlcm5hbWU6ICd0cmVuZHkxJywgZGlzcGxheV9uYW1lOiAnVHJlbmR5IE9uZScsIGF2YXRhcl91cmw6ICd0cmVuZHkxLmpwZycgfV1cbiAgICAgICAgfVxuICAgICAgXVxuXG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUoY3JlYXRlTW9ja1F1ZXJ5KG1vY2tDYW1wYWlnbnMsIG51bGwpKVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRUcmVuZGluZ0NhbXBhaWducygzKVxuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMSlcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uZmVhdHVyZWRfdHlwZSkudG9CZSgndHJlbmRpbmcnKVxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5mZWF0dXJlZF9wcmlvcml0eSkudG9CZSgxKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHRyZW5kaW5nIGNhbXBhaWducyBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgIGVxOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgICBvcmRlcjogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgICAgICBsaW1pdDogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yJykpKVxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgfSkpXG4gICAgICAgIH0pKVxuICAgICAgfSlcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0VHJlbmRpbmdDYW1wYWlnbnMoKVxuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtdKVxuICAgIH0pXG5cbiAgfSlcblxuICBkZXNjcmliZSgn8J+RqOKAjfCfkrwgU3RhZmYgUGlja3MnLCAoKSA9PiB7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIGdldCBzdGFmZiBwaWNrcyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQ2FtcGFpZ25zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdzdGFmZi0xJyxcbiAgICAgICAgICB0aXRsZTogJ1N0YWZmIFBpY2sgMScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdRdWFsaXR5IGNhbXBhaWduIHdpdGggaW1hZ2UnLFxuICAgICAgICAgIGdvYWxfYW1vdW50OiAyMDAwLFxuICAgICAgICAgIHRvdGFsX2Z1bmRpbmc6IDgwMCxcbiAgICAgICAgICBjb250cmlidXRvcl9jb3VudDogMjUsXG4gICAgICAgICAgaXNfYWN0aXZlOiB0cnVlLFxuICAgICAgICAgIGZlYXR1cmVkX2ltYWdlX3VybDogJ3N0YWZmMS5qcGcnLFxuICAgICAgICAgIHNsdWc6ICdzdGFmZi1waWNrLTEnLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwLjAwMFonLFxuICAgICAgICAgIHByb2ZpbGVzOiBbeyB1c2VybmFtZTogJ3F1YWxpdHkxJywgZGlzcGxheV9uYW1lOiAnUXVhbGl0eSBPbmUnLCBhdmF0YXJfdXJsOiAncXVhbGl0eTEuanBnJyB9XVxuICAgICAgICB9XG4gICAgICBdXG5cbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZShjcmVhdGVNb2NrUXVlcnkobW9ja0NhbXBhaWducywgbnVsbCkpXG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFN0YWZmUGlja3MoMylcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDEpXG4gICAgICBleHBlY3QocmVzdWx0WzBdLmZlYXR1cmVkX3R5cGUpLnRvQmUoJ3N0YWZmX3BpY2snKVxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5mZWF0dXJlZF9wcmlvcml0eSkudG9CZSgxKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHN0YWZmIHBpY2tzIGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgZXE6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICAgIG5vdDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgICAgICBvcmRlcjogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgICAgICAgIGxpbWl0OiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3InKSkpXG4gICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgfSkpXG4gICAgICAgIH0pKVxuICAgICAgfSlcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0U3RhZmZQaWNrcygpXG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoW10pXG4gICAgfSlcblxuICB9KVxuXG4gIGRlc2NyaWJlKCfwn46vIE5lYXJseSBGdW5kZWQgQ2FtcGFpZ25zJywgKCkgPT4ge1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBnZXQgbmVhcmx5IGZ1bmRlZCBjYW1wYWlnbnMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NhbXBhaWducyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnbmVhcmx5LTEnLFxuICAgICAgICAgIHRpdGxlOiAnTmVhcmx5IEZ1bmRlZCAxJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJzkwJSBmdW5kZWQnLFxuICAgICAgICAgIGdvYWxfYW1vdW50OiAxMDAwLFxuICAgICAgICAgIHRvdGFsX2Z1bmRpbmc6IDkwMCwgLy8gOTAlIGZ1bmRlZFxuICAgICAgICAgIGNvbnRyaWJ1dG9yX2NvdW50OiA0NSxcbiAgICAgICAgICBpc19hY3RpdmU6IHRydWUsXG4gICAgICAgICAgZmVhdHVyZWRfaW1hZ2VfdXJsOiAnbmVhcmx5MS5qcGcnLFxuICAgICAgICAgIHNsdWc6ICduZWFybHktZnVuZGVkLTEnLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwLjAwMFonLFxuICAgICAgICAgIHByb2ZpbGVzOiBbeyB1c2VybmFtZTogJ2FsbW9zdDEnLCBkaXNwbGF5X25hbWU6ICdBbG1vc3QgT25lJywgYXZhdGFyX3VybDogJ2FsbW9zdDEuanBnJyB9XVxuICAgICAgICB9XG4gICAgICBdXG5cbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZShjcmVhdGVNb2NrUXVlcnkobW9ja0NhbXBhaWducywgbnVsbCkpXG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldE5lYXJseUZ1bmRlZENhbXBhaWducygzKVxuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMSkgLy8gU2hvdWxkIGluY2x1ZGUgOTAlIGZ1bmRlZCBjYW1wYWlnblxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5mZWF0dXJlZF90eXBlKS50b0JlKCduZWFybHlfZnVuZGVkJylcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGZpbHRlciBvdXQgY2FtcGFpZ25zIGJlbG93IDcwJSBmdW5kaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NhbXBhaWducyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnbm90LW5lYXJseScsXG4gICAgICAgICAgdGl0bGU6ICdOb3QgTmVhcmx5IEZ1bmRlZCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICc1MCUgZnVuZGVkJyxcbiAgICAgICAgICBnb2FsX2Ftb3VudDogMTAwMCxcbiAgICAgICAgICB0b3RhbF9mdW5kaW5nOiA1MDAsIC8vIDUwJSBmdW5kZWQgLSBzaG91bGQgYmUgZmlsdGVyZWQgb3V0XG4gICAgICAgICAgY29udHJpYnV0b3JfY291bnQ6IDIwLFxuICAgICAgICAgIGlzX2FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICBmZWF0dXJlZF9pbWFnZV91cmw6ICdub3QtbmVhcmx5LmpwZycsXG4gICAgICAgICAgc2x1ZzogJ25vdC1uZWFybHknLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAzVDAwOjAwOjAwLjAwMFonLFxuICAgICAgICAgIHByb2ZpbGVzOiBbeyB1c2VybmFtZTogJ25vdC1hbG1vc3QnLCBkaXNwbGF5X25hbWU6ICdOb3QgQWxtb3N0JywgYXZhdGFyX3VybDogJ25vdC1hbG1vc3QuanBnJyB9XVxuICAgICAgICB9XG4gICAgICBdXG5cbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgIGVxOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgICBub3Q6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICAgICAgb3JkZXI6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICAgICAgICBsaW1pdDogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBkYXRhOiBtb2NrQ2FtcGFpZ25zLCBlcnJvcjogbnVsbCB9KSlcbiAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICB9KSlcbiAgICAgICAgfSkpXG4gICAgICB9KVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXROZWFybHlGdW5kZWRDYW1wYWlnbnMoKVxuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtdKSAvLyBTaG91bGQgZmlsdGVyIG91dCA1MCUgZnVuZGVkXG4gICAgfSlcblxuICB9KVxuXG4gIGRlc2NyaWJlKCfwn4aVIE5ldyBhbmQgTm90ZXdvcnRoeScsICgpID0+IHtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgZ2V0IG5ldyBhbmQgbm90ZXdvcnRoeSBjYW1wYWlnbnMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NhbXBhaWducyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnbmV3LTEnLFxuICAgICAgICAgIHRpdGxlOiAnTmV3IENhbXBhaWduIDEnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUmVjZW50bHkgY3JlYXRlZCB3aXRoIHRyYWN0aW9uJyxcbiAgICAgICAgICBnb2FsX2Ftb3VudDogMTAwMCxcbiAgICAgICAgICB0b3RhbF9mdW5kaW5nOiAyMDAsXG4gICAgICAgICAgY29udHJpYnV0b3JfY291bnQ6IDE1LFxuICAgICAgICAgIGlzX2FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICBmZWF0dXJlZF9pbWFnZV91cmw6ICduZXcxLmpwZycsXG4gICAgICAgICAgc2x1ZzogJ25ldy0xJyxcbiAgICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0xMFQwMDowMDowMC4wMDBaJywgLy8gUmVjZW50XG4gICAgICAgICAgcHJvZmlsZXM6IFt7IHVzZXJuYW1lOiAnbmV3MScsIGRpc3BsYXlfbmFtZTogJ05ldyBPbmUnLCBhdmF0YXJfdXJsOiAnbmV3MS5qcGcnIH1dXG4gICAgICAgIH1cbiAgICAgIF1cblxuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKGNyZWF0ZU1vY2tRdWVyeShtb2NrQ2FtcGFpZ25zLCBudWxsKSlcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0TmV3QW5kTm90ZXdvcnRoeSgzKVxuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMSlcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uZmVhdHVyZWRfdHlwZSkudG9CZSgnbmV3X2FuZF9ub3Rld29ydGh5JylcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uZmVhdHVyZWRfcHJpb3JpdHkpLnRvQmUoMSlcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBuZXcgYW5kIG5vdGV3b3J0aHkgZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICBlcTogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgICAgZ3RlOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgICAgIG9yZGVyOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgICAgICAgbGltaXQ6IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvcicpKSlcbiAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICB9KSlcbiAgICAgICAgfSkpXG4gICAgICB9KVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXROZXdBbmROb3Rld29ydGh5KClcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbXSlcbiAgICB9KVxuXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+Kame+4jyBDYW1wYWlnbiBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBmZWF0dXJlIGEgY2FtcGFpZ24gc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gZmVhdHVyZUNhbXBhaWduIGN1cnJlbnRseSBqdXN0IHJldHVybnMgdHJ1ZSBhbmQgbG9ncyAobm8gZGF0YWJhc2UgaW50ZXJhY3Rpb24pXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmZWF0dXJlQ2FtcGFpZ24oJ2NhbXAtMScsICdzdGFmZl9waWNrJywgMSlcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGZlYXR1cmluZyBjYW1wYWlnbiBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIGZlYXR1cmVDYW1wYWlnbiBjdXJyZW50bHkganVzdCByZXR1cm5zIHRydWUgKG5vIGVycm9yIGhhbmRsaW5nIGltcGxlbWVudGVkIHlldClcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZlYXR1cmVDYW1wYWlnbignY2FtcC0xJywgJ3N0YWZmX3BpY2snKVxuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpIC8vIEN1cnJlbnQgaW1wbGVtZW50YXRpb24gYWx3YXlzIHJldHVybnMgdHJ1ZVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgdW5mZWF0dXJlIGEgY2FtcGFpZ24gc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gdW5mZWF0dXJlQ2FtcGFpZ24gY3VycmVudGx5IGp1c3QgcmV0dXJucyB0cnVlIGFuZCBsb2dzIChubyBkYXRhYmFzZSBpbnRlcmFjdGlvbilcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVuZmVhdHVyZUNhbXBhaWduKCdjYW1wLTEnKVxuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdW5mZWF0dXJpbmcgY2FtcGFpZ24gZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyB1bmZlYXR1cmVDYW1wYWlnbiBjdXJyZW50bHkganVzdCByZXR1cm5zIHRydWUgKG5vIGVycm9yIGhhbmRsaW5nIGltcGxlbWVudGVkIHlldClcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVuZmVhdHVyZUNhbXBhaWduKCdjYW1wLTEnKVxuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpIC8vIEN1cnJlbnQgaW1wbGVtZW50YXRpb24gYWx3YXlzIHJldHVybnMgdHJ1ZVxuICAgIH0pXG5cbiAgfSlcblxuICBkZXNjcmliZSgn8J+Pl++4jyBEYXRhIFRyYW5zZm9ybWF0aW9uJywgKCkgPT4ge1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCB0cmFuc2Zvcm0gcHJvZmlsZXMgYXJyYXkgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NhbXBhaWducyA9IFt7XG4gICAgICAgIGlkOiAnY2FtcC0xJyxcbiAgICAgICAgdGl0bGU6ICdUZXN0IENhbXBhaWduJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdUZXN0JyxcbiAgICAgICAgZ29hbF9hbW91bnQ6IDEwMDAsXG4gICAgICAgIHRvdGFsX2Z1bmRpbmc6IDUwMCxcbiAgICAgICAgY29udHJpYnV0b3JfY291bnQ6IDI1LFxuICAgICAgICBpc19hY3RpdmU6IHRydWUsXG4gICAgICAgIGZlYXR1cmVkX2ltYWdlX3VybDogJ2ltYWdlLmpwZycsXG4gICAgICAgIHNsdWc6ICd0ZXN0JyxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDAuMDAwWicsXG4gICAgICAgIHByb2ZpbGVzOiBbXG4gICAgICAgICAgeyB1c2VybmFtZTogJ2NyZWF0b3IxJywgZGlzcGxheV9uYW1lOiAnQ3JlYXRvciBPbmUnLCBhdmF0YXJfdXJsOiAnYXZhdGFyMS5qcGcnIH0sXG4gICAgICAgICAgeyB1c2VybmFtZTogJ2NyZWF0b3IyJywgZGlzcGxheV9uYW1lOiAnQ3JlYXRvciBUd28nLCBhdmF0YXJfdXJsOiAnYXZhdGFyMi5qcGcnIH1cbiAgICAgICAgXVxuICAgICAgfV1cblxuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKGNyZWF0ZU1vY2tRdWVyeShtb2NrQ2FtcGFpZ25zLCBudWxsKSlcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0RmVhdHVyZWRDYW1wYWlnbnMoKVxuXG4gICAgICBleHBlY3QocmVzdWx0WzBdLnByb2ZpbGVzKS50b0VxdWFsKG1vY2tDYW1wYWlnbnNbMF0ucHJvZmlsZXNbMF0pIC8vIFNob3VsZCB0YWtlIGZpcnN0IHByb2ZpbGVcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjYW1wYWlnbnMgd2l0aG91dCBnb2FscyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQ2FtcGFpZ25zID0gW3tcbiAgICAgICAgaWQ6ICdjYW1wLTEnLFxuICAgICAgICB0aXRsZTogJ05vIEdvYWwgQ2FtcGFpZ24nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0NhbXBhaWduIHdpdGhvdXQgZ29hbCcsXG4gICAgICAgIGdvYWxfYW1vdW50OiBudWxsLFxuICAgICAgICB0b3RhbF9mdW5kaW5nOiA1MDAsXG4gICAgICAgIGNvbnRyaWJ1dG9yX2NvdW50OiAyNSxcbiAgICAgICAgaXNfYWN0aXZlOiB0cnVlLFxuICAgICAgICBmZWF0dXJlZF9pbWFnZV91cmw6ICdpbWFnZS5qcGcnLFxuICAgICAgICBzbHVnOiAnbm8tZ29hbCcsXG4gICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwLjAwMFonLFxuICAgICAgICBwcm9maWxlczogW3sgdXNlcm5hbWU6ICdjcmVhdG9yJywgZGlzcGxheV9uYW1lOiAnQ3JlYXRvcicsIGF2YXRhcl91cmw6ICdhdmF0YXIuanBnJyB9XVxuICAgICAgfV1cblxuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKGNyZWF0ZU1vY2tRdWVyeShtb2NrQ2FtcGFpZ25zLCBudWxsKSlcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0RmVhdHVyZWRDYW1wYWlnbnMoKVxuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMSlcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uZmVhdHVyZWRfdHlwZSkudG9CZSgnc3RhZmZfcGljaycpIC8vIEZpcnN0IGNhbXBhaWduIGdldHMgc3RhZmZfcGljayAoaW5kZXggPCAyKVxuICAgIH0pXG5cbiAgfSlcblxuICBkZXNjcmliZSgn8J+nqiBFZGdlIENhc2VzJywgKCkgPT4ge1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgY2FtcGFpZ25zIHdpdGggemVybyB2YWx1ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQ2FtcGFpZ25zID0gW3tcbiAgICAgICAgaWQ6ICd6ZXJvLWNhbXAnLFxuICAgICAgICB0aXRsZTogJ1plcm8gQ2FtcGFpZ24nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1plcm8gdmFsdWVzJyxcbiAgICAgICAgZ29hbF9hbW91bnQ6IDAsXG4gICAgICAgIHRvdGFsX2Z1bmRpbmc6IDAsXG4gICAgICAgIGNvbnRyaWJ1dG9yX2NvdW50OiAwLFxuICAgICAgICBpc19hY3RpdmU6IHRydWUsXG4gICAgICAgIGZlYXR1cmVkX2ltYWdlX3VybDogJ3plcm8uanBnJyxcbiAgICAgICAgc2x1ZzogJ3plcm8nLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMC4wMDBaJyxcbiAgICAgICAgcHJvZmlsZXM6IFt7IHVzZXJuYW1lOiAnemVybycsIGRpc3BsYXlfbmFtZTogJ1plcm8nLCBhdmF0YXJfdXJsOiAnemVyby5qcGcnIH1dXG4gICAgICB9XVxuXG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUoY3JlYXRlTW9ja1F1ZXJ5KG1vY2tDYW1wYWlnbnMsIG51bGwpKVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRGZWF0dXJlZENhbXBhaWducygpXG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKVxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5mZWF0dXJlZF90eXBlKS50b0JlKCdzdGFmZl9waWNrJykgLy8gRmlyc3QgY2FtcGFpZ24gZ2V0cyBzdGFmZl9waWNrIChpbmRleCA8IDIpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdmVyeSBsYXJnZSBudW1iZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NhbXBhaWducyA9IFt7XG4gICAgICAgIGlkOiAnbGFyZ2UtY2FtcCcsXG4gICAgICAgIHRpdGxlOiAnTGFyZ2UgQ2FtcGFpZ24nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1ZlcnkgbGFyZ2UgbnVtYmVycycsXG4gICAgICAgIGdvYWxfYW1vdW50OiAxMDAwMDAwMDAwLFxuICAgICAgICB0b3RhbF9mdW5kaW5nOiA5OTk5OTk5OTksXG4gICAgICAgIGNvbnRyaWJ1dG9yX2NvdW50OiA5OTk5OTksXG4gICAgICAgIGlzX2FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgZmVhdHVyZWRfaW1hZ2VfdXJsOiAnbGFyZ2UuanBnJyxcbiAgICAgICAgc2x1ZzogJ2xhcmdlJyxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDAuMDAwWicsXG4gICAgICAgIHByb2ZpbGVzOiBbeyB1c2VybmFtZTogJ3doYWxlJywgZGlzcGxheV9uYW1lOiAnV2hhbGUnLCBhdmF0YXJfdXJsOiAnd2hhbGUuanBnJyB9XVxuICAgICAgfV1cblxuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKGNyZWF0ZU1vY2tRdWVyeShtb2NrQ2FtcGFpZ25zLCBudWxsKSlcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0RmVhdHVyZWRDYW1wYWlnbnMoKVxuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMSlcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uZmVhdHVyZWRfdHlwZSkudG9CZSgnbmVhcmx5X2Z1bmRlZCcpIC8vIFNob3VsZCBoYW5kbGUgbGFyZ2UgbnVtYmVyc1xuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGNvbmN1cnJlbnQgcmVxdWVzdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQ2FtcGFpZ25zID0gW3tcbiAgICAgICAgaWQ6ICdjb25jdXJyZW50JyxcbiAgICAgICAgdGl0bGU6ICdDb25jdXJyZW50JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdDb25jdXJyZW50IHRlc3QnLFxuICAgICAgICBnb2FsX2Ftb3VudDogMTAwMCxcbiAgICAgICAgdG90YWxfZnVuZGluZzogNTAwLFxuICAgICAgICBjb250cmlidXRvcl9jb3VudDogMjUsXG4gICAgICAgIGlzX2FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgZmVhdHVyZWRfaW1hZ2VfdXJsOiAnY29uY3VycmVudC5qcGcnLFxuICAgICAgICBzbHVnOiAnY29uY3VycmVudCcsXG4gICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwLjAwMFonLFxuICAgICAgICBwcm9maWxlczogW3sgdXNlcm5hbWU6ICdjb25jdXJyZW50JywgZGlzcGxheV9uYW1lOiAnQ29uY3VycmVudCcsIGF2YXRhcl91cmw6ICdjb25jdXJyZW50LmpwZycgfV1cbiAgICAgIH1dXG5cbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZShjcmVhdGVNb2NrUXVlcnkobW9ja0NhbXBhaWducywgbnVsbCkpXG5cbiAgICAgIC8vIE1ha2UgbXVsdGlwbGUgY29uY3VycmVudCByZXF1ZXN0c1xuICAgICAgY29uc3QgcHJvbWlzZXMgPSBbXG4gICAgICAgIGdldEZlYXR1cmVkQ2FtcGFpZ25zKCksXG4gICAgICAgIGdldFRyZW5kaW5nQ2FtcGFpZ25zKCksXG4gICAgICAgIGdldFN0YWZmUGlja3MoKSxcbiAgICAgICAgZ2V0TmVhcmx5RnVuZGVkQ2FtcGFpZ25zKCksXG4gICAgICAgIGdldE5ld0FuZE5vdGV3b3J0aHkoKVxuICAgICAgXVxuXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpXG5cbiAgICAgIHJlc3VsdHMuZm9yRWFjaChyZXN1bHQgPT4ge1xuICAgICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQpKS50b0JlKHRydWUpXG4gICAgICB9KVxuICAgIH0pXG5cbiAgfSlcblxuICBkZXNjcmliZSgn8J+aqCBFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXRlIGRhdGFiYXNlIGZhaWx1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbXBsZXRlIGRhdGFiYXNlIGZhaWx1cmUnKVxuICAgICAgfSlcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0RmVhdHVyZWRDYW1wYWlnbnMoKVxuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtdKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG51bGwgcmVzcG9uc2VzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICBlcTogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgICAgb3JkZXI6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICAgICAgbGltaXQ6IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgZGF0YTogbnVsbCwgZXJyb3I6IG51bGwgfSkpXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICB9KSlcbiAgICAgICAgfSkpXG4gICAgICB9KVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRGZWF0dXJlZENhbXBhaWducygpXG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoW10pXG4gICAgfSlcblxuICB9KVxuXG59KSAiXSwidmVyc2lvbiI6M30=
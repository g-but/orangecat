747342c0104caeb2306709a01d8bad6e
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
jest.mock('@/stores/auth', () => ({
    useAuthStore: () => mockAuthStore
}));
jest.mock('next/navigation', () => ({
    useRouter: jest.fn(() => ({
        push: mockPush
    })),
    usePathname: jest.fn(() => mockPathname)
}));
const react_1 = require("@testing-library/react");
const navigation_1 = require("next/navigation");
const useAuth_1 = require("../useAuth");
// Mock the auth store
const mockAuthStore = {
    user: null,
    session: null,
    profile: null,
    isLoading: false,
    hydrated: false,
    signOut: jest.fn()
};
// Mock Next.js navigation
const mockPush = jest.fn();
const mockPathname = '/';
describe('useAuth', () => {
    beforeEach(() => {
        jest.clearAllMocks();
        // Reset mock store to default state
        Object.assign(mockAuthStore, {
            user: null,
            session: null,
            profile: null,
            isLoading: false,
            hydrated: false,
            signOut: jest.fn()
        });
    });
    describe('useAuth - General Auth Hook', () => {
        it('should return consistent auth state when user and session exist', () => {
            mockAuthStore.user = { id: '123' };
            mockAuthStore.session = { access_token: 'token' };
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            const { result } = (0, react_1.renderHook)(() => (0, useAuth_1.useAuth)());
            expect(result.current.isAuthenticated).toBe(true);
            expect(result.current.isConsistent).toBe(true);
            expect(result.current.user).toEqual({ id: '123' });
            expect(result.current.session).toEqual({ access_token: 'token' });
        });
        it('should return unauthenticated when no user or session', () => {
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            const { result } = (0, react_1.renderHook)(() => (0, useAuth_1.useAuth)());
            expect(result.current.isAuthenticated).toBe(false);
            expect(result.current.isConsistent).toBe(true);
            expect(result.current.user).toBe(null);
            expect(result.current.session).toBe(null);
        });
        it('should detect inconsistent state when user exists but session does not', () => {
            mockAuthStore.user = { id: '123' };
            mockAuthStore.session = null;
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            const { result } = (0, react_1.renderHook)(() => (0, useAuth_1.useAuth)());
            expect(result.current.isAuthenticated).toBe(false);
            expect(result.current.isConsistent).toBe(false);
            expect(result.current.user).toEqual({ id: '123' });
            expect(result.current.session).toBe(null);
        });
        it('should detect inconsistent state when session exists but user does not', () => {
            mockAuthStore.user = null;
            mockAuthStore.session = { access_token: 'token' };
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            const { result } = (0, react_1.renderHook)(() => (0, useAuth_1.useAuth)());
            expect(result.current.isAuthenticated).toBe(false);
            expect(result.current.isConsistent).toBe(false);
            expect(result.current.user).toBe(null);
            expect(result.current.session).toEqual({ access_token: 'token' });
        });
        it('should provide fixInconsistentState function', async () => {
            mockAuthStore.user = { id: '123' };
            mockAuthStore.session = null;
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            // Mock window location
            Object.defineProperty(window, 'location', {
                value: { pathname: '/dashboard' },
                writable: true
            });
            const { result } = (0, react_1.renderHook)(() => (0, useAuth_1.useAuth)());
            expect(result.current.fixInconsistentState).toBeInstanceOf(Function);
            await (0, react_1.act)(async () => {
                await result.current.fixInconsistentState();
            });
            expect(mockAuthStore.signOut).toHaveBeenCalled();
            expect(mockPush).toHaveBeenCalledWith('/auth');
        });
        it('should not attempt fix when not hydrated', async () => {
            mockAuthStore.user = { id: '123' };
            mockAuthStore.session = null;
            mockAuthStore.hydrated = false;
            mockAuthStore.isLoading = false;
            const { result } = (0, react_1.renderHook)(() => (0, useAuth_1.useAuth)());
            await (0, react_1.act)(async () => {
                await result.current.fixInconsistentState();
            });
            expect(mockAuthStore.signOut).not.toHaveBeenCalled();
            expect(mockPush).not.toHaveBeenCalled();
        });
    });
    describe('useRequireAuth - Protected Routes Hook', () => {
        it('should redirect to auth when user is not authenticated', () => {
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            (0, react_1.renderHook)(() => (0, useAuth_1.useRequireAuth)());
            expect(mockPush).toHaveBeenCalledWith('/auth?from=protected');
        });
        it('should not redirect when user is authenticated', () => {
            mockAuthStore.user = { id: '123' };
            mockAuthStore.session = { access_token: 'token' };
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            const { result } = (0, react_1.renderHook)(() => (0, useAuth_1.useRequireAuth)());
            expect(mockPush).not.toHaveBeenCalled();
            expect(result.current.isAuthenticated).toBe(true);
            expect(result.current.isLoading).toBe(false);
        });
        it('should show loading when not hydrated', () => {
            mockAuthStore.hydrated = false;
            const { result } = (0, react_1.renderHook)(() => (0, useAuth_1.useRequireAuth)());
            expect(result.current.isLoading).toBe(true);
            expect(mockPush).not.toHaveBeenCalled();
        });
        it('should show loading when still loading', () => {
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = true;
            const { result } = (0, react_1.renderHook)(() => (0, useAuth_1.useRequireAuth)());
            expect(result.current.isLoading).toBe(true);
            expect(mockPush).not.toHaveBeenCalled();
        });
        it('should redirect when state is inconsistent', () => {
            mockAuthStore.user = { id: '123' };
            mockAuthStore.session = null;
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            (0, react_1.renderHook)(() => (0, useAuth_1.useRequireAuth)());
            expect(mockPush).toHaveBeenCalledWith('/auth?from=protected');
        });
        it('should return user and profile data when authenticated', () => {
            const mockUser = { id: '123', email: 'test@example.com' };
            const mockProfile = { id: '456', username: 'testuser' };
            mockAuthStore.user = mockUser;
            mockAuthStore.session = { access_token: 'token' };
            mockAuthStore.profile = mockProfile;
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            const { result } = (0, react_1.renderHook)(() => (0, useAuth_1.useRequireAuth)());
            expect(result.current.user).toEqual(mockUser);
            expect(result.current.profile).toEqual(mockProfile);
            expect(result.current.isAuthenticated).toBe(true);
        });
    });
    describe('useRedirectIfAuthenticated - Login/Register Pages Hook', () => {
        beforeEach(() => {
            ;
            navigation_1.usePathname.mockReturnValue('/auth');
        });
        it('should redirect to dashboard when user is authenticated', () => {
            mockAuthStore.user = { id: '123' };
            mockAuthStore.session = { access_token: 'token' };
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            (0, react_1.renderHook)(() => (0, useAuth_1.useRedirectIfAuthenticated)());
            expect(mockPush).toHaveBeenCalledWith('/dashboard');
        });
        it('should not redirect when user is not authenticated', () => {
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            const { result } = (0, react_1.renderHook)(() => (0, useAuth_1.useRedirectIfAuthenticated)());
            expect(mockPush).not.toHaveBeenCalled();
            expect(result.current.isAuthenticated).toBe(false);
        });
        it('should not redirect when on dashboard page', () => {
            ;
            navigation_1.usePathname.mockReturnValue('/dashboard');
            mockAuthStore.user = { id: '123' };
            mockAuthStore.session = { access_token: 'token' };
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            (0, react_1.renderHook)(() => (0, useAuth_1.useRedirectIfAuthenticated)());
            expect(mockPush).not.toHaveBeenCalled();
        });
        it('should not redirect when on home page', () => {
            ;
            navigation_1.usePathname.mockReturnValue('/');
            mockAuthStore.user = { id: '123' };
            mockAuthStore.session = { access_token: 'token' };
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            (0, react_1.renderHook)(() => (0, useAuth_1.useRedirectIfAuthenticated)());
            expect(mockPush).not.toHaveBeenCalled();
        });
        it('should show loading when not hydrated', () => {
            mockAuthStore.hydrated = false;
            const { result } = (0, react_1.renderHook)(() => (0, useAuth_1.useRedirectIfAuthenticated)());
            expect(result.current.isLoading).toBe(true);
            expect(mockPush).not.toHaveBeenCalled();
        });
        it('should show loading when auth is loading', () => {
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = true;
            const { result } = (0, react_1.renderHook)(() => (0, useAuth_1.useRedirectIfAuthenticated)());
            expect(result.current.isLoading).toBe(true);
            expect(mockPush).not.toHaveBeenCalled();
        });
        it('should not redirect when state is inconsistent', () => {
            mockAuthStore.user = { id: '123' };
            mockAuthStore.session = null;
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            (0, react_1.renderHook)(() => (0, useAuth_1.useRedirectIfAuthenticated)());
            expect(mockPush).not.toHaveBeenCalled();
        });
    });
    describe('Error Handling and Edge Cases', () => {
        it('should handle signOut errors gracefully', async () => {
            mockAuthStore.user = { id: '123' };
            mockAuthStore.session = null;
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            mockAuthStore.signOut.mockRejectedValue(new Error('Sign out failed'));
            // Mock console.error to verify error logging (logger uses console.error internally)
            const consoleSpy = jest.spyOn(console, 'error').mockImplementation();
            Object.defineProperty(window, 'location', {
                value: { pathname: '/dashboard' },
                writable: true
            });
            const { result } = (0, react_1.renderHook)(() => (0, useAuth_1.useAuth)());
            await (0, react_1.act)(async () => {
                await result.current.fixInconsistentState();
            });
            // Expect the new logger format
            expect(consoleSpy).toHaveBeenCalledWith(expect.stringContaining('ERROR [Auth] Error during auth state fix'), expect.objectContaining({ error: 'Sign out failed' }));
            consoleSpy.mockRestore();
        });
        it('should handle missing window object gracefully', async () => {
            mockAuthStore.user = { id: '123' };
            mockAuthStore.session = null;
            mockAuthStore.hydrated = true;
            mockAuthStore.isLoading = false;
            const { result } = (0, react_1.renderHook)(() => (0, useAuth_1.useAuth)());
            // Mock the window object to be undefined during the fix
            const originalWindow = global.window;
            Object.defineProperty(global, 'window', {
                value: undefined,
                configurable: true
            });
            await (0, react_1.act)(async () => {
                await result.current.fixInconsistentState();
            });
            expect(mockAuthStore.signOut).toHaveBeenCalled();
            expect(mockPush).not.toHaveBeenCalled(); // Should not redirect without window
            // Restore window
            Object.defineProperty(global, 'window', {
                value: originalWindow,
                configurable: true
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvZy9kZXYvb3JhbmdlY2F0L3NyYy9ob29rcy9fX3Rlc3RzX18vdXNlQXV0aC50ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBZUEsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNoQyxZQUFZLEVBQUUsR0FBRyxFQUFFLENBQUMsYUFBYTtDQUNsQyxDQUFDLENBQUMsQ0FBQTtBQU1ILElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNsQyxTQUFTLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQ3hCLElBQUksRUFBRSxRQUFRO0tBQ2YsQ0FBQyxDQUFDO0lBQ0gsV0FBVyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsWUFBWSxDQUFDO0NBQ3pDLENBQUMsQ0FBQyxDQUFBO0FBNUJILGtEQUF3RDtBQUV4RCxnREFBNkM7QUFDN0Msd0NBQWdGO0FBRWhGLHNCQUFzQjtBQUN0QixNQUFNLGFBQWEsR0FBRztJQUNwQixJQUFJLEVBQUUsSUFBVztJQUNqQixPQUFPLEVBQUUsSUFBVztJQUNwQixPQUFPLEVBQUUsSUFBVztJQUNwQixTQUFTLEVBQUUsS0FBSztJQUNoQixRQUFRLEVBQUUsS0FBSztJQUNmLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0NBQ25CLENBQUE7QUFNRCwwQkFBMEI7QUFDMUIsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFBO0FBQzFCLE1BQU0sWUFBWSxHQUFHLEdBQUcsQ0FBQTtBQVN4QixRQUFRLENBQUMsU0FBUyxFQUFFLEdBQUcsRUFBRTtJQUN2QixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFBO1FBQ3BCLG9DQUFvQztRQUNwQyxNQUFNLENBQUMsTUFBTSxDQUFDLGFBQWEsRUFBRTtZQUMzQixJQUFJLEVBQUUsSUFBSTtZ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RixNQUFNLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUE7WUFDaEQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFBLENBQUMscUNBQXFDO1lBRTdFLGlCQUFpQjtZQUNqQixNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUU7Z0JBQ3RDLEtBQUssRUFBRSxjQUFjO2dCQUNyQixZQUFZLEVBQUUsSUFBSTthQUNuQixDQUFDLENBQUE7UUFDSixDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvZy9kZXYvb3JhbmdlY2F0L3NyYy9ob29rcy9fX3Rlc3RzX18vdXNlQXV0aC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbmRlckhvb2ssIGFjdCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnXG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L25hdmlnYXRpb24nXG5pbXBvcnQgeyB1c2VQYXRobmFtZSB9IGZyb20gJ25leHQvbmF2aWdhdGlvbidcbmltcG9ydCB7IHVzZUF1dGgsIHVzZVJlcXVpcmVBdXRoLCB1c2VSZWRpcmVjdElmQXV0aGVudGljYXRlZCB9IGZyb20gJy4uL3VzZUF1dGgnXG5cbi8vIE1vY2sgdGhlIGF1dGggc3RvcmVcbmNvbnN0IG1vY2tBdXRoU3RvcmUgPSB7XG4gIHVzZXI6IG51bGwgYXMgYW55LFxuICBzZXNzaW9uOiBudWxsIGFzIGFueSxcbiAgcHJvZmlsZTogbnVsbCBhcyBhbnksXG4gIGlzTG9hZGluZzogZmFsc2UsXG4gIGh5ZHJhdGVkOiBmYWxzZSxcbiAgc2lnbk91dDogamVzdC5mbigpXG59XG5cbmplc3QubW9jaygnQC9zdG9yZXMvYXV0aCcsICgpID0+ICh7XG4gIHVzZUF1dGhTdG9yZTogKCkgPT4gbW9ja0F1dGhTdG9yZVxufSkpXG5cbi8vIE1vY2sgTmV4dC5qcyBuYXZpZ2F0aW9uXG5jb25zdCBtb2NrUHVzaCA9IGplc3QuZm4oKVxuY29uc3QgbW9ja1BhdGhuYW1lID0gJy8nXG5cbmplc3QubW9jaygnbmV4dC9uYXZpZ2F0aW9uJywgKCkgPT4gKHtcbiAgdXNlUm91dGVyOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgcHVzaDogbW9ja1B1c2hcbiAgfSkpLFxuICB1c2VQYXRobmFtZTogamVzdC5mbigoKSA9PiBtb2NrUGF0aG5hbWUpXG59KSlcblxuZGVzY3JpYmUoJ3VzZUF1dGgnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXG4gICAgLy8gUmVzZXQgbW9jayBzdG9yZSB0byBkZWZhdWx0IHN0YXRlXG4gICAgT2JqZWN0LmFzc2lnbihtb2NrQXV0aFN0b3JlLCB7XG4gICAgICB1c2VyOiBudWxsLFxuICAgICAgc2Vzc2lvbjogbnVsbCxcbiAgICAgIHByb2ZpbGU6IG51bGwsXG4gICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgaHlkcmF0ZWQ6IGZhbHNlLFxuICAgICAgc2lnbk91dDogamVzdC5mbigpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgndXNlQXV0aCAtIEdlbmVyYWwgQXV0aCBIb29rJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGNvbnNpc3RlbnQgYXV0aCBzdGF0ZSB3aGVuIHVzZXIgYW5kIHNlc3Npb24gZXhpc3QnLCAoKSA9PiB7XG4gICAgICBtb2NrQXV0aFN0b3JlLnVzZXIgPSB7IGlkOiAnMTIzJyB9XG4gICAgICBtb2NrQXV0aFN0b3JlLnNlc3Npb24gPSB7IGFjY2Vzc190b2tlbjogJ3Rva2VuJyB9XG4gICAgICBtb2NrQXV0aFN0b3JlLmh5ZHJhdGVkID0gdHJ1ZVxuICAgICAgbW9ja0F1dGhTdG9yZS5pc0xvYWRpbmcgPSBmYWxzZVxuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdXRoKCkpXG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0F1dGhlbnRpY2F0ZWQpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0NvbnNpc3RlbnQpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC51c2VyKS50b0VxdWFsKHsgaWQ6ICcxMjMnIH0pXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuc2Vzc2lvbikudG9FcXVhbCh7IGFjY2Vzc190b2tlbjogJ3Rva2VuJyB9KVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiB1bmF1dGhlbnRpY2F0ZWQgd2hlbiBubyB1c2VyIG9yIHNlc3Npb24nLCAoKSA9PiB7XG4gICAgICBtb2NrQXV0aFN0b3JlLmh5ZHJhdGVkID0gdHJ1ZVxuICAgICAgbW9ja0F1dGhTdG9yZS5pc0xvYWRpbmcgPSBmYWxzZVxuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdXRoKCkpXG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0F1dGhlbnRpY2F0ZWQpLnRvQmUoZmFsc2UpXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNDb25zaXN0ZW50KS50b0JlKHRydWUpXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudXNlcikudG9CZShudWxsKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnNlc3Npb24pLnRvQmUobnVsbClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgaW5jb25zaXN0ZW50IHN0YXRlIHdoZW4gdXNlciBleGlzdHMgYnV0IHNlc3Npb24gZG9lcyBub3QnLCAoKSA9PiB7XG4gICAgICBtb2NrQXV0aFN0b3JlLnVzZXIgPSB7IGlkOiAnMTIzJyB9XG4gICAgICBtb2NrQXV0aFN0b3JlLnNlc3Npb24gPSBudWxsXG4gICAgICBtb2NrQXV0aFN0b3JlLmh5ZHJhdGVkID0gdHJ1ZVxuICAgICAgbW9ja0F1dGhTdG9yZS5pc0xvYWRpbmcgPSBmYWxzZVxuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdXRoKCkpXG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0F1dGhlbnRpY2F0ZWQpLnRvQmUoZmFsc2UpXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNDb25zaXN0ZW50KS50b0JlKGZhbHNlKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnVzZXIpLnRvRXF1YWwoeyBpZDogJzEyMycgfSlcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zZXNzaW9uKS50b0JlKG51bGwpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IGluY29uc2lzdGVudCBzdGF0ZSB3aGVuIHNlc3Npb24gZXhpc3RzIGJ1dCB1c2VyIGRvZXMgbm90JywgKCkgPT4ge1xuICAgICAgbW9ja0F1dGhTdG9yZS51c2VyID0gbnVsbFxuICAgICAgbW9ja0F1dGhTdG9yZS5zZXNzaW9uID0geyBhY2Nlc3NfdG9rZW46ICd0b2tlbicgfVxuICAgICAgbW9ja0F1dGhTdG9yZS5oeWRyYXRlZCA9IHRydWVcbiAgICAgIG1vY2tBdXRoU3RvcmUuaXNMb2FkaW5nID0gZmFsc2VcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQXV0aCgpKVxuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNBdXRoZW50aWNhdGVkKS50b0JlKGZhbHNlKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzQ29uc2lzdGVudCkudG9CZShmYWxzZSlcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC51c2VyKS50b0JlKG51bGwpXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuc2Vzc2lvbikudG9FcXVhbCh7IGFjY2Vzc190b2tlbjogJ3Rva2VuJyB9KVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHByb3ZpZGUgZml4SW5jb25zaXN0ZW50U3RhdGUgZnVuY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQXV0aFN0b3JlLnVzZXIgPSB7IGlkOiAnMTIzJyB9XG4gICAgICBtb2NrQXV0aFN0b3JlLnNlc3Npb24gPSBudWxsXG4gICAgICBtb2NrQXV0aFN0b3JlLmh5ZHJhdGVkID0gdHJ1ZVxuICAgICAgbW9ja0F1dGhTdG9yZS5pc0xvYWRpbmcgPSBmYWxzZVxuXG4gICAgICAvLyBNb2NrIHdpbmRvdyBsb2NhdGlvblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2xvY2F0aW9uJywge1xuICAgICAgICB2YWx1ZTogeyBwYXRobmFtZTogJy9kYXNoYm9hcmQnIH0sXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICB9KVxuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdXRoKCkpXG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5maXhJbmNvbnNpc3RlbnRTdGF0ZSkudG9CZUluc3RhbmNlT2YoRnVuY3Rpb24pXG4gICAgICBcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LmZpeEluY29uc2lzdGVudFN0YXRlKClcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChtb2NrQXV0aFN0b3JlLnNpZ25PdXQpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgICAgZXhwZWN0KG1vY2tQdXNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2F1dGgnKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIG5vdCBhdHRlbXB0IGZpeCB3aGVuIG5vdCBoeWRyYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tBdXRoU3RvcmUudXNlciA9IHsgaWQ6ICcxMjMnIH1cbiAgICAgIG1vY2tBdXRoU3RvcmUuc2Vzc2lvbiA9IG51bGxcbiAgICAgIG1vY2tBdXRoU3RvcmUuaHlkcmF0ZWQgPSBmYWxzZVxuICAgICAgbW9ja0F1dGhTdG9yZS5pc0xvYWRpbmcgPSBmYWxzZVxuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdXRoKCkpXG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LmZpeEluY29uc2lzdGVudFN0YXRlKClcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChtb2NrQXV0aFN0b3JlLnNpZ25PdXQpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICAgIGV4cGVjdChtb2NrUHVzaCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ3VzZVJlcXVpcmVBdXRoIC0gUHJvdGVjdGVkIFJvdXRlcyBIb29rJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVkaXJlY3QgdG8gYXV0aCB3aGVuIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnLCAoKSA9PiB7XG4gICAgICBtb2NrQXV0aFN0b3JlLmh5ZHJhdGVkID0gdHJ1ZVxuICAgICAgbW9ja0F1dGhTdG9yZS5pc0xvYWRpbmcgPSBmYWxzZVxuXG4gICAgICByZW5kZXJIb29rKCgpID0+IHVzZVJlcXVpcmVBdXRoKCkpXG5cbiAgICAgIGV4cGVjdChtb2NrUHVzaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hdXRoP2Zyb209cHJvdGVjdGVkJylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBub3QgcmVkaXJlY3Qgd2hlbiB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQnLCAoKSA9PiB7XG4gICAgICBtb2NrQXV0aFN0b3JlLnVzZXIgPSB7IGlkOiAnMTIzJyB9XG4gICAgICBtb2NrQXV0aFN0b3JlLnNlc3Npb24gPSB7IGFjY2Vzc190b2tlbjogJ3Rva2VuJyB9XG4gICAgICBtb2NrQXV0aFN0b3JlLmh5ZHJhdGVkID0gdHJ1ZVxuICAgICAgbW9ja0F1dGhTdG9yZS5pc0xvYWRpbmcgPSBmYWxzZVxuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VSZXF1aXJlQXV0aCgpKVxuXG4gICAgICBleHBlY3QobW9ja1B1c2gpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0F1dGhlbnRpY2F0ZWQpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0xvYWRpbmcpLnRvQmUoZmFsc2UpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgc2hvdyBsb2FkaW5nIHdoZW4gbm90IGh5ZHJhdGVkJywgKCkgPT4ge1xuICAgICAgbW9ja0F1dGhTdG9yZS5oeWRyYXRlZCA9IGZhbHNlXG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVJlcXVpcmVBdXRoKCkpXG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0xvYWRpbmcpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChtb2NrUHVzaCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHNob3cgbG9hZGluZyB3aGVuIHN0aWxsIGxvYWRpbmcnLCAoKSA9PiB7XG4gICAgICBtb2NrQXV0aFN0b3JlLmh5ZHJhdGVkID0gdHJ1ZVxuICAgICAgbW9ja0F1dGhTdG9yZS5pc0xvYWRpbmcgPSB0cnVlXG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVJlcXVpcmVBdXRoKCkpXG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0xvYWRpbmcpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChtb2NrUHVzaCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHJlZGlyZWN0IHdoZW4gc3RhdGUgaXMgaW5jb25zaXN0ZW50JywgKCkgPT4ge1xuICAgICAgbW9ja0F1dGhTdG9yZS51c2VyID0geyBpZDogJzEyMycgfVxuICAgICAgbW9ja0F1dGhTdG9yZS5zZXNzaW9uID0gbnVsbFxuICAgICAgbW9ja0F1dGhTdG9yZS5oeWRyYXRlZCA9IHRydWVcbiAgICAgIG1vY2tBdXRoU3RvcmUuaXNMb2FkaW5nID0gZmFsc2VcblxuICAgICAgcmVuZGVySG9vaygoKSA9PiB1c2VSZXF1aXJlQXV0aCgpKVxuXG4gICAgICBleHBlY3QobW9ja1B1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXV0aD9mcm9tPXByb3RlY3RlZCcpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHVzZXIgYW5kIHByb2ZpbGUgZGF0YSB3aGVuIGF1dGhlbnRpY2F0ZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrVXNlciA9IHsgaWQ6ICcxMjMnLCBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nIH1cbiAgICAgIGNvbnN0IG1vY2tQcm9maWxlID0geyBpZDogJzQ1NicsIHVzZXJuYW1lOiAndGVzdHVzZXInIH1cbiAgICAgIFxuICAgICAgbW9ja0F1dGhTdG9yZS51c2VyID0gbW9ja1VzZXJcbiAgICAgIG1vY2tBdXRoU3RvcmUuc2Vzc2lvbiA9IHsgYWNjZXNzX3Rva2VuOiAndG9rZW4nIH1cbiAgICAgIG1vY2tBdXRoU3RvcmUucHJvZmlsZSA9IG1vY2tQcm9maWxlXG4gICAgICBtb2NrQXV0aFN0b3JlLmh5ZHJhdGVkID0gdHJ1ZVxuICAgICAgbW9ja0F1dGhTdG9yZS5pc0xvYWRpbmcgPSBmYWxzZVxuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VSZXF1aXJlQXV0aCgpKVxuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudXNlcikudG9FcXVhbChtb2NrVXNlcilcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5wcm9maWxlKS50b0VxdWFsKG1vY2tQcm9maWxlKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzQXV0aGVudGljYXRlZCkudG9CZSh0cnVlKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ3VzZVJlZGlyZWN0SWZBdXRoZW50aWNhdGVkIC0gTG9naW4vUmVnaXN0ZXIgUGFnZXMgSG9vaycsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIDsodXNlUGF0aG5hbWUgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoJy9hdXRoJylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCByZWRpcmVjdCB0byBkYXNoYm9hcmQgd2hlbiB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQnLCAoKSA9PiB7XG4gICAgICBtb2NrQXV0aFN0b3JlLnVzZXIgPSB7IGlkOiAnMTIzJyB9XG4gICAgICBtb2NrQXV0aFN0b3JlLnNlc3Npb24gPSB7IGFjY2Vzc190b2tlbjogJ3Rva2VuJyB9XG4gICAgICBtb2NrQXV0aFN0b3JlLmh5ZHJhdGVkID0gdHJ1ZVxuICAgICAgbW9ja0F1dGhTdG9yZS5pc0xvYWRpbmcgPSBmYWxzZVxuXG4gICAgICByZW5kZXJIb29rKCgpID0+IHVzZVJlZGlyZWN0SWZBdXRoZW50aWNhdGVkKCkpXG5cbiAgICAgIGV4cGVjdChtb2NrUHVzaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9kYXNoYm9hcmQnKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIG5vdCByZWRpcmVjdCB3aGVuIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnLCAoKSA9PiB7XG4gICAgICBtb2NrQXV0aFN0b3JlLmh5ZHJhdGVkID0gdHJ1ZVxuICAgICAgbW9ja0F1dGhTdG9yZS5pc0xvYWRpbmcgPSBmYWxzZVxuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VSZWRpcmVjdElmQXV0aGVudGljYXRlZCgpKVxuXG4gICAgICBleHBlY3QobW9ja1B1c2gpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0F1dGhlbnRpY2F0ZWQpLnRvQmUoZmFsc2UpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgbm90IHJlZGlyZWN0IHdoZW4gb24gZGFzaGJvYXJkIHBhZ2UnLCAoKSA9PiB7XG4gICAgICA7KHVzZVBhdGhuYW1lIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKCcvZGFzaGJvYXJkJylcbiAgICAgIFxuICAgICAgbW9ja0F1dGhTdG9yZS51c2VyID0geyBpZDogJzEyMycgfVxuICAgICAgbW9ja0F1dGhTdG9yZS5zZXNzaW9uID0geyBhY2Nlc3NfdG9rZW46ICd0b2tlbicgfVxuICAgICAgbW9ja0F1dGhTdG9yZS5oeWRyYXRlZCA9IHRydWVcbiAgICAgIG1vY2tBdXRoU3RvcmUuaXNMb2FkaW5nID0gZmFsc2VcblxuICAgICAgcmVuZGVySG9vaygoKSA9PiB1c2VSZWRpcmVjdElmQXV0aGVudGljYXRlZCgpKVxuXG4gICAgICBleHBlY3QobW9ja1B1c2gpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBub3QgcmVkaXJlY3Qgd2hlbiBvbiBob21lIHBhZ2UnLCAoKSA9PiB7XG4gICAgICA7KHVzZVBhdGhuYW1lIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKCcvJylcbiAgICAgIFxuICAgICAgbW9ja0F1dGhTdG9yZS51c2VyID0geyBpZDogJzEyMycgfVxuICAgICAgbW9ja0F1dGhTdG9yZS5zZXNzaW9uID0geyBhY2Nlc3NfdG9rZW46ICd0b2tlbicgfVxuICAgICAgbW9ja0F1dGhTdG9yZS5oeWRyYXRlZCA9IHRydWVcbiAgICAgIG1vY2tBdXRoU3RvcmUuaXNMb2FkaW5nID0gZmFsc2VcblxuICAgICAgcmVuZGVySG9vaygoKSA9PiB1c2VSZWRpcmVjdElmQXV0aGVudGljYXRlZCgpKVxuXG4gICAgICBleHBlY3QobW9ja1B1c2gpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBzaG93IGxvYWRpbmcgd2hlbiBub3QgaHlkcmF0ZWQnLCAoKSA9PiB7XG4gICAgICBtb2NrQXV0aFN0b3JlLmh5ZHJhdGVkID0gZmFsc2VcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlUmVkaXJlY3RJZkF1dGhlbnRpY2F0ZWQoKSlcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzTG9hZGluZykudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KG1vY2tQdXNoKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgc2hvdyBsb2FkaW5nIHdoZW4gYXV0aCBpcyBsb2FkaW5nJywgKCkgPT4ge1xuICAgICAgbW9ja0F1dGhTdG9yZS5oeWRyYXRlZCA9IHRydWVcbiAgICAgIG1vY2tBdXRoU3RvcmUuaXNMb2FkaW5nID0gdHJ1ZVxuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VSZWRpcmVjdElmQXV0aGVudGljYXRlZCgpKVxuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNMb2FkaW5nKS50b0JlKHRydWUpXG4gICAgICBleHBlY3QobW9ja1B1c2gpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBub3QgcmVkaXJlY3Qgd2hlbiBzdGF0ZSBpcyBpbmNvbnNpc3RlbnQnLCAoKSA9PiB7XG4gICAgICBtb2NrQXV0aFN0b3JlLnVzZXIgPSB7IGlkOiAnMTIzJyB9XG4gICAgICBtb2NrQXV0aFN0b3JlLnNlc3Npb24gPSBudWxsXG4gICAgICBtb2NrQXV0aFN0b3JlLmh5ZHJhdGVkID0gdHJ1ZVxuICAgICAgbW9ja0F1dGhTdG9yZS5pc0xvYWRpbmcgPSBmYWxzZVxuXG4gICAgICByZW5kZXJIb29rKCgpID0+IHVzZVJlZGlyZWN0SWZBdXRoZW50aWNhdGVkKCkpXG5cbiAgICAgIGV4cGVjdChtb2NrUHVzaCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nIGFuZCBFZGdlIENhc2VzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNpZ25PdXQgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQXV0aFN0b3JlLnVzZXIgPSB7IGlkOiAnMTIzJyB9XG4gICAgICBtb2NrQXV0aFN0b3JlLnNlc3Npb24gPSBudWxsXG4gICAgICBtb2NrQXV0aFN0b3JlLmh5ZHJhdGVkID0gdHJ1ZVxuICAgICAgbW9ja0F1dGhTdG9yZS5pc0xvYWRpbmcgPSBmYWxzZVxuICAgICAgbW9ja0F1dGhTdG9yZS5zaWduT3V0Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignU2lnbiBvdXQgZmFpbGVkJykpXG5cbiAgICAgIC8vIE1vY2sgY29uc29sZS5lcnJvciB0byB2ZXJpZnkgZXJyb3IgbG9nZ2luZyAobG9nZ2VyIHVzZXMgY29uc29sZS5lcnJvciBpbnRlcm5hbGx5KVxuICAgICAgY29uc3QgY29uc29sZVNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKClcblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2xvY2F0aW9uJywge1xuICAgICAgICB2YWx1ZTogeyBwYXRobmFtZTogJy9kYXNoYm9hcmQnIH0sXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICB9KVxuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdXRoKCkpXG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LmZpeEluY29uc2lzdGVudFN0YXRlKClcbiAgICAgIH0pXG5cbiAgICAgIC8vIEV4cGVjdCB0aGUgbmV3IGxvZ2dlciBmb3JtYXRcbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ0VSUk9SIFtBdXRoXSBFcnJvciBkdXJpbmcgYXV0aCBzdGF0ZSBmaXgnKSxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyBlcnJvcjogJ1NpZ24gb3V0IGZhaWxlZCcgfSlcbiAgICAgIClcbiAgICAgIFxuICAgICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1pc3Npbmcgd2luZG93IG9iamVjdCBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0F1dGhTdG9yZS51c2VyID0geyBpZDogJzEyMycgfVxuICAgICAgbW9ja0F1dGhTdG9yZS5zZXNzaW9uID0gbnVsbFxuICAgICAgbW9ja0F1dGhTdG9yZS5oeWRyYXRlZCA9IHRydWVcbiAgICAgIG1vY2tBdXRoU3RvcmUuaXNMb2FkaW5nID0gZmFsc2VcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQXV0aCgpKVxuXG4gICAgICAvLyBNb2NrIHRoZSB3aW5kb3cgb2JqZWN0IHRvIGJlIHVuZGVmaW5lZCBkdXJpbmcgdGhlIGZpeFxuICAgICAgY29uc3Qgb3JpZ2luYWxXaW5kb3cgPSBnbG9iYWwud2luZG93XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCAnd2luZG93Jywge1xuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LmZpeEluY29uc2lzdGVudFN0YXRlKClcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChtb2NrQXV0aFN0b3JlLnNpZ25PdXQpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgICAgZXhwZWN0KG1vY2tQdXNoKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpIC8vIFNob3VsZCBub3QgcmVkaXJlY3Qgd2l0aG91dCB3aW5kb3dcblxuICAgICAgLy8gUmVzdG9yZSB3aW5kb3dcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWwsICd3aW5kb3cnLCB7XG4gICAgICAgIHZhbHVlOiBvcmlnaW5hbFdpbmRvdyxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG59KSAiXSwidmVyc2lvbiI6M30=
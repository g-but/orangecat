2d63a8262a078df82216649179317d4d
"use strict";
/**
 * ðŸš€ ASSOCIATION SYSTEM - QUICK VERIFICATION TESTS
 *
 * Simple tests to verify the association system deployment works correctly
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
// Mock the supabase client inline within jest.mock factory to avoid hoisting issues
jest.mock('../core/client', () => {
    const mockSupabase = {
        from: jest.fn().mockReturnThis(),
        select: jest.fn().mockReturnThis(),
        insert: jest.fn().mockReturnThis(),
        eq: jest.fn().mockReturnThis(),
        order: jest.fn().mockReturnThis(),
        single: jest.fn(),
        auth: {
            getUser: jest.fn()
        }
    };
    return { supabase: mockSupabase };
});
jest.mock('@/utils/logger', () => ({
    logger: {
        info: jest.fn(),
        error: jest.fn()
    }
}));
const associations_1 = __importDefault(require("../associations"));
// Obtain the mocked supabase instance for use in tests
// eslint-disable-next-line @typescript-eslint/no-var-requires
const { supabase: mockSupabase } = require('../core/client');
describe('ðŸŽ¯ Association System - Deployment Verification', () => {
    beforeEach(() => {
        jest.clearAllMocks();
        mockSupabase.auth.getUser.mockResolvedValue({
            data: { user: { id: 'test-user-id' } },
            error: null
        });
    });
    test('âœ… Association service is properly instantiated', () => {
        expect(associations_1.default).toBeDefined();
        expect(typeof associations_1.default.createAssociation).toBe('function');
        expect(typeof associations_1.default.getProfileAssociations).toBe('function');
    });
    test('âœ… Database schema deployment successful', async () => {
        const mockAssociation = {
            id: 'test-id',
            source_profile_id: 'test-user-id',
            target_entity_id: 'test-campaign-id',
            target_entity_type: 'campaign',
            relationship_type: 'created',
            status: 'active',
            reward_percentage: 0,
            permissions: {},
            metadata: {},
            visibility: 'public',
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString(),
            version: 1
        };
        mockSupabase.single.mockResolvedValue({
            data: mockAssociation,
            error: null
        });
        const result = await associations_1.default.createAssociation({
            target_entity_id: 'test-campaign-id',
            target_entity_type: 'campaign',
            relationship_type: 'created'
        });
        expect(result).toBeDefined();
        expect(mockSupabase.from).toHaveBeenCalledWith('profile_associations');
    });
    test('âœ… Bitcoin integration ready', async () => {
        const bitcoinAssociation = {
            id: 'bitcoin-test-id',
            source_profile_id: 'test-user-id',
            target_entity_id: 'test-campaign-id',
            target_entity_type: 'campaign',
            relationship_type: 'supports',
            bitcoin_reward_address: 'bc1qexample123',
            reward_percentage: 2.5,
            status: 'active',
            permissions: {},
            metadata: {},
            visibility: 'public',
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString(),
            version: 1
        };
        mockSupabase.single.mockResolvedValue({
            data: bitcoinAssociation,
            error: null
        });
        const result = await associations_1.default.createAssociation({
            target_entity_id: 'test-campaign-id',
            target_entity_type: 'campaign',
            relationship_type: 'supports',
            bitcoin_reward_address: 'bc1qexample123',
            reward_percentage: 2.5
        });
        expect(result.bitcoin_reward_address).toBe('bc1qexample123');
        expect(result.reward_percentage).toBe(2.5);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvZy9kZXYvb3JhbmdlY2F0L3NyYy9zZXJ2aWNlcy9zdXBhYmFzZS9fX3Rlc3RzX18vYXNzb2NpYXRpb25zLnF1aWNrLWZpeC50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7OztHQUlHOzs7OztBQUlILG9GQUFvRjtBQUNwRixJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsRUFBRTtJQUMvQixNQUFNLFlBQVksR0FBRztRQUNuQixJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtRQUNoQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtRQUNsQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtRQUNsQyxFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtRQUM5QixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtRQUNqQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNqQixJQUFJLEVBQUU7WUFDSixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtTQUNuQjtLQUNGLENBQUE7SUFDRCxPQUFPLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBRSxDQUFBO0FBQ25DLENBQUMsQ0FBQyxDQUFBO0FBTUYsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ2pDLE1BQU0sRUFBRTtRQUNOLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2YsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7S0FDakI7Q0FDRixDQUFDLENBQUMsQ0FBQTtBQTNCSCxtRUFBZ0Q7QUFrQmhELHVEQUF1RDtBQUN2RCw4REFBOEQ7QUFDOUQsTUFBTSxFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FB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QUFJO1NBQ1osQ0FBQyxDQUFBO1FBRUYsTUFBTSxNQUFNLEdBQUcsTUFBTSxzQkFBa0IsQ0FBQyxpQkFBaUIsQ0FBQztZQUN4RCxnQkFBZ0IsRUFBRSxrQkFBa0I7WUFDcEMsa0JBQWtCLEVBQUUsVUFBVTtZQUM5QixpQkFBaUIsRUFBRSxVQUFVO1lBQzdCLHNCQUFzQixFQUFFLGdCQUFnQjtZQUN4QyxpQkFBaUIsRUFBRSxHQUFHO1NBQ3ZCLENBQUMsQ0FBQTtRQUVGLE1BQU0sQ0FBQyxNQUFNLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQTtRQUM1RCxNQUFNLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQzVDLENBQUMsQ0FBQyxDQUFBO0FBRUosQ0FBQyxDQUFDLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvZy9kZXYvb3JhbmdlY2F0L3NyYy9zZXJ2aWNlcy9zdXBhYmFzZS9fX3Rlc3RzX18vYXNzb2NpYXRpb25zLnF1aWNrLWZpeC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog8J+agCBBU1NPQ0lBVElPTiBTWVNURU0gLSBRVUlDSyBWRVJJRklDQVRJT04gVEVTVFNcbiAqIFxuICogU2ltcGxlIHRlc3RzIHRvIHZlcmlmeSB0aGUgYXNzb2NpYXRpb24gc3lzdGVtIGRlcGxveW1lbnQgd29ya3MgY29ycmVjdGx5XG4gKi9cblxuaW1wb3J0IEFzc29jaWF0aW9uU2VydmljZSBmcm9tICcuLi9hc3NvY2lhdGlvbnMnXG5cbi8vIE1vY2sgdGhlIHN1cGFiYXNlIGNsaWVudCBpbmxpbmUgd2l0aGluIGplc3QubW9jayBmYWN0b3J5IHRvIGF2b2lkIGhvaXN0aW5nIGlzc3Vlc1xuamVzdC5tb2NrKCcuLi9jb3JlL2NsaWVudCcsICgpID0+IHtcbiAgY29uc3QgbW9ja1N1cGFiYXNlID0ge1xuICAgIGZyb206IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgaW5zZXJ0OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgb3JkZXI6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIHNpbmdsZTogamVzdC5mbigpLFxuICAgIGF1dGg6IHtcbiAgICAgIGdldFVzZXI6IGplc3QuZm4oKVxuICAgIH1cbiAgfVxuICByZXR1cm4geyBzdXBhYmFzZTogbW9ja1N1cGFiYXNlIH1cbn0pXG5cbi8vIE9idGFpbiB0aGUgbW9ja2VkIHN1cGFiYXNlIGluc3RhbmNlIGZvciB1c2UgaW4gdGVzdHNcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdmFyLXJlcXVpcmVzXG5jb25zdCB7IHN1cGFiYXNlOiBtb2NrU3VwYWJhc2UgfSA9IHJlcXVpcmUoJy4uL2NvcmUvY2xpZW50JylcblxuamVzdC5tb2NrKCdAL3V0aWxzL2xvZ2dlcicsICgpID0+ICh7XG4gIGxvZ2dlcjoge1xuICAgIGluZm86IGplc3QuZm4oKSxcbiAgICBlcnJvcjogamVzdC5mbigpXG4gIH1cbn0pKVxuXG5kZXNjcmliZSgn8J+OryBBc3NvY2lhdGlvbiBTeXN0ZW0gLSBEZXBsb3ltZW50IFZlcmlmaWNhdGlvbicsICgpID0+IHtcbiAgXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXG4gICAgXG4gICAgbW9ja1N1cGFiYXNlLmF1dGguZ2V0VXNlci5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBkYXRhOiB7IHVzZXI6IHsgaWQ6ICd0ZXN0LXVzZXItaWQnIH0gfSxcbiAgICAgIGVycm9yOiBudWxsXG4gICAgfSlcbiAgfSlcblxuICB0ZXN0KCfinIUgQXNzb2NpYXRpb24gc2VydmljZSBpcyBwcm9wZXJseSBpbnN0YW50aWF0ZWQnLCAoKSA9PiB7XG4gICAgZXhwZWN0KEFzc29jaWF0aW9uU2VydmljZSkudG9CZURlZmluZWQoKVxuICAgIGV4cGVjdCh0eXBlb2YgQXNzb2NpYXRpb25TZXJ2aWNlLmNyZWF0ZUFzc29jaWF0aW9uKS50b0JlKCdmdW5jdGlvbicpXG4gICAgZXhwZWN0KHR5cGVvZiBBc3NvY2lhdGlvblNlcnZpY2UuZ2V0UHJvZmlsZUFzc29jaWF0aW9ucykudG9CZSgnZnVuY3Rpb24nKVxuICB9KVxuXG4gIHRlc3QoJ+KchSBEYXRhYmFzZSBzY2hlbWEgZGVwbG95bWVudCBzdWNjZXNzZnVsJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tBc3NvY2lhdGlvbiA9IHtcbiAgICAgIGlkOiAndGVzdC1pZCcsXG4gICAgICBzb3VyY2VfcHJvZmlsZV9pZDogJ3Rlc3QtdXNlci1pZCcsXG4gICAgICB0YXJnZXRfZW50aXR5X2lkOiAndGVzdC1jYW1wYWlnbi1pZCcsXG4gICAgICB0YXJnZXRfZW50aXR5X3R5cGU6ICdjYW1wYWlnbicsXG4gICAgICByZWxhdGlvbnNoaXBfdHlwZTogJ2NyZWF0ZWQnLFxuICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcbiAgICAgIHJld2FyZF9wZXJjZW50YWdlOiAwLFxuICAgICAgcGVybWlzc2lvbnM6IHt9LFxuICAgICAgbWV0YWRhdGE6IHt9LFxuICAgICAgdmlzaWJpbGl0eTogJ3B1YmxpYycsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB2ZXJzaW9uOiAxXG4gICAgfVxuXG4gICAgbW9ja1N1cGFiYXNlLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBkYXRhOiBtb2NrQXNzb2NpYXRpb24sXG4gICAgICBlcnJvcjogbnVsbFxuICAgIH0pXG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBc3NvY2lhdGlvblNlcnZpY2UuY3JlYXRlQXNzb2NpYXRpb24oe1xuICAgICAgdGFyZ2V0X2VudGl0eV9pZDogJ3Rlc3QtY2FtcGFpZ24taWQnLFxuICAgICAgdGFyZ2V0X2VudGl0eV90eXBlOiAnY2FtcGFpZ24nLFxuICAgICAgcmVsYXRpb25zaGlwX3R5cGU6ICdjcmVhdGVkJ1xuICAgIH0pXG5cbiAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpXG4gICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5mcm9tKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgncHJvZmlsZV9hc3NvY2lhdGlvbnMnKVxuICB9KVxuXG4gIHRlc3QoJ+KchSBCaXRjb2luIGludGVncmF0aW9uIHJlYWR5JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGJpdGNvaW5Bc3NvY2lhdGlvbiA9IHtcbiAgICAgIGlkOiAnYml0Y29pbi10ZXN0LWlkJyxcbiAgICAgIHNvdXJjZV9wcm9maWxlX2lkOiAndGVzdC11c2VyLWlkJyxcbiAgICAgIHRhcmdldF9lbnRpdHlfaWQ6ICd0ZXN0LWNhbXBhaWduLWlkJyxcbiAgICAgIHRhcmdldF9lbnRpdHlfdHlwZTogJ2NhbXBhaWduJyxcbiAgICAgIHJlbGF0aW9uc2hpcF90eXBlOiAnc3VwcG9ydHMnLFxuICAgICAgYml0Y29pbl9yZXdhcmRfYWRkcmVzczogJ2JjMXFleGFtcGxlMTIzJyxcbiAgICAgIHJld2FyZF9wZXJjZW50YWdlOiAyLjUsXG4gICAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgICAgcGVybWlzc2lvbnM6IHt9LFxuICAgICAgbWV0YWRhdGE6IHt9LFxuICAgICAgdmlzaWJpbGl0eTogJ3B1YmxpYycsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB2ZXJzaW9uOiAxXG4gICAgfVxuXG4gICAgbW9ja1N1cGFiYXNlLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBkYXRhOiBiaXRjb2luQXNzb2NpYXRpb24sXG4gICAgICBlcnJvcjogbnVsbFxuICAgIH0pXG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBc3NvY2lhdGlvblNlcnZpY2UuY3JlYXRlQXNzb2NpYXRpb24oe1xuICAgICAgdGFyZ2V0X2VudGl0eV9pZDogJ3Rlc3QtY2FtcGFpZ24taWQnLFxuICAgICAgdGFyZ2V0X2VudGl0eV90eXBlOiAnY2FtcGFpZ24nLFxuICAgICAgcmVsYXRpb25zaGlwX3R5cGU6ICdzdXBwb3J0cycsXG4gICAgICBiaXRjb2luX3Jld2FyZF9hZGRyZXNzOiAnYmMxcWV4YW1wbGUxMjMnLFxuICAgICAgcmV3YXJkX3BlcmNlbnRhZ2U6IDIuNVxuICAgIH0pXG5cbiAgICBleHBlY3QocmVzdWx0LmJpdGNvaW5fcmV3YXJkX2FkZHJlc3MpLnRvQmUoJ2JjMXFleGFtcGxlMTIzJylcbiAgICBleHBlY3QocmVzdWx0LnJld2FyZF9wZXJjZW50YWdlKS50b0JlKDIuNSlcbiAgfSlcblxufSkgIl0sInZlcnNpb24iOjN9
38d9c1d12a1e92f78cea958d20dd51de
"use strict";
/**
 * COMPREHENSIVE CAMPAIGN STORE INTEGRATION TESTS
 *
 * ðŸŽ¯ CRITICAL FOR FUNDRAISING PLATFORM SECURITY:
 * - Campaign data integrity and state management
 * - Local storage + database synchronization
 * - Campaign lifecycle (draft â†’ published â†’ paused â†’ resumed)
 * - Data validation and error handling
 * - Race condition prevention
 *
 * This covers the MAIN BUSINESS LOGIC of the platform that handles user's
 * campaign data and fundraising operations.
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock Supabase client with comprehensive chaining support
jest.mock('@supabase/ssr', () => ({
    createBrowserClient: jest.fn(() => {
        const mockOperation = {
            from: jest.fn(),
            select: jest.fn(),
            eq: jest.fn(),
            order: jest.fn(),
            insert: jest.fn(),
            update: jest.fn(),
            delete: jest.fn(),
            single: jest.fn()
        };
        // Make each method return the mock object to support chaining
        Object.keys(mockOperation).forEach(key => {
            mockOperation[key].mockReturnValue(mockOperation);
        });
        return mockOperation;
    })
}));
const react_1 = require("@testing-library/react");
// Mock environment variables
process.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';
process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-anon-key';
// Create separate mock for test manipulation
const mockSupabaseOperations = {
    from: jest.fn(),
    select: jest.fn(),
    eq: jest.fn(),
    order: jest.fn(),
    insert: jest.fn(),
    update: jest.fn(),
    delete: jest.fn(),
    single: jest.fn()
};
// Make each method return the mock object to support chaining
Object.keys(mockSupabaseOperations).forEach(key => {
    mockSupabaseOperations[key].mockReturnValue(mockSupabaseOperations);
});
// Mock localStorage
const localStorageMock = {
    getItem: jest.fn(),
    setItem: jest.fn(),
    removeItem: jest.fn(),
    clear: jest.fn()
};
Object.defineProperty(window, 'localStorage', {
    value: localStorageMock
});
const campaignStore_1 = require("../campaignStore");
describe('ðŸ—ï¸ Campaign Store - COMPREHENSIVE INTEGRATION TESTS', () => {
    const mockUserId = 'user-123';
    const mockCampaignId = 'campaign-456';
    const mockFormData = {
        title: 'Bitcoin Education Initiative',
        description: 'Teaching Bitcoin to the world',
        bitcoin_address: 'bc1qw508d6qejxtdg4y5r3zarvary0c5xw7kv8f3t4',
        lightning_address: 'education@lightning.network',
        website_url: 'https://bitcoineducation.org',
        goal_amount: 2000000, // 2 million sats
        categories: ['education', 'technology'],
        images: []
    };
    const mockDatabaseCampaign = {
        id: mockCampaignId,
        user_id: mockUserId,
        title: 'Bitcoin Education Initiative',
        description: 'Teaching Bitcoin to the world',
        bitcoin_address: 'bc1qw508d6qejxtdg4y5r3zarvary0c5xw7kv8f3t4',
        lightning_address: 'education@lightning.network',
        website_url: 'https://bitcoineducation.org',
        goal_amount: 2000000,
        total_funding: 150000,
        contributor_count: 15,
        is_active: true,
        is_public: true,
        category: 'education',
        tags: ['technology'],
        currency: 'BTC',
        created_at: '2024-01-01T00:00:00.000Z',
        updated_at: '2024-01-01T00:00:00.000Z',
        // Campaign interface requirements
        isDraft: false,
        isActive: true,
        isPaused: false,
        lastModified: '2024-01-01T00:00:00.000Z',
        syncStatus: 'synced',
        source: 'database'
    };
    beforeEach(() => {
        // Reset all mocks
        jest.clearAllMocks();
        localStorageMock.getItem.mockReturnValue(null);
        // Reset the mock operation chain - each operation returns the mock for chaining
        Object.keys(mockSupabaseOperations).forEach(key => {
            mockSupabaseOperations[key].mockClear();
            mockSupabaseOperations[key].mockReturnValue(mockSupabaseOperations);
        });
        // Set default successful responses
        mockSupabaseOperations.order.mockResolvedValue({ data: [], error: null });
        mockSupabaseOperations.single.mockResolvedValue({ data: mockDatabaseCampaign, error: null });
        mockSupabaseOperations.insert.mockResolvedValue({ data: mockDatabaseCampaign, error: null });
        mockSupabaseOperations.update.mockResolvedValue({ data: mockDatabaseCampaign, error: null });
        mockSupabaseOperations.delete.mockResolvedValue({ data: null, error: null });
    });
    describe('ðŸ”„ loadCampaigns - Database Integration', () => {
        test('should load campaigns from database successfully', async () => {
            // Mock successful database response
            mockSupabaseOperations.order.mockResolvedValueOnce({
                data: [mockDatabaseCampaign],
                error: null
            });
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            await (0, react_1.act)(async () => {
                await result.current.loadCampaigns(mockUserId);
            });
            expect(result.current.campaigns).toHaveLength(1);
            expect(result.current.campaigns[0]).toMatchObject(Object.assign(Object.assign({}, mockDatabaseCampaign), { source: 'database', isDraft: false, isActive: true, isPaused: false }));
            expect(result.current.isLoading).toBe(false);
            expect(result.current.error).toBeNull();
        });
        test('should handle database errors gracefully', async () => {
            // Mock database error
            mockSupabaseOperations.order.mockResolvedValueOnce({
                data: null,
                error: { message: 'Database connection failed' }
            });
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            await (0, react_1.act)(async () => {
                await result.current.loadCampaigns(mockUserId);
            });
            expect(result.current.campaigns).toEqual([]);
            expect(result.current.error).toBe('Error loading campaigns: Database connection failed');
            expect(result.current.isLoading).toBe(false);
        });
        test('should merge local drafts with database campaigns', async () => {
            // Mock local storage with a draft
            const localDraft = {
                formData: mockFormData,
                currentStep: 2,
                lastSaved: new Date().toISOString(),
                draftId: 'local-draft-789'
            };
            localStorageMock.getItem.mockReturnValue(JSON.stringify(localDraft));
            // Mock database campaigns
            mockSupabaseOperations.order.mockResolvedValueOnce({
                data: [mockDatabaseCampaign],
                error: null
            });
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            await (0, react_1.act)(async () => {
                await result.current.loadCampaigns(mockUserId);
            });
            expect(result.current.campaigns).toHaveLength(2); // 1 from DB + 1 local draft
            // Check local draft is included
            const localCampaignExists = result.current.campaigns.some(c => c.id === `local-${mockUserId}` && c.source === 'local');
            expect(localCampaignExists).toBe(true);
        });
        test('should handle invalid user ID', async () => {
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            await (0, react_1.act)(async () => {
                await result.current.loadCampaigns('');
            });
            expect(result.current.error).toBe('Error loading campaigns: User ID is required');
        });
    });
    describe('ðŸ’¾ saveDraft - Local Storage Integration', () => {
        test('should save draft to localStorage successfully', async () => {
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            let draftId = '';
            await (0, react_1.act)(async () => {
                draftId = await result.current.saveDraft(mockUserId, mockFormData, 2);
            });
            expect(draftId).toBeTruthy();
            expect(localStorageMock.setItem).toHaveBeenCalledWith(`funding-draft-${mockUserId}`, expect.stringContaining('"title":"Bitcoin Education Initiative"'));
            expect(result.current.currentDraft).toEqual(mockFormData);
            expect(result.current.currentDraftId).toBe(draftId);
        });
        test('should update existing draft', async () => {
            var _a;
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            // Save initial draft
            await (0, react_1.act)(async () => {
                await result.current.saveDraft(mockUserId, mockFormData, 1);
            });
            // Update the draft
            const updatedFormData = Object.assign(Object.assign({}, mockFormData), { title: 'Updated Title' });
            await (0, react_1.act)(async () => {
                await result.current.saveDraft(mockUserId, updatedFormData, 3);
            });
            expect((_a = result.current.currentDraft) === null || _a === void 0 ? void 0 : _a.title).toBe('Updated Title');
            expect(localStorageMock.setItem).toHaveBeenCalledTimes(2);
        });
        test('should handle localStorage errors', async () => {
            // Mock localStorage error
            localStorageMock.setItem.mockImplementation(() => {
                throw new Error('Storage quota exceeded');
            });
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            await (0, react_1.act)(async () => {
                await result.current.saveDraft(mockUserId, mockFormData);
            });
            expect(result.current.error).toBe('Error saving draft: Storage quota exceeded');
        });
    });
    describe('ðŸš€ publishCampaign - Database Publish Integration', () => {
        test('should publish campaign to database successfully', async () => {
            // Mock successful database insert
            mockSupabaseOperations.single.mockResolvedValueOnce({
                data: Object.assign(Object.assign({}, mockDatabaseCampaign), { id: 'new-campaign-id' }),
                error: null
            });
            // Set up current draft
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            await (0, react_1.act)(async () => {
                await result.current.saveDraft(mockUserId, mockFormData);
            });
            await (0, react_1.act)(async () => {
                await result.current.publishCampaign(mockUserId, result.current.currentDraftId);
            });
            expect(mockSupabaseOperations.insert).toHaveBeenCalled();
            expect(result.current.currentDraft).toBeNull();
            expect(result.current.currentDraftId).toBeNull();
            expect(localStorageMock.removeItem).toHaveBeenCalledWith(`funding-draft-${mockUserId}`);
        });
        test('should update existing campaign when publishing', async () => {
            // Mock successful database update
            mockSupabaseOperations.single.mockResolvedValueOnce({
                data: mockDatabaseCampaign,
                error: null
            });
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            // Set up existing campaign for editing
            (0, react_1.act)(() => {
                result.current.campaigns = [Object.assign(Object.assign({}, mockDatabaseCampaign), { source: 'database', isDraft: true, isActive: false, isPaused: false })];
            });
            await (0, react_1.act)(async () => {
                await result.current.publishCampaign(mockUserId, mockCampaignId);
            });
            expect(mockSupabaseOperations.update).toHaveBeenCalled();
        });
        test('should handle publish errors', async () => {
            // Mock database error
            mockSupabaseOperations.single.mockResolvedValueOnce({
                data: null,
                error: { message: 'Validation failed' }
            });
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            await (0, react_1.act)(async () => {
                await result.current.saveDraft(mockUserId, mockFormData);
            });
            await (0, react_1.act)(async () => {
                await result.current.publishCampaign(mockUserId, result.current.currentDraftId);
            });
            expect(result.current.error).toBe('Error publishing campaign: Validation failed');
        });
    });
    describe('â¸ï¸ Campaign Lifecycle Management', () => {
        test('should pause campaign successfully', async () => {
            // Mock successful database update
            mockSupabaseOperations.single.mockResolvedValueOnce({
                data: Object.assign(Object.assign({}, mockDatabaseCampaign), { is_active: false }),
                error: null
            });
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            // Set up active campaign
            (0, react_1.act)(() => {
                result.current.campaigns = [Object.assign(Object.assign({}, mockDatabaseCampaign), { source: 'database', isDraft: false, isActive: true, isPaused: false })];
            });
            await (0, react_1.act)(async () => {
                await result.current.pauseCampaign(mockUserId, mockCampaignId);
            });
            expect(mockSupabaseOperations.update).toHaveBeenCalled();
            // Check campaign was updated in store
            const updatedCampaign = result.current.campaigns.find(c => c.id === mockCampaignId);
            expect(updatedCampaign === null || updatedCampaign === void 0 ? void 0 : updatedCampaign.isActive).toBe(false);
            expect(updatedCampaign === null || updatedCampaign === void 0 ? void 0 : updatedCampaign.isPaused).toBe(true);
        });
        test('should resume campaign successfully', async () => {
            // Mock successful database update
            mockSupabaseOperations.single.mockResolvedValueOnce({
                data: Object.assign(Object.assign({}, mockDatabaseCampaign), { is_active: true }),
                error: null
            });
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            // Set up paused campaign
            (0, react_1.act)(() => {
                result.current.campaigns = [Object.assign(Object.assign({}, mockDatabaseCampaign), { source: 'database', isDraft: false, isActive: false, isPaused: true })];
            });
            await (0, react_1.act)(async () => {
                await result.current.resumeCampaign(mockUserId, mockCampaignId);
            });
            expect(mockSupabaseOperations.update).toHaveBeenCalled();
            // Check campaign was updated in store
            const updatedCampaign = result.current.campaigns.find(c => c.id === mockCampaignId);
            expect(updatedCampaign === null || updatedCampaign === void 0 ? void 0 : updatedCampaign.isActive).toBe(true);
            expect(updatedCampaign === null || updatedCampaign === void 0 ? void 0 : updatedCampaign.isPaused).toBe(false);
        });
        test('should delete campaign successfully', async () => {
            // Mock successful database delete
            mockSupabaseOperations.delete.mockResolvedValueOnce({
                data: null,
                error: null
            });
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            // Set up campaign
            (0, react_1.act)(() => {
                result.current.campaigns = [Object.assign(Object.assign({}, mockDatabaseCampaign), { source: 'database', isDraft: false, isActive: true, isPaused: false })];
            });
            await (0, react_1.act)(async () => {
                await result.current.deleteCampaign(mockCampaignId);
            });
            expect(mockSupabaseOperations.delete).toHaveBeenCalled();
            // Check campaign was removed from store
            const deletedCampaign = result.current.campaigns.find(c => c.id === mockCampaignId);
            expect(deletedCampaign).toBeUndefined();
        });
    });
    describe('âœï¸ updateCampaign - Edit Integration', () => {
        test('should update campaign successfully', async () => {
            // Mock successful database update
            const updatedData = Object.assign(Object.assign({}, mockDatabaseCampaign), { title: 'Updated Campaign Title' });
            mockSupabaseOperations.single.mockResolvedValueOnce({
                data: updatedData,
                error: null
            });
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            // Set up existing campaign
            (0, react_1.act)(() => {
                result.current.campaigns = [Object.assign(Object.assign({}, mockDatabaseCampaign), { source: 'database', isDraft: false, isActive: true, isPaused: false })];
            });
            const updateFormData = Object.assign(Object.assign({}, mockFormData), { title: 'Updated Campaign Title' });
            await (0, react_1.act)(async () => {
                await result.current.updateCampaign(mockUserId, mockCampaignId, updateFormData);
            });
            expect(mockSupabaseOperations.update).toHaveBeenCalled();
            // Check campaign was updated in store
            const updatedCampaign = result.current.campaigns.find(c => c.id === mockCampaignId);
            expect(updatedCampaign === null || updatedCampaign === void 0 ? void 0 : updatedCampaign.title).toBe('Updated Campaign Title');
        });
    });
    describe('ðŸ”„ syncAll - Full Synchronization', () => {
        test('should sync all campaigns successfully', async () => {
            // Mock database response
            mockSupabaseOperations.order.mockResolvedValueOnce({
                data: [mockDatabaseCampaign],
                error: null
            });
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            await (0, react_1.act)(async () => {
                await result.current.syncAll(mockUserId);
            });
            expect(result.current.isSyncing).toBe(false);
            expect(result.current.lastSync).toBeTruthy();
            expect(result.current.campaigns).toHaveLength(1);
        });
    });
    describe('ðŸ›¡ï¸ Error Handling & Edge Cases', () => {
        test('should handle network errors during operations', async () => {
            // Mock network error
            mockSupabaseOperations.order.mockRejectedValueOnce(new Error('Network error'));
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            await (0, react_1.act)(async () => {
                await result.current.loadCampaigns(mockUserId);
            });
            expect(result.current.error).toBe('Error loading campaigns: Network error');
        });
        test('should handle concurrent operations correctly', async () => {
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            // Start multiple operations concurrently
            const promises = [
                result.current.saveDraft(mockUserId, mockFormData),
                result.current.loadCampaigns(mockUserId),
                result.current.saveDraft(mockUserId, Object.assign(Object.assign({}, mockFormData), { title: 'Updated' }))
            ];
            await (0, react_1.act)(async () => {
                await Promise.allSettled(promises);
            });
            // Should not crash and should have consistent state
            expect(result.current).toBeDefined();
        });
        test('should validate campaign data before operations', async () => {
            var _a;
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            // Try to save invalid data
            const invalidFormData = Object.assign(Object.assign({}, mockFormData), { title: '' });
            await (0, react_1.act)(async () => {
                await result.current.saveDraft(mockUserId, invalidFormData);
            });
            // Should still save but might have validation warnings
            expect((_a = result.current.currentDraft) === null || _a === void 0 ? void 0 : _a.title).toBe('');
        });
    });
    describe('ðŸ’° Real-world Campaign Scenarios', () => {
        test('should handle high-value Bitcoin campaigns', async () => {
            var _a;
            const highValueCampaign = Object.assign(Object.assign({}, mockFormData), { goal_amount: 21000000000, title: 'Major Bitcoin Infrastructure Project' });
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            await (0, react_1.act)(async () => {
                await result.current.saveDraft(mockUserId, highValueCampaign);
            });
            expect((_a = result.current.currentDraft) === null || _a === void 0 ? void 0 : _a.goal_amount).toBe(21000000000);
        });
        test('should handle campaigns with special characters', async () => {
            var _a;
            const specialCharCampaign = Object.assign(Object.assign({}, mockFormData), { title: 'CafÃ© â‚¿itcoin & Lightning âš¡ Workshop 2024! ðŸš€', description: 'Teaching Bitcoin with Ã©mojis & spÃ©ciÃ¡l characters' });
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            await (0, react_1.act)(async () => {
                await result.current.saveDraft(mockUserId, specialCharCampaign);
            });
            expect((_a = result.current.currentDraft) === null || _a === void 0 ? void 0 : _a.title).toBe('CafÃ© â‚¿itcoin & Lightning âš¡ Workshop 2024! ðŸš€');
        });
        test('should handle multiple simultaneous campaigns', async () => {
            const campaigns = [
                Object.assign(Object.assign({}, mockDatabaseCampaign), { id: 'camp-1', title: 'Campaign 1' }),
                Object.assign(Object.assign({}, mockDatabaseCampaign), { id: 'camp-2', title: 'Campaign 2' }),
                Object.assign(Object.assign({}, mockDatabaseCampaign), { id: 'camp-3', title: 'Campaign 3' })
            ];
            mockSupabaseOperations.order.mockResolvedValueOnce({
                data: campaigns,
                error: null
            });
            const { result } = (0, react_1.renderHook)(() => (0, campaignStore_1.useCampaignStore)());
            await (0, react_1.act)(async () => {
                await result.current.loadCampaigns(mockUserId);
            });
            expect(result.current.campaigns).toHaveLength(3);
            const stats = result.current.getStats();
            expect(stats.totalCampaigns).toBe(3);
            expect(stats.totalActive).toBe(3); // All are active by default
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvZy9kZXYvb3JhbmdlY2F0L3NyYy9zdG9yZXMvX190ZXN0c19fL2NhbXBhaWduU3RvcmUuY29tcHJlaGVuc2l2ZS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7O0dBWUc7O0FBUUgsMkRBQTJEO0FBQzNELElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDaEMsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUU7UUFDaEMsTUFBTSxhQUFhLEdBQUc7WUFDcEIsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDZixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNqQixFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNiLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2hCLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1NBQ2xCLENBQUM7UUFFRiw4REFBOEQ7UUFDOUQsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDdkMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUNwRCxDQUFDLENBQUMsQ0FBQztRQUVILE9BQU8sYUFBYSxDQUFDO0lBQ3ZCLENBQUMsQ0FBQztDQUNILENBQUMsQ0FBQyxDQUFBO0FBM0JILGtEQUFpRTtBQUVqRSw2QkFBNkI7QUFDN0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsR0FBRywwQkFBMEIsQ0FBQTtBQUNqRSxPQUFPLENBQUMsR0FBRyxDQUFDLDZCQUE2QixHQUFHLGVBQWUsQ0FBQTtBQXlCM0Qs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R0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFBO1lBQ3ZDLE1BQU0sQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBQ3BDLE1BQU0sQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsNEJBQTRCO1FBQ2hFLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUMsQ0FBQSIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9nL2Rldi9vcmFuZ2VjYXQvc3JjL3N0b3Jlcy9fX3Rlc3RzX18vY2FtcGFpZ25TdG9yZS5jb21wcmVoZW5zaXZlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDT01QUkVIRU5TSVZFIENBTVBBSUdOIFNUT1JFIElOVEVHUkFUSU9OIFRFU1RTXG4gKiBcbiAqIPCfjq8gQ1JJVElDQUwgRk9SIEZVTkRSQUlTSU5HIFBMQVRGT1JNIFNFQ1VSSVRZOlxuICogLSBDYW1wYWlnbiBkYXRhIGludGVncml0eSBhbmQgc3RhdGUgbWFuYWdlbWVudCBcbiAqIC0gTG9jYWwgc3RvcmFnZSArIGRhdGFiYXNlIHN5bmNocm9uaXphdGlvblxuICogLSBDYW1wYWlnbiBsaWZlY3ljbGUgKGRyYWZ0IOKGkiBwdWJsaXNoZWQg4oaSIHBhdXNlZCDihpIgcmVzdW1lZClcbiAqIC0gRGF0YSB2YWxpZGF0aW9uIGFuZCBlcnJvciBoYW5kbGluZ1xuICogLSBSYWNlIGNvbmRpdGlvbiBwcmV2ZW50aW9uXG4gKiBcbiAqIFRoaXMgY292ZXJzIHRoZSBNQUlOIEJVU0lORVNTIExPR0lDIG9mIHRoZSBwbGF0Zm9ybSB0aGF0IGhhbmRsZXMgdXNlcidzXG4gKiBjYW1wYWlnbiBkYXRhIGFuZCBmdW5kcmFpc2luZyBvcGVyYXRpb25zLlxuICovXG5cbmltcG9ydCB7IGFjdCwgcmVuZGVySG9vaywgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnXG5cbi8vIE1vY2sgZW52aXJvbm1lbnQgdmFyaWFibGVzXG5wcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgPSAnaHR0cHM6Ly90ZXN0LnN1cGFiYXNlLmNvJ1xucHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgPSAndGVzdC1hbm9uLWtleSdcblxuLy8gTW9jayBTdXBhYmFzZSBjbGllbnQgd2l0aCBjb21wcmVoZW5zaXZlIGNoYWluaW5nIHN1cHBvcnRcbmplc3QubW9jaygnQHN1cGFiYXNlL3NzcicsICgpID0+ICh7XG4gIGNyZWF0ZUJyb3dzZXJDbGllbnQ6IGplc3QuZm4oKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tPcGVyYXRpb24gPSB7XG4gICAgICBmcm9tOiBqZXN0LmZuKCksXG4gICAgICBzZWxlY3Q6IGplc3QuZm4oKSxcbiAgICAgIGVxOiBqZXN0LmZuKCksXG4gICAgICBvcmRlcjogamVzdC5mbigpLFxuICAgICAgaW5zZXJ0OiBqZXN0LmZuKCksXG4gICAgICB1cGRhdGU6IGplc3QuZm4oKSxcbiAgICAgIGRlbGV0ZTogamVzdC5mbigpLFxuICAgICAgc2luZ2xlOiBqZXN0LmZuKClcbiAgICB9O1xuXG4gICAgLy8gTWFrZSBlYWNoIG1ldGhvZCByZXR1cm4gdGhlIG1vY2sgb2JqZWN0IHRvIHN1cHBvcnQgY2hhaW5pbmdcbiAgICBPYmplY3Qua2V5cyhtb2NrT3BlcmF0aW9uKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBtb2NrT3BlcmF0aW9uW2tleV0ubW9ja1JldHVyblZhbHVlKG1vY2tPcGVyYXRpb24pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG1vY2tPcGVyYXRpb247XG4gIH0pXG59KSlcblxuLy8gQ3JlYXRlIHNlcGFyYXRlIG1vY2sgZm9yIHRlc3QgbWFuaXB1bGF0aW9uXG5jb25zdCBtb2NrU3VwYWJhc2VPcGVyYXRpb25zID0ge1xuICBmcm9tOiBqZXN0LmZuKCksXG4gIHNlbGVjdDogamVzdC5mbigpLFxuICBlcTogamVzdC5mbigpLFxuICBvcmRlcjogamVzdC5mbigpLFxuICBpbnNlcnQ6IGplc3QuZm4oKSxcbiAgdXBkYXRlOiBqZXN0LmZuKCksXG4gIGRlbGV0ZTogamVzdC5mbigpLFxuICBzaW5nbGU6IGplc3QuZm4oKVxufTtcblxuLy8gTWFrZSBlYWNoIG1ldGhvZCByZXR1cm4gdGhlIG1vY2sgb2JqZWN0IHRvIHN1cHBvcnQgY2hhaW5pbmdcbk9iamVjdC5rZXlzKG1vY2tTdXBhYmFzZU9wZXJhdGlvbnMpLmZvckVhY2goa2V5ID0+IHtcbiAgbW9ja1N1cGFiYXNlT3BlcmF0aW9uc1trZXldLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2VPcGVyYXRpb25zKTtcbn0pO1xuXG4vLyBNb2NrIGxvY2FsU3RvcmFnZVxuY29uc3QgbG9jYWxTdG9yYWdlTW9jayA9IHtcbiAgZ2V0SXRlbTogamVzdC5mbigpLFxuICBzZXRJdGVtOiBqZXN0LmZuKCksXG4gIHJlbW92ZUl0ZW06IGplc3QuZm4oKSxcbiAgY2xlYXI6IGplc3QuZm4oKVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnbG9jYWxTdG9yYWdlJywge1xuICB2YWx1ZTogbG9jYWxTdG9yYWdlTW9ja1xufSlcblxuaW1wb3J0IHsgdXNlQ2FtcGFpZ25TdG9yZSwgQ2FtcGFpZ25Gb3JtRGF0YSwgQ2FtcGFpZ24gfSBmcm9tICcuLi9jYW1wYWlnblN0b3JlJ1xuXG5kZXNjcmliZSgn8J+Pl++4jyBDYW1wYWlnbiBTdG9yZSAtIENPTVBSRUhFTlNJVkUgSU5URUdSQVRJT04gVEVTVFMnLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tVc2VySWQgPSAndXNlci0xMjMnXG4gIGNvbnN0IG1vY2tDYW1wYWlnbklkID0gJ2NhbXBhaWduLTQ1NidcblxuICBjb25zdCBtb2NrRm9ybURhdGE6IENhbXBhaWduRm9ybURhdGEgPSB7XG4gICAgdGl0bGU6ICdCaXRjb2luIEVkdWNhdGlvbiBJbml0aWF0aXZlJyxcbiAgICBkZXNjcmlwdGlvbjogJ1RlYWNoaW5nIEJpdGNvaW4gdG8gdGhlIHdvcmxkJyxcbiAgICBiaXRjb2luX2FkZHJlc3M6ICdiYzFxdzUwOGQ2cWVqeHRkZzR5NXIzemFydmFyeTBjNXh3N2t2OGYzdDQnLFxuICAgIGxpZ2h0bmluZ19hZGRyZXNzOiAnZWR1Y2F0aW9uQGxpZ2h0bmluZy5uZXR3b3JrJyxcbiAgICB3ZWJzaXRlX3VybDogJ2h0dHBzOi8vYml0Y29pbmVkdWNhdGlvbi5vcmcnLFxuICAgIGdvYWxfYW1vdW50OiAyMDAwMDAwLCAvLyAyIG1pbGxpb24gc2F0c1xuICAgIGNhdGVnb3JpZXM6IFsnZWR1Y2F0aW9uJywgJ3RlY2hub2xvZ3knXSxcbiAgICBpbWFnZXM6IFtdXG4gIH1cblxuICBjb25zdCBtb2NrRGF0YWJhc2VDYW1wYWlnbiA9IHtcbiAgICBpZDogbW9ja0NhbXBhaWduSWQsXG4gICAgdXNlcl9pZDogbW9ja1VzZXJJZCxcbiAgICB0aXRsZTogJ0JpdGNvaW4gRWR1Y2F0aW9uIEluaXRpYXRpdmUnLFxuICAgIGRlc2NyaXB0aW9uOiAnVGVhY2hpbmcgQml0Y29pbiB0byB0aGUgd29ybGQnLFxuICAgIGJpdGNvaW5fYWRkcmVzczogJ2JjMXF3NTA4ZDZxZWp4dGRnNHk1cjN6YXJ2YXJ5MGM1eHc3a3Y4ZjN0NCcsXG4gICAgbGlnaHRuaW5nX2FkZHJlc3M6ICdlZHVjYXRpb25AbGlnaHRuaW5nLm5ldHdvcmsnLFxuICAgIHdlYnNpdGVfdXJsOiAnaHR0cHM6Ly9iaXRjb2luZWR1Y2F0aW9uLm9yZycsXG4gICAgZ29hbF9hbW91bnQ6IDIwMDAwMDAsXG4gICAgdG90YWxfZnVuZGluZzogMTUwMDAwLFxuICAgIGNvbnRyaWJ1dG9yX2NvdW50OiAxNSxcbiAgICBpc19hY3RpdmU6IHRydWUsXG4gICAgaXNfcHVibGljOiB0cnVlLFxuICAgIGNhdGVnb3J5OiAnZWR1Y2F0aW9uJyxcbiAgICB0YWdzOiBbJ3RlY2hub2xvZ3knXSxcbiAgICBjdXJyZW5jeTogJ0JUQycsXG4gICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDAuMDAwWicsXG4gICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDAuMDAwWicsXG4gICAgLy8gQ2FtcGFpZ24gaW50ZXJmYWNlIHJlcXVpcmVtZW50c1xuICAgIGlzRHJhZnQ6IGZhbHNlLFxuICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgIGlzUGF1c2VkOiBmYWxzZSxcbiAgICBsYXN0TW9kaWZpZWQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwLjAwMFonLFxuICAgIHN5bmNTdGF0dXM6ICdzeW5jZWQnIGFzIGNvbnN0LFxuICAgIHNvdXJjZTogJ2RhdGFiYXNlJ1xuICB9XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gUmVzZXQgYWxsIG1vY2tzXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKClcbiAgICBsb2NhbFN0b3JhZ2VNb2NrLmdldEl0ZW0ubW9ja1JldHVyblZhbHVlKG51bGwpXG4gICAgXG4gICAgLy8gUmVzZXQgdGhlIG1vY2sgb3BlcmF0aW9uIGNoYWluIC0gZWFjaCBvcGVyYXRpb24gcmV0dXJucyB0aGUgbW9jayBmb3IgY2hhaW5pbmdcbiAgICBPYmplY3Qua2V5cyhtb2NrU3VwYWJhc2VPcGVyYXRpb25zKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2VPcGVyYXRpb25zW2tleV0ubW9ja0NsZWFyKCk7XG4gICAgICBtb2NrU3VwYWJhc2VPcGVyYXRpb25zW2tleV0ubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZU9wZXJhdGlvbnMpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFNldCBkZWZhdWx0IHN1Y2Nlc3NmdWwgcmVzcG9uc2VzXG4gICAgbW9ja1N1cGFiYXNlT3BlcmF0aW9ucy5vcmRlci5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IFtdLCBlcnJvcjogbnVsbCB9KTtcbiAgICBtb2NrU3VwYWJhc2VPcGVyYXRpb25zLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG1vY2tEYXRhYmFzZUNhbXBhaWduLCBlcnJvcjogbnVsbCB9KTtcbiAgICBtb2NrU3VwYWJhc2VPcGVyYXRpb25zLmluc2VydC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG1vY2tEYXRhYmFzZUNhbXBhaWduLCBlcnJvcjogbnVsbCB9KTtcbiAgICBtb2NrU3VwYWJhc2VPcGVyYXRpb25zLnVwZGF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG1vY2tEYXRhYmFzZUNhbXBhaWduLCBlcnJvcjogbnVsbCB9KTtcbiAgICBtb2NrU3VwYWJhc2VPcGVyYXRpb25zLmRlbGV0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG51bGwsIGVycm9yOiBudWxsIH0pO1xuICB9KVxuXG4gIGRlc2NyaWJlKCfwn5SEIGxvYWRDYW1wYWlnbnMgLSBEYXRhYmFzZSBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgbG9hZCBjYW1wYWlnbnMgZnJvbSBkYXRhYmFzZSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHN1Y2Nlc3NmdWwgZGF0YWJhc2UgcmVzcG9uc2VcbiAgICAgIG1vY2tTdXBhYmFzZU9wZXJhdGlvbnMub3JkZXIubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgZGF0YTogW21vY2tEYXRhYmFzZUNhbXBhaWduXSxcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUNhbXBhaWduU3RvcmUoKSlcbiAgICAgIFxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQubG9hZENhbXBhaWducyhtb2NrVXNlcklkKVxuICAgICAgfSlcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmNhbXBhaWducykudG9IYXZlTGVuZ3RoKDEpXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FtcGFpZ25zWzBdKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgLi4ubW9ja0RhdGFiYXNlQ2FtcGFpZ24sXG4gICAgICAgIHNvdXJjZTogJ2RhdGFiYXNlJyxcbiAgICAgICAgaXNEcmFmdDogZmFsc2UsXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICBpc1BhdXNlZDogZmFsc2VcbiAgICAgIH0pXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNMb2FkaW5nKS50b0JlKGZhbHNlKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmVycm9yKS50b0JlTnVsbCgpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGRhdGFiYXNlIGVycm9yXG4gICAgICBtb2NrU3VwYWJhc2VPcGVyYXRpb25zLm9yZGVyLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcgfVxuICAgICAgfSlcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQ2FtcGFpZ25TdG9yZSgpKVxuICAgICAgXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5sb2FkQ2FtcGFpZ25zKG1vY2tVc2VySWQpXG4gICAgICB9KVxuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FtcGFpZ25zKS50b0VxdWFsKFtdKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmVycm9yKS50b0JlKCdFcnJvciBsb2FkaW5nIGNhbXBhaWduczogRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzTG9hZGluZykudG9CZShmYWxzZSlcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIG1lcmdlIGxvY2FsIGRyYWZ0cyB3aXRoIGRhdGFiYXNlIGNhbXBhaWducycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgbG9jYWwgc3RvcmFnZSB3aXRoIGEgZHJhZnRcbiAgICAgIGNvbnN0IGxvY2FsRHJhZnQgPSB7XG4gICAgICAgIGZvcm1EYXRhOiBtb2NrRm9ybURhdGEsXG4gICAgICAgIGN1cnJlbnRTdGVwOiAyLFxuICAgICAgICBsYXN0U2F2ZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgZHJhZnRJZDogJ2xvY2FsLWRyYWZ0LTc4OSdcbiAgICAgIH1cbiAgICAgIGxvY2FsU3RvcmFnZU1vY2suZ2V0SXRlbS5tb2NrUmV0dXJuVmFsdWUoSlNPTi5zdHJpbmdpZnkobG9jYWxEcmFmdCkpXG5cbiAgICAgIC8vIE1vY2sgZGF0YWJhc2UgY2FtcGFpZ25zXG4gICAgICBtb2NrU3VwYWJhc2VPcGVyYXRpb25zLm9yZGVyLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGRhdGE6IFttb2NrRGF0YWJhc2VDYW1wYWlnbl0sXG4gICAgICAgIGVycm9yOiBudWxsXG4gICAgICB9KVxuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VDYW1wYWlnblN0b3JlKCkpXG4gICAgICBcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LmxvYWRDYW1wYWlnbnMobW9ja1VzZXJJZClcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5jYW1wYWlnbnMpLnRvSGF2ZUxlbmd0aCgyKSAvLyAxIGZyb20gREIgKyAxIGxvY2FsIGRyYWZ0XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGxvY2FsIGRyYWZ0IGlzIGluY2x1ZGVkXG4gICAgICBjb25zdCBsb2NhbENhbXBhaWduRXhpc3RzID0gcmVzdWx0LmN1cnJlbnQuY2FtcGFpZ25zLnNvbWUoYyA9PiBcbiAgICAgICAgYy5pZCA9PT0gYGxvY2FsLSR7bW9ja1VzZXJJZH1gICYmIGMuc291cmNlID09PSAnbG9jYWwnXG4gICAgICApXG4gICAgICBleHBlY3QobG9jYWxDYW1wYWlnbkV4aXN0cykudG9CZSh0cnVlKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgdXNlciBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUNhbXBhaWduU3RvcmUoKSlcbiAgICAgIFxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQubG9hZENhbXBhaWducygnJylcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5lcnJvcikudG9CZSgnRXJyb3IgbG9hZGluZyBjYW1wYWlnbnM6IFVzZXIgSUQgaXMgcmVxdWlyZWQnKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ/Cfkr4gc2F2ZURyYWZ0IC0gTG9jYWwgU3RvcmFnZSBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgc2F2ZSBkcmFmdCB0byBsb2NhbFN0b3JhZ2Ugc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQ2FtcGFpZ25TdG9yZSgpKVxuICAgICAgXG4gICAgICBsZXQgZHJhZnRJZDogc3RyaW5nID0gJydcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGRyYWZ0SWQgPSBhd2FpdCByZXN1bHQuY3VycmVudC5zYXZlRHJhZnQobW9ja1VzZXJJZCwgbW9ja0Zvcm1EYXRhLCAyKVxuICAgICAgfSlcblxuICAgICAgZXhwZWN0KGRyYWZ0SWQpLnRvQmVUcnV0aHkoKVxuICAgICAgZXhwZWN0KGxvY2FsU3RvcmFnZU1vY2suc2V0SXRlbSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGBmdW5kaW5nLWRyYWZ0LSR7bW9ja1VzZXJJZH1gLFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnXCJ0aXRsZVwiOlwiQml0Y29pbiBFZHVjYXRpb24gSW5pdGlhdGl2ZVwiJylcbiAgICAgIClcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5jdXJyZW50RHJhZnQpLnRvRXF1YWwobW9ja0Zvcm1EYXRhKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmN1cnJlbnREcmFmdElkKS50b0JlKGRyYWZ0SWQpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCB1cGRhdGUgZXhpc3RpbmcgZHJhZnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VDYW1wYWlnblN0b3JlKCkpXG4gICAgICBcbiAgICAgIC8vIFNhdmUgaW5pdGlhbCBkcmFmdFxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuc2F2ZURyYWZ0KG1vY2tVc2VySWQsIG1vY2tGb3JtRGF0YSwgMSlcbiAgICAgIH0pXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgZHJhZnRcbiAgICAgIGNvbnN0IHVwZGF0ZWRGb3JtRGF0YSA9IHsgLi4ubW9ja0Zvcm1EYXRhLCB0aXRsZTogJ1VwZGF0ZWQgVGl0bGUnIH1cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnNhdmVEcmFmdChtb2NrVXNlcklkLCB1cGRhdGVkRm9ybURhdGEsIDMpXG4gICAgICB9KVxuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY3VycmVudERyYWZ0Py50aXRsZSkudG9CZSgnVXBkYXRlZCBUaXRsZScpXG4gICAgICBleHBlY3QobG9jYWxTdG9yYWdlTW9jay5zZXRJdGVtKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMilcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBsb2NhbFN0b3JhZ2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBsb2NhbFN0b3JhZ2UgZXJyb3JcbiAgICAgIGxvY2FsU3RvcmFnZU1vY2suc2V0SXRlbS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0b3JhZ2UgcXVvdGEgZXhjZWVkZWQnKVxuICAgICAgfSlcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQ2FtcGFpZ25TdG9yZSgpKVxuICAgICAgXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5zYXZlRHJhZnQobW9ja1VzZXJJZCwgbW9ja0Zvcm1EYXRhKVxuICAgICAgfSlcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmVycm9yKS50b0JlKCdFcnJvciBzYXZpbmcgZHJhZnQ6IFN0b3JhZ2UgcXVvdGEgZXhjZWVkZWQnKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ/CfmoAgcHVibGlzaENhbXBhaWduIC0gRGF0YWJhc2UgUHVibGlzaCBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgcHVibGlzaCBjYW1wYWlnbiB0byBkYXRhYmFzZSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHN1Y2Nlc3NmdWwgZGF0YWJhc2UgaW5zZXJ0XG4gICAgICBtb2NrU3VwYWJhc2VPcGVyYXRpb25zLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBkYXRhOiB7IC4uLm1vY2tEYXRhYmFzZUNhbXBhaWduLCBpZDogJ25ldy1jYW1wYWlnbi1pZCcgfSxcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pXG5cbiAgICAgIC8vIFNldCB1cCBjdXJyZW50IGRyYWZ0XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VDYW1wYWlnblN0b3JlKCkpXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5zYXZlRHJhZnQobW9ja1VzZXJJZCwgbW9ja0Zvcm1EYXRhKVxuICAgICAgfSlcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQucHVibGlzaENhbXBhaWduKG1vY2tVc2VySWQsIHJlc3VsdC5jdXJyZW50LmN1cnJlbnREcmFmdElkISlcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2VPcGVyYXRpb25zLmluc2VydCkudG9IYXZlQmVlbkNhbGxlZCgpXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY3VycmVudERyYWZ0KS50b0JlTnVsbCgpXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY3VycmVudERyYWZ0SWQpLnRvQmVOdWxsKClcbiAgICAgIGV4cGVjdChsb2NhbFN0b3JhZ2VNb2NrLnJlbW92ZUl0ZW0pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGBmdW5kaW5nLWRyYWZ0LSR7bW9ja1VzZXJJZH1gKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgdXBkYXRlIGV4aXN0aW5nIGNhbXBhaWduIHdoZW4gcHVibGlzaGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgc3VjY2Vzc2Z1bCBkYXRhYmFzZSB1cGRhdGVcbiAgICAgIG1vY2tTdXBhYmFzZU9wZXJhdGlvbnMuc2luZ2xlLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGRhdGE6IG1vY2tEYXRhYmFzZUNhbXBhaWduLFxuICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgfSlcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQ2FtcGFpZ25TdG9yZSgpKVxuICAgICAgXG4gICAgICAvLyBTZXQgdXAgZXhpc3RpbmcgY2FtcGFpZ24gZm9yIGVkaXRpbmdcbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmNhbXBhaWducyA9IFt7XG4gICAgICAgICAgLi4ubW9ja0RhdGFiYXNlQ2FtcGFpZ24sXG4gICAgICAgICAgc291cmNlOiAnZGF0YWJhc2UnLFxuICAgICAgICAgIGlzRHJhZnQ6IHRydWUsXG4gICAgICAgICAgaXNBY3RpdmU6IGZhbHNlLFxuICAgICAgICAgIGlzUGF1c2VkOiBmYWxzZVxuICAgICAgICB9IGFzIENhbXBhaWduXVxuICAgICAgfSlcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQucHVibGlzaENhbXBhaWduKG1vY2tVc2VySWQsIG1vY2tDYW1wYWlnbklkKVxuICAgICAgfSlcblxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZU9wZXJhdGlvbnMudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBwdWJsaXNoIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgZGF0YWJhc2UgZXJyb3JcbiAgICAgIG1vY2tTdXBhYmFzZU9wZXJhdGlvbnMuc2luZ2xlLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdWYWxpZGF0aW9uIGZhaWxlZCcgfVxuICAgICAgfSlcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQ2FtcGFpZ25TdG9yZSgpKVxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuc2F2ZURyYWZ0KG1vY2tVc2VySWQsIG1vY2tGb3JtRGF0YSlcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnB1Ymxpc2hDYW1wYWlnbihtb2NrVXNlcklkLCByZXN1bHQuY3VycmVudC5jdXJyZW50RHJhZnRJZCEpXG4gICAgICB9KVxuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZXJyb3IpLnRvQmUoJ0Vycm9yIHB1Ymxpc2hpbmcgY2FtcGFpZ246IFZhbGlkYXRpb24gZmFpbGVkJylcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfij7jvuI8gQ2FtcGFpZ24gTGlmZWN5Y2xlIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHBhdXNlIGNhbXBhaWduIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgc3VjY2Vzc2Z1bCBkYXRhYmFzZSB1cGRhdGVcbiAgICAgIG1vY2tTdXBhYmFzZU9wZXJhdGlvbnMuc2luZ2xlLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGRhdGE6IHsgLi4ubW9ja0RhdGFiYXNlQ2FtcGFpZ24sIGlzX2FjdGl2ZTogZmFsc2UgfSxcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUNhbXBhaWduU3RvcmUoKSlcbiAgICAgIFxuICAgICAgLy8gU2V0IHVwIGFjdGl2ZSBjYW1wYWlnblxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuY2FtcGFpZ25zID0gW3tcbiAgICAgICAgICAuLi5tb2NrRGF0YWJhc2VDYW1wYWlnbixcbiAgICAgICAgICBzb3VyY2U6ICdkYXRhYmFzZScsXG4gICAgICAgICAgaXNEcmFmdDogZmFsc2UsXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgICAgaXNQYXVzZWQ6IGZhbHNlXG4gICAgICAgIH0gYXMgQ2FtcGFpZ25dXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5wYXVzZUNhbXBhaWduKG1vY2tVc2VySWQsIG1vY2tDYW1wYWlnbklkKVxuICAgICAgfSlcblxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZU9wZXJhdGlvbnMudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgY2FtcGFpZ24gd2FzIHVwZGF0ZWQgaW4gc3RvcmVcbiAgICAgIGNvbnN0IHVwZGF0ZWRDYW1wYWlnbiA9IHJlc3VsdC5jdXJyZW50LmNhbXBhaWducy5maW5kKGMgPT4gYy5pZCA9PT0gbW9ja0NhbXBhaWduSWQpXG4gICAgICBleHBlY3QodXBkYXRlZENhbXBhaWduPy5pc0FjdGl2ZSkudG9CZShmYWxzZSlcbiAgICAgIGV4cGVjdCh1cGRhdGVkQ2FtcGFpZ24/LmlzUGF1c2VkKS50b0JlKHRydWUpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCByZXN1bWUgY2FtcGFpZ24gc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBzdWNjZXNzZnVsIGRhdGFiYXNlIHVwZGF0ZVxuICAgICAgbW9ja1N1cGFiYXNlT3BlcmF0aW9ucy5zaW5nbGUubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgZGF0YTogeyAuLi5tb2NrRGF0YWJhc2VDYW1wYWlnbiwgaXNfYWN0aXZlOiB0cnVlIH0sXG4gICAgICAgIGVycm9yOiBudWxsXG4gICAgICB9KVxuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VDYW1wYWlnblN0b3JlKCkpXG4gICAgICBcbiAgICAgIC8vIFNldCB1cCBwYXVzZWQgY2FtcGFpZ25cbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmNhbXBhaWducyA9IFt7XG4gICAgICAgICAgLi4ubW9ja0RhdGFiYXNlQ2FtcGFpZ24sXG4gICAgICAgICAgc291cmNlOiAnZGF0YWJhc2UnLFxuICAgICAgICAgIGlzRHJhZnQ6IGZhbHNlLFxuICAgICAgICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICBpc1BhdXNlZDogdHJ1ZVxuICAgICAgICB9IGFzIENhbXBhaWduXVxuICAgICAgfSlcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQucmVzdW1lQ2FtcGFpZ24obW9ja1VzZXJJZCwgbW9ja0NhbXBhaWduSWQpXG4gICAgICB9KVxuXG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlT3BlcmF0aW9ucy51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgICAgXG4gICAgICAvLyBDaGVjayBjYW1wYWlnbiB3YXMgdXBkYXRlZCBpbiBzdG9yZVxuICAgICAgY29uc3QgdXBkYXRlZENhbXBhaWduID0gcmVzdWx0LmN1cnJlbnQuY2FtcGFpZ25zLmZpbmQoYyA9PiBjLmlkID09PSBtb2NrQ2FtcGFpZ25JZClcbiAgICAgIGV4cGVjdCh1cGRhdGVkQ2FtcGFpZ24/LmlzQWN0aXZlKS50b0JlKHRydWUpXG4gICAgICBleHBlY3QodXBkYXRlZENhbXBhaWduPy5pc1BhdXNlZCkudG9CZShmYWxzZSlcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGRlbGV0ZSBjYW1wYWlnbiBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHN1Y2Nlc3NmdWwgZGF0YWJhc2UgZGVsZXRlXG4gICAgICBtb2NrU3VwYWJhc2VPcGVyYXRpb25zLmRlbGV0ZS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgfSlcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQ2FtcGFpZ25TdG9yZSgpKVxuICAgICAgXG4gICAgICAvLyBTZXQgdXAgY2FtcGFpZ25cbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmNhbXBhaWducyA9IFt7XG4gICAgICAgICAgLi4ubW9ja0RhdGFiYXNlQ2FtcGFpZ24sXG4gICAgICAgICAgc291cmNlOiAnZGF0YWJhc2UnLFxuICAgICAgICAgIGlzRHJhZnQ6IGZhbHNlLFxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgIGlzUGF1c2VkOiBmYWxzZVxuICAgICAgICB9IGFzIENhbXBhaWduXVxuICAgICAgfSlcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuZGVsZXRlQ2FtcGFpZ24obW9ja0NhbXBhaWduSWQpXG4gICAgICB9KVxuXG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlT3BlcmF0aW9ucy5kZWxldGUpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgICAgXG4gICAgICAvLyBDaGVjayBjYW1wYWlnbiB3YXMgcmVtb3ZlZCBmcm9tIHN0b3JlXG4gICAgICBjb25zdCBkZWxldGVkQ2FtcGFpZ24gPSByZXN1bHQuY3VycmVudC5jYW1wYWlnbnMuZmluZChjID0+IGMuaWQgPT09IG1vY2tDYW1wYWlnbklkKVxuICAgICAgZXhwZWN0KGRlbGV0ZWRDYW1wYWlnbikudG9CZVVuZGVmaW5lZCgpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn4pyP77iPIHVwZGF0ZUNhbXBhaWduIC0gRWRpdCBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgdXBkYXRlIGNhbXBhaWduIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgc3VjY2Vzc2Z1bCBkYXRhYmFzZSB1cGRhdGVcbiAgICAgIGNvbnN0IHVwZGF0ZWREYXRhID0geyAuLi5tb2NrRGF0YWJhc2VDYW1wYWlnbiwgdGl0bGU6ICdVcGRhdGVkIENhbXBhaWduIFRpdGxlJyB9XG4gICAgICBtb2NrU3VwYWJhc2VPcGVyYXRpb25zLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBkYXRhOiB1cGRhdGVkRGF0YSxcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUNhbXBhaWduU3RvcmUoKSlcbiAgICAgIFxuICAgICAgLy8gU2V0IHVwIGV4aXN0aW5nIGNhbXBhaWduXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5jYW1wYWlnbnMgPSBbe1xuICAgICAgICAgIC4uLm1vY2tEYXRhYmFzZUNhbXBhaWduLFxuICAgICAgICAgIHNvdXJjZTogJ2RhdGFiYXNlJyxcbiAgICAgICAgICBpc0RyYWZ0OiBmYWxzZSxcbiAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICBpc1BhdXNlZDogZmFsc2VcbiAgICAgICAgfSBhcyBDYW1wYWlnbl1cbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHVwZGF0ZUZvcm1EYXRhID0geyAuLi5tb2NrRm9ybURhdGEsIHRpdGxlOiAnVXBkYXRlZCBDYW1wYWlnbiBUaXRsZScgfVxuICAgICAgXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC51cGRhdGVDYW1wYWlnbihtb2NrVXNlcklkLCBtb2NrQ2FtcGFpZ25JZCwgdXBkYXRlRm9ybURhdGEpXG4gICAgICB9KVxuXG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlT3BlcmF0aW9ucy51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgICAgXG4gICAgICAvLyBDaGVjayBjYW1wYWlnbiB3YXMgdXBkYXRlZCBpbiBzdG9yZVxuICAgICAgY29uc3QgdXBkYXRlZENhbXBhaWduID0gcmVzdWx0LmN1cnJlbnQuY2FtcGFpZ25zLmZpbmQoYyA9PiBjLmlkID09PSBtb2NrQ2FtcGFpZ25JZClcbiAgICAgIGV4cGVjdCh1cGRhdGVkQ2FtcGFpZ24/LnRpdGxlKS50b0JlKCdVcGRhdGVkIENhbXBhaWduIFRpdGxlJylcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfwn5SEIHN5bmNBbGwgLSBGdWxsIFN5bmNocm9uaXphdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgc3luYyBhbGwgY2FtcGFpZ25zIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgZGF0YWJhc2UgcmVzcG9uc2VcbiAgICAgIG1vY2tTdXBhYmFzZU9wZXJhdGlvbnMub3JkZXIubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgZGF0YTogW21vY2tEYXRhYmFzZUNhbXBhaWduXSxcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUNhbXBhaWduU3RvcmUoKSlcbiAgICAgIFxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuc3luY0FsbChtb2NrVXNlcklkKVxuICAgICAgfSlcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzU3luY2luZykudG9CZShmYWxzZSlcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5sYXN0U3luYykudG9CZVRydXRoeSgpXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY2FtcGFpZ25zKS50b0hhdmVMZW5ndGgoMSlcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfwn5uh77iPIEVycm9yIEhhbmRsaW5nICYgRWRnZSBDYXNlcycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG5ldHdvcmsgZXJyb3JzIGR1cmluZyBvcGVyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBuZXR3b3JrIGVycm9yXG4gICAgICBtb2NrU3VwYWJhc2VPcGVyYXRpb25zLm9yZGVyLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKSlcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQ2FtcGFpZ25TdG9yZSgpKVxuICAgICAgXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5sb2FkQ2FtcGFpZ25zKG1vY2tVc2VySWQpXG4gICAgICB9KVxuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZXJyb3IpLnRvQmUoJ0Vycm9yIGxvYWRpbmcgY2FtcGFpZ25zOiBOZXR3b3JrIGVycm9yJylcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IG9wZXJhdGlvbnMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQ2FtcGFpZ25TdG9yZSgpKVxuICAgICAgXG4gICAgICAvLyBTdGFydCBtdWx0aXBsZSBvcGVyYXRpb25zIGNvbmN1cnJlbnRseVxuICAgICAgY29uc3QgcHJvbWlzZXMgPSBbXG4gICAgICAgIHJlc3VsdC5jdXJyZW50LnNhdmVEcmFmdChtb2NrVXNlcklkLCBtb2NrRm9ybURhdGEpLFxuICAgICAgICByZXN1bHQuY3VycmVudC5sb2FkQ2FtcGFpZ25zKG1vY2tVc2VySWQpLFxuICAgICAgICByZXN1bHQuY3VycmVudC5zYXZlRHJhZnQobW9ja1VzZXJJZCwgeyAuLi5tb2NrRm9ybURhdGEsIHRpdGxlOiAnVXBkYXRlZCcgfSlcbiAgICAgIF1cblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHByb21pc2VzKVxuICAgICAgfSlcblxuICAgICAgLy8gU2hvdWxkIG5vdCBjcmFzaCBhbmQgc2hvdWxkIGhhdmUgY29uc2lzdGVudCBzdGF0ZVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50KS50b0JlRGVmaW5lZCgpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBjYW1wYWlnbiBkYXRhIGJlZm9yZSBvcGVyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQ2FtcGFpZ25TdG9yZSgpKVxuICAgICAgXG4gICAgICAvLyBUcnkgdG8gc2F2ZSBpbnZhbGlkIGRhdGFcbiAgICAgIGNvbnN0IGludmFsaWRGb3JtRGF0YSA9IHsgLi4ubW9ja0Zvcm1EYXRhLCB0aXRsZTogJycgfVxuICAgICAgXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5zYXZlRHJhZnQobW9ja1VzZXJJZCwgaW52YWxpZEZvcm1EYXRhKVxuICAgICAgfSlcblxuICAgICAgLy8gU2hvdWxkIHN0aWxsIHNhdmUgYnV0IG1pZ2h0IGhhdmUgdmFsaWRhdGlvbiB3YXJuaW5nc1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmN1cnJlbnREcmFmdD8udGl0bGUpLnRvQmUoJycpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn8J+SsCBSZWFsLXdvcmxkIENhbXBhaWduIFNjZW5hcmlvcycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGhpZ2gtdmFsdWUgQml0Y29pbiBjYW1wYWlnbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBoaWdoVmFsdWVDYW1wYWlnbiA9IHtcbiAgICAgICAgLi4ubW9ja0Zvcm1EYXRhLFxuICAgICAgICBnb2FsX2Ftb3VudDogMjEwMDAwMDAwMDAsIC8vIDIxMCBCVEMgaW4gc2F0c1xuICAgICAgICB0aXRsZTogJ01ham9yIEJpdGNvaW4gSW5mcmFzdHJ1Y3R1cmUgUHJvamVjdCdcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQ2FtcGFpZ25TdG9yZSgpKVxuICAgICAgXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5zYXZlRHJhZnQobW9ja1VzZXJJZCwgaGlnaFZhbHVlQ2FtcGFpZ24pXG4gICAgICB9KVxuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuY3VycmVudERyYWZ0Py5nb2FsX2Ftb3VudCkudG9CZSgyMTAwMDAwMDAwMClcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjYW1wYWlnbnMgd2l0aCBzcGVjaWFsIGNoYXJhY3RlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzcGVjaWFsQ2hhckNhbXBhaWduID0ge1xuICAgICAgICAuLi5tb2NrRm9ybURhdGEsXG4gICAgICAgIHRpdGxlOiAnQ2Fmw6kg4oK/aXRjb2luICYgTGlnaHRuaW5nIOKaoSBXb3Jrc2hvcCAyMDI0ISDwn5qAJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdUZWFjaGluZyBCaXRjb2luIHdpdGggw6ltb2ppcyAmIHNww6ljacOhbCBjaGFyYWN0ZXJzJ1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VDYW1wYWlnblN0b3JlKCkpXG4gICAgICBcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnNhdmVEcmFmdChtb2NrVXNlcklkLCBzcGVjaWFsQ2hhckNhbXBhaWduKVxuICAgICAgfSlcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmN1cnJlbnREcmFmdD8udGl0bGUpLnRvQmUoJ0NhZsOpIOKCv2l0Y29pbiAmIExpZ2h0bmluZyDimqEgV29ya3Nob3AgMjAyNCEg8J+agCcpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbXVsdGlwbGUgc2ltdWx0YW5lb3VzIGNhbXBhaWducycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNhbXBhaWducyA9IFtcbiAgICAgICAgeyAuLi5tb2NrRGF0YWJhc2VDYW1wYWlnbiwgaWQ6ICdjYW1wLTEnLCB0aXRsZTogJ0NhbXBhaWduIDEnIH0sXG4gICAgICAgIHsgLi4ubW9ja0RhdGFiYXNlQ2FtcGFpZ24sIGlkOiAnY2FtcC0yJywgdGl0bGU6ICdDYW1wYWlnbiAyJyB9LFxuICAgICAgICB7IC4uLm1vY2tEYXRhYmFzZUNhbXBhaWduLCBpZDogJ2NhbXAtMycsIHRpdGxlOiAnQ2FtcGFpZ24gMycgfVxuICAgICAgXVxuXG4gICAgICBtb2NrU3VwYWJhc2VPcGVyYXRpb25zLm9yZGVyLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGRhdGE6IGNhbXBhaWducyxcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUNhbXBhaWduU3RvcmUoKSlcbiAgICAgIFxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQubG9hZENhbXBhaWducyhtb2NrVXNlcklkKVxuICAgICAgfSlcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmNhbXBhaWducykudG9IYXZlTGVuZ3RoKDMpXG4gICAgICBcbiAgICAgIGNvbnN0IHN0YXRzID0gcmVzdWx0LmN1cnJlbnQuZ2V0U3RhdHMoKVxuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsQ2FtcGFpZ25zKS50b0JlKDMpXG4gICAgICBleHBlY3Qoc3RhdHMudG90YWxBY3RpdmUpLnRvQmUoMykgLy8gQWxsIGFyZSBhY3RpdmUgYnkgZGVmYXVsdFxuICAgIH0pXG4gIH0pXG59KSAiXSwidmVyc2lvbiI6M30=
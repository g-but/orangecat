80a88b1079aa55588752150dd9426730
"use strict";
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
// Mock dependencies
jest.mock('next/navigation', () => ({
    useRouter: jest.fn()
}));
jest.mock('@/hooks/useAuth', () => ({
    useAuth: jest.fn()
}));
jest.mock('sonner', () => ({
    toast: {
        success: jest.fn(),
        error: jest.fn()
    }
}));
// Mock UI components
jest.mock('@/components/ui/Card', () => ({
    __esModule: true,
    default: ({ children, className }) => (0, jsx_runtime_1.jsx)("div", { "data-testid": "card", className: className, children: children }),
    CardContent: ({ children, className }) => (0, jsx_runtime_1.jsx)("div", { "data-testid": "card-content", className: className, children: children })
}));
jest.mock('@/components/ui/Input', () => ({
    __esModule: true,
    default: (_a) => {
        var { label } = _a, props = __rest(_a, ["label"]);
        return ((0, jsx_runtime_1.jsxs)("div", { children: [label && (0, jsx_runtime_1.jsx)("label", { children: label }), (0, jsx_runtime_1.jsx)("input", Object.assign({ "data-testid": `input-${props.name || props.id}` }, props))] }));
    }
}));
jest.mock('@/components/ui/Button', () => ({
    __esModule: true,
    default: ({ children, onClick, disabled, type, variant, className }) => {
        var _a;
        return ((0, jsx_runtime_1.jsx)("button", { "data-testid": `button-${((_a = children === null || children === void 0 ? void 0 : children.props) === null || _a === void 0 ? void 0 : _a.children) || children}`, onClick: onClick, disabled: disabled, type: type, className: className, children: children }));
    }
}));
// Mock categories
jest.mock('@/config/categories', () => ({
    simpleCategories: [
        { value: 'health', label: 'Health', icon: 'ðŸ¥', description: 'Medical expenses' },
        { value: 'creative', label: 'Creative', icon: 'ðŸŽ¨', description: 'Art, music, writing' },
        { value: 'technology', label: 'Technology', icon: 'ðŸ’»', description: 'Apps, websites' },
        { value: 'community', label: 'Community', icon: 'ðŸ˜ï¸', description: 'Local initiatives' }
    ]
}));
const react_1 = require("@testing-library/react");
const user_event_1 = __importDefault(require("@testing-library/user-event"));
const navigation_1 = require("next/navigation");
const sonner_1 = require("sonner");
const page_1 = __importDefault(require("../page"));
const useAuth_1 = require("@/hooks/useAuth");
describe('Create Campaign Flow - Comprehensive Test Suite', () => {
    const mockPush = jest.fn();
    const mockUser = {
        id: 'test-user-id',
        email: 'test@example.com',
        user_metadata: { full_name: 'Test User' }
    };
    beforeEach(() => {
        jest.clearAllMocks();
        navigation_1.useRouter.mockReturnValue({
            push: mockPush
        });
        useAuth_1.useAuth.mockReturnValue({
            user: mockUser
        });
    });
    describe('ðŸ” Authentication Requirements', () => {
        it('redirects to auth page when user is not authenticated', () => {
            ;
            useAuth_1.useAuth.mockReturnValue({
                user: null
            });
            (0, react_1.render)((0, jsx_runtime_1.jsx)(page_1.default, {}));
            expect(mockPush).toHaveBeenCalledWith('/auth?mode=login');
        });
        it('renders create form when user is authenticated', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(page_1.default, {}));
            expect(react_1.screen.getByText('Create Campaign')).toBeInTheDocument();
            expect(react_1.screen.getByText('Step 1 of 3')).toBeInTheDocument();
            expect(react_1.screen.getByText('Project Details')).toBeInTheDocument();
        });
    });
    describe('ðŸ“ Step 1: Project Details', () => {
        it('renders all required form fields', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(page_1.default, {}));
            expect(react_1.screen.getByTestId('input-title')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('input-description')).toBeInTheDocument();
            expect(react_1.screen.getByText('Categories')).toBeInTheDocument();
            // Check category buttons
            expect(react_1.screen.getByText('Health')).toBeInTheDocument();
            expect(react_1.screen.getByText('Creative')).toBeInTheDocument();
            expect(react_1.screen.getByText('Technology')).toBeInTheDocument();
            expect(react_1.screen.getByText('Community')).toBeInTheDocument();
        });
        it('validates required title field for Continue button', async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(page_1.default, {}));
            const continueButton = react_1.screen.getByTestId('button-Continue');
            expect(continueButton).toBeDisabled();
            // Add title
            const titleInput = react_1.screen.getByTestId('input-title');
            await user_event_1.default.type(titleInput, 'Test Campaign');
            expect(continueButton).not.toBeDisabled();
        });
        it('allows category selection and deselection', async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(page_1.default, {}));
            const healthCategory = react_1.screen.getByText('Health').closest('button');
            // Select category
            await user_event_1.default.click(healthCategory);
            expect(healthCategory).toHaveClass('border-teal-500');
            // Deselect category
            await user_event_1.default.click(healthCategory);
            expect(healthCategory).not.toHaveClass('border-teal-500');
        });
        it('proceeds to step 2 when continue button is clicked', async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(page_1.default, {}));
            // Fill required fields
            const titleInput = react_1.screen.getByTestId('input-title');
            await user_event_1.default.type(titleInput, 'Test Campaign');
            const continueButton = react_1.screen.getByTestId('button-Continue');
            await user_event_1.default.click(continueButton);
            expect(react_1.screen.getByText('Step 2 of 3')).toBeInTheDocument();
            expect(react_1.screen.getByText('Payment Setup')).toBeInTheDocument();
        });
    });
    describe('â‚¿ Step 2: Payment Setup', () => {
        beforeEach(async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(page_1.default, {}));
            // Navigate to step 2
            const titleInput = react_1.screen.getByTestId('input-title');
            await user_event_1.default.type(titleInput, 'Test Campaign');
            const continueButton = react_1.screen.getByTestId('button-Continue');
            await user_event_1.default.click(continueButton);
        });
        it('renders Bitcoin payment fields', () => {
            expect(react_1.screen.getByText('Bitcoin Address')).toBeInTheDocument();
            expect(react_1.screen.getByText('Lightning Address (Optional)')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('input-bitcoin_address')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('input-lightning_address')).toBeInTheDocument();
        });
        it('allows navigation back to step 1', async () => {
            const backButton = react_1.screen.getByTestId('button-Back');
            await user_event_1.default.click(backButton);
            expect(react_1.screen.getByText('Step 1 of 3')).toBeInTheDocument();
            expect(react_1.screen.getByText('Project Details')).toBeInTheDocument();
        });
        it('proceeds to step 3 when continue button is clicked', async () => {
            const continueButton = react_1.screen.getByTestId('button-Continue');
            await user_event_1.default.click(continueButton);
            expect(react_1.screen.getByText('Step 3 of 3')).toBeInTheDocument();
            expect(react_1.screen.getByText('Final Details')).toBeInTheDocument();
        });
    });
    describe('ðŸŽ¯ Step 3: Final Details', () => {
        beforeEach(async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(page_1.default, {}));
            // Navigate to step 3
            const titleInput = react_1.screen.getByTestId('input-title');
            await user_event_1.default.type(titleInput, 'Test Campaign');
            // Step 1 -> 2
            let continueButton = react_1.screen.getByTestId('button-Continue');
            await user_event_1.default.click(continueButton);
            // Step 2 -> 3
            continueButton = react_1.screen.getByTestId('button-Continue');
            await user_event_1.default.click(continueButton);
        });
        it('renders final detail fields', () => {
            expect(react_1.screen.getByText('Website or Social Media')).toBeInTheDocument();
            expect(react_1.screen.getByText('Funding Goal (Optional)')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('input-website_url')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('input-goal_amount')).toBeInTheDocument();
        });
        it('shows Launch Campaign button instead of Continue', () => {
            expect(react_1.screen.getByTestId('button-Launch Campaign')).toBeInTheDocument();
            expect(react_1.screen.queryByTestId('button-Continue')).not.toBeInTheDocument();
        });
        it('allows navigation back to step 2', async () => {
            const backButton = react_1.screen.getByTestId('button-Back');
            await user_event_1.default.click(backButton);
            expect(react_1.screen.getByText('Step 2 of 3')).toBeInTheDocument();
            expect(react_1.screen.getByText('Payment Setup')).toBeInTheDocument();
        });
    });
    describe('ðŸš€ Form Submission', () => {
        it('successfully submits campaign and redirects to dashboard', async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(page_1.default, {}));
            // Fill out complete form
            const titleInput = react_1.screen.getByTestId('input-title');
            await user_event_1.default.type(titleInput, 'Test Campaign');
            const descriptionInput = react_1.screen.getByTestId('input-description');
            await user_event_1.default.type(descriptionInput, 'This is a test campaign description');
            // Navigate through steps
            let continueButton = react_1.screen.getByTestId('button-Continue');
            await user_event_1.default.click(continueButton);
            // Step 2: Add Bitcoin address
            const bitcoinInput = react_1.screen.getByTestId('input-bitcoin_address');
            await user_event_1.default.type(bitcoinInput, 'bc1qtest123address');
            continueButton = react_1.screen.getByTestId('button-Continue');
            await user_event_1.default.click(continueButton);
            // Step 3: Submit
            const launchButton = react_1.screen.getByTestId('button-Launch Campaign');
            await user_event_1.default.click(launchButton);
            await (0, react_1.waitFor)(() => {
                expect(sonner_1.toast.success).toHaveBeenCalledWith('ðŸŽ‰ Campaign created successfully!');
                expect(mockPush).toHaveBeenCalledWith('/dashboard');
            });
        });
        it('validates title requirement on submission', async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(page_1.default, {}));
            // Try to proceed without title
            const continueButton = react_1.screen.getByTestId('button-Continue');
            expect(continueButton).toBeDisabled();
        });
    });
    describe('ðŸ’¾ Draft Functionality', () => {
        it('saves draft when Save Draft button is clicked', async () => {
            const localStorageMock = {
                setItem: jest.fn()
            };
            Object.defineProperty(window, 'localStorage', {
                value: localStorageMock
            });
            (0, react_1.render)((0, jsx_runtime_1.jsx)(page_1.default, {}));
            // Add title to enable save draft
            const titleInput = react_1.screen.getByTestId('input-title');
            await user_event_1.default.type(titleInput, 'Test Campaign');
            const saveDraftButton = react_1.screen.getByTestId('button-Save Draft');
            expect(saveDraftButton).not.toBeDisabled();
            await user_event_1.default.click(saveDraftButton);
            expect(localStorageMock.setItem).toHaveBeenCalledWith(`campaign-draft-${mockUser.id}`, expect.stringContaining('Test Campaign'));
            expect(sonner_1.toast.success).toHaveBeenCalledWith('Draft saved');
        });
        it('disables save draft when no title is provided', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(page_1.default, {}));
            const saveDraftButton = react_1.screen.getByTestId('button-Save Draft');
            expect(saveDraftButton).toBeDisabled();
        });
    });
    describe('ðŸ§­ Navigation', () => {
        it('allows canceling and returning to dashboard', async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(page_1.default, {}));
            const cancelButton = react_1.screen.getByTestId('button-Cancel');
            await user_event_1.default.click(cancelButton);
            expect(mockPush).toHaveBeenCalledWith('/dashboard');
        });
    });
    describe('ðŸ“Š Progress Tracking', () => {
        it('shows correct progress percentage for each step', async () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(page_1.default, {}));
            // Step 1: 33%
            expect(react_1.screen.getByText('33% complete')).toBeInTheDocument();
            // Navigate to step 2
            const titleInput = react_1.screen.getByTestId('input-title');
            await user_event_1.default.type(titleInput, 'Test Campaign');
            let continueButton = react_1.screen.getByTestId('button-Continue');
            await user_event_1.default.click(continueButton);
            // Step 2: 67%
            expect(react_1.screen.getByText('67% complete')).toBeInTheDocument();
            // Navigate to step 3
            continueButton = react_1.screen.getByTestId('button-Continue');
            await user_event_1.default.click(continueButton);
            // Step 3: 100%
            expect(react_1.screen.getByText('100% complete')).toBeInTheDocument();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvZy9kZXYvb3JhbmdlY2F0L3NyYy9hcHAvY3JlYXRlL19fdGVzdHNfXy9jcmVhdGUtY2FtcGFpZ24tZmxvdy50ZXN0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQU9BLG9CQUFvQjtBQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDbEMsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Q0FDckIsQ0FBQyxDQUFDLENBQUE7QUFFSCxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDbEMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Q0FDbkIsQ0FBQyxDQUFDLENBQUE7QUFFSCxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3pCLEtBQUssRUFBRTtRQUNMLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2xCLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0tBQ2pCO0NBQ0YsQ0FBQyxDQUFDLENBQUE7QUFFSCxxQkFBcUI7QUFDckIsSUFBSSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCLE9BQU8sRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBTyxFQUFFLEVBQUUsQ0FBQywrQ0FBaUIsTUFBTSxFQUFDLFNBQVMsRUFBRSxTQUFTLFlBQUcsUUFBUSxHQUFPO0lBQ3pHLFdBQVcsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBTyxFQUFFLEVBQUUsQ0FBQywrQ0FBaUIsY0FBYyxFQUFDLFNBQVMsRUFBRSxTQUFTLFlBQUcsUUFBUSxHQUFPO0NBQ3RILENBQUMsQ0FBQyxDQUFBO0FBRUgsSUFBSSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsRUFBRSxHQUFHLEVBQUUs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QTtZQUU1RCxxQkFBcUI7WUFDckIsTUFBTSxVQUFVLEdBQUcsY0FBTSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsQ0FBQTtZQUNwRCxNQUFNLG9CQUFTLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxlQUFlLENBQUMsQ0FBQTtZQUVqRCxJQUFJLGNBQWMsR0FBRyxjQUFNLENBQUMsV0FBVyxDQUFDLGlCQUFpQixDQUFDLENBQUE7WUFDMUQsTUFBTSxvQkFBUyxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQTtZQUVyQyxjQUFjO1lBQ2QsTUFBTSxDQUFDLGNBQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFBO1lBRTVELHFCQUFxQjtZQUNyQixjQUFjLEdBQUcsY0FBTSxDQUFDLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFBO1lBQ3RELE1BQU0sb0JBQVMsQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUE7WUFFckMsZUFBZTtZQUNmLE1BQU0sQ0FBQyxjQUFNLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtRQUMvRCxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvZy9kZXYvb3JhbmdlY2F0L3NyYy9hcHAvY3JlYXRlL19fdGVzdHNfXy9jcmVhdGUtY2FtcGFpZ24tZmxvdy50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCdcbmltcG9ydCB1c2VyRXZlbnQgZnJvbSAnQHRlc3RpbmctbGlicmFyeS91c2VyLWV2ZW50J1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJ1xuaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdzb25uZXInXG5pbXBvcnQgQ3JlYXRlUGFnZSBmcm9tICcuLi9wYWdlJ1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvaG9va3MvdXNlQXV0aCdcblxuLy8gTW9jayBkZXBlbmRlbmNpZXNcbmplc3QubW9jaygnbmV4dC9uYXZpZ2F0aW9uJywgKCkgPT4gKHtcbiAgdXNlUm91dGVyOiBqZXN0LmZuKClcbn0pKVxuXG5qZXN0Lm1vY2soJ0AvaG9va3MvdXNlQXV0aCcsICgpID0+ICh7XG4gIHVzZUF1dGg6IGplc3QuZm4oKVxufSkpXG5cbmplc3QubW9jaygnc29ubmVyJywgKCkgPT4gKHtcbiAgdG9hc3Q6IHtcbiAgICBzdWNjZXNzOiBqZXN0LmZuKCksXG4gICAgZXJyb3I6IGplc3QuZm4oKVxuICB9XG59KSlcblxuLy8gTW9jayBVSSBjb21wb25lbnRzXG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy91aS9DYXJkJywgKCkgPT4gKHtcbiAgX19lc01vZHVsZTogdHJ1ZSxcbiAgZGVmYXVsdDogKHsgY2hpbGRyZW4sIGNsYXNzTmFtZSB9OiBhbnkpID0+IDxkaXYgZGF0YS10ZXN0aWQ9XCJjYXJkXCIgY2xhc3NOYW1lPXtjbGFzc05hbWV9PntjaGlsZHJlbn08L2Rpdj4sXG4gIENhcmRDb250ZW50OiAoeyBjaGlsZHJlbiwgY2xhc3NOYW1lIH06IGFueSkgPT4gPGRpdiBkYXRhLXRlc3RpZD1cImNhcmQtY29udGVudFwiIGNsYXNzTmFtZT17Y2xhc3NOYW1lfT57Y2hpbGRyZW59PC9kaXY+XG59KSlcblxuamVzdC5tb2NrKCdAL2NvbXBvbmVudHMvdWkvSW5wdXQnLCAoKSA9PiAoe1xuICBfX2VzTW9kdWxlOiB0cnVlLFxuICBkZWZhdWx0OiAoeyBsYWJlbCwgLi4ucHJvcHMgfTogYW55KSA9PiAoXG4gICAgPGRpdj5cbiAgICAgIHtsYWJlbCAmJiA8bGFiZWw+e2xhYmVsfTwvbGFiZWw+fVxuICAgICAgPGlucHV0IGRhdGEtdGVzdGlkPXtgaW5wdXQtJHtwcm9wcy5uYW1lIHx8IHByb3BzLmlkfWB9IHsuLi5wcm9wc30gLz5cbiAgICA8L2Rpdj5cbiAgKVxufSkpXG5cbmplc3QubW9jaygnQC9jb21wb25lbnRzL3VpL0J1dHRvbicsICgpID0+ICh7XG4gIF9fZXNNb2R1bGU6IHRydWUsXG4gIGRlZmF1bHQ6ICh7IGNoaWxkcmVuLCBvbkNsaWNrLCBkaXNhYmxlZCwgdHlwZSwgdmFyaWFudCwgY2xhc3NOYW1lIH06IGFueSkgPT4gKFxuICAgIDxidXR0b24gXG4gICAgICBkYXRhLXRlc3RpZD17YGJ1dHRvbi0ke2NoaWxkcmVuPy5wcm9wcz8uY2hpbGRyZW4gfHwgY2hpbGRyZW59YH1cbiAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICB0eXBlPXt0eXBlfVxuICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgPlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvYnV0dG9uPlxuICApXG59KSlcblxuLy8gTW9jayBjYXRlZ29yaWVzXG5qZXN0Lm1vY2soJ0AvY29uZmlnL2NhdGVnb3JpZXMnLCAoKSA9PiAoe1xuICBzaW1wbGVDYXRlZ29yaWVzOiBbXG4gICAgeyB2YWx1ZTogJ2hlYWx0aCcsIGxhYmVsOiAnSGVhbHRoJywgaWNvbjogJ/Cfj6UnLCBkZXNjcmlwdGlvbjogJ01lZGljYWwgZXhwZW5zZXMnIH0sXG4gICAgeyB2YWx1ZTogJ2NyZWF0aXZlJywgbGFiZWw6ICdDcmVhdGl2ZScsIGljb246ICfwn46oJywgZGVzY3JpcHRpb246ICdBcnQsIG11c2ljLCB3cml0aW5nJyB9LFxuICAgIHsgdmFsdWU6ICd0ZWNobm9sb2d5JywgbGFiZWw6ICdUZWNobm9sb2d5JywgaWNvbjogJ/CfkrsnLCBkZXNjcmlwdGlvbjogJ0FwcHMsIHdlYnNpdGVzJyB9LFxuICAgIHsgdmFsdWU6ICdjb21tdW5pdHknLCBsYWJlbDogJ0NvbW11bml0eScsIGljb246ICfwn4+Y77iPJywgZGVzY3JpcHRpb246ICdMb2NhbCBpbml0aWF0aXZlcycgfVxuICBdXG59KSlcblxuZGVzY3JpYmUoJ0NyZWF0ZSBDYW1wYWlnbiBGbG93IC0gQ29tcHJlaGVuc2l2ZSBUZXN0IFN1aXRlJywgKCkgPT4ge1xuICBjb25zdCBtb2NrUHVzaCA9IGplc3QuZm4oKVxuICBjb25zdCBtb2NrVXNlciA9IHtcbiAgICBpZDogJ3Rlc3QtdXNlci1pZCcsXG4gICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICB1c2VyX21ldGFkYXRhOiB7IGZ1bGxfbmFtZTogJ1Rlc3QgVXNlcicgfVxuICB9XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKClcbiAgICA7KHVzZVJvdXRlciBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBwdXNoOiBtb2NrUHVzaFxuICAgIH0pXG4gICAgOyh1c2VBdXRoIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIHVzZXI6IG1vY2tVc2VyXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn8J+UkCBBdXRoZW50aWNhdGlvbiBSZXF1aXJlbWVudHMnLCAoKSA9PiB7XG4gICAgaXQoJ3JlZGlyZWN0cyB0byBhdXRoIHBhZ2Ugd2hlbiB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkJywgKCkgPT4ge1xuICAgICAgOyh1c2VBdXRoIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdXNlcjogbnVsbFxuICAgICAgfSlcblxuICAgICAgcmVuZGVyKDxDcmVhdGVQYWdlIC8+KVxuXG4gICAgICBleHBlY3QobW9ja1B1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXV0aD9tb2RlPWxvZ2luJylcbiAgICB9KVxuXG4gICAgaXQoJ3JlbmRlcnMgY3JlYXRlIGZvcm0gd2hlbiB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPENyZWF0ZVBhZ2UgLz4pXG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDcmVhdGUgQ2FtcGFpZ24nKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1N0ZXAgMSBvZiAzJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQcm9qZWN0IERldGFpbHMnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ/Cfk50gU3RlcCAxOiBQcm9qZWN0IERldGFpbHMnLCAoKSA9PiB7XG4gICAgaXQoJ3JlbmRlcnMgYWxsIHJlcXVpcmVkIGZvcm0gZmllbGRzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxDcmVhdGVQYWdlIC8+KVxuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdpbnB1dC10aXRsZScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdpbnB1dC1kZXNjcmlwdGlvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQ2F0ZWdvcmllcycpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBcbiAgICAgIC8vIENoZWNrIGNhdGVnb3J5IGJ1dHRvbnNcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdIZWFsdGgnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0NyZWF0aXZlJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUZWNobm9sb2d5JykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDb21tdW5pdHknKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIH0pXG5cbiAgICBpdCgndmFsaWRhdGVzIHJlcXVpcmVkIHRpdGxlIGZpZWxkIGZvciBDb250aW51ZSBidXR0b24nLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPENyZWF0ZVBhZ2UgLz4pXG5cbiAgICAgIGNvbnN0IGNvbnRpbnVlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tQ29udGludWUnKVxuICAgICAgZXhwZWN0KGNvbnRpbnVlQnV0dG9uKS50b0JlRGlzYWJsZWQoKVxuXG4gICAgICAvLyBBZGQgdGl0bGVcbiAgICAgIGNvbnN0IHRpdGxlSW5wdXQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2lucHV0LXRpdGxlJylcbiAgICAgIGF3YWl0IHVzZXJFdmVudC50eXBlKHRpdGxlSW5wdXQsICdUZXN0IENhbXBhaWduJylcblxuICAgICAgZXhwZWN0KGNvbnRpbnVlQnV0dG9uKS5ub3QudG9CZURpc2FibGVkKClcbiAgICB9KVxuXG4gICAgaXQoJ2FsbG93cyBjYXRlZ29yeSBzZWxlY3Rpb24gYW5kIGRlc2VsZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxDcmVhdGVQYWdlIC8+KVxuXG4gICAgICBjb25zdCBoZWFsdGhDYXRlZ29yeSA9IHNjcmVlbi5nZXRCeVRleHQoJ0hlYWx0aCcpLmNsb3Nlc3QoJ2J1dHRvbicpIVxuICAgICAgXG4gICAgICAvLyBTZWxlY3QgY2F0ZWdvcnlcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhoZWFsdGhDYXRlZ29yeSlcbiAgICAgIGV4cGVjdChoZWFsdGhDYXRlZ29yeSkudG9IYXZlQ2xhc3MoJ2JvcmRlci10ZWFsLTUwMCcpXG5cbiAgICAgIC8vIERlc2VsZWN0IGNhdGVnb3J5XG4gICAgICBhd2FpdCB1c2VyRXZlbnQuY2xpY2soaGVhbHRoQ2F0ZWdvcnkpXG4gICAgICBleHBlY3QoaGVhbHRoQ2F0ZWdvcnkpLm5vdC50b0hhdmVDbGFzcygnYm9yZGVyLXRlYWwtNTAwJylcbiAgICB9KVxuXG4gICAgaXQoJ3Byb2NlZWRzIHRvIHN0ZXAgMiB3aGVuIGNvbnRpbnVlIGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxDcmVhdGVQYWdlIC8+KVxuXG4gICAgICAvLyBGaWxsIHJlcXVpcmVkIGZpZWxkc1xuICAgICAgY29uc3QgdGl0bGVJbnB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5wdXQtdGl0bGUnKVxuICAgICAgYXdhaXQgdXNlckV2ZW50LnR5cGUodGl0bGVJbnB1dCwgJ1Rlc3QgQ2FtcGFpZ24nKVxuXG4gICAgICBjb25zdCBjb250aW51ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLUNvbnRpbnVlJylcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhjb250aW51ZUJ1dHRvbilcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1N0ZXAgMiBvZiAzJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQYXltZW50IFNldHVwJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfigr8gU3RlcCAyOiBQYXltZW50IFNldHVwJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxDcmVhdGVQYWdlIC8+KVxuICAgICAgXG4gICAgICAvLyBOYXZpZ2F0ZSB0byBzdGVwIDJcbiAgICAgIGNvbnN0IHRpdGxlSW5wdXQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2lucHV0LXRpdGxlJylcbiAgICAgIGF3YWl0IHVzZXJFdmVudC50eXBlKHRpdGxlSW5wdXQsICdUZXN0IENhbXBhaWduJylcbiAgICAgIFxuICAgICAgY29uc3QgY29udGludWVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1Db250aW51ZScpXG4gICAgICBhd2FpdCB1c2VyRXZlbnQuY2xpY2soY29udGludWVCdXR0b24pXG4gICAgfSlcblxuICAgIGl0KCdyZW5kZXJzIEJpdGNvaW4gcGF5bWVudCBmaWVsZHMnLCAoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQml0Y29pbiBBZGRyZXNzJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdMaWdodG5pbmcgQWRkcmVzcyAoT3B0aW9uYWwpJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2lucHV0LWJpdGNvaW5fYWRkcmVzcycpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdpbnB1dC1saWdodG5pbmdfYWRkcmVzcycpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgfSlcblxuICAgIGl0KCdhbGxvd3MgbmF2aWdhdGlvbiBiYWNrIHRvIHN0ZXAgMScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGJhY2tCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1CYWNrJylcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhiYWNrQnV0dG9uKVxuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU3RlcCAxIG9mIDMnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Byb2plY3QgRGV0YWlscycpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgfSlcblxuICAgIGl0KCdwcm9jZWVkcyB0byBzdGVwIDMgd2hlbiBjb250aW51ZSBidXR0b24gaXMgY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRpbnVlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tQ29udGludWUnKVxuICAgICAgYXdhaXQgdXNlckV2ZW50LmNsaWNrKGNvbnRpbnVlQnV0dG9uKVxuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU3RlcCAzIG9mIDMnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0ZpbmFsIERldGFpbHMnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ/Cfjq8gU3RlcCAzOiBGaW5hbCBEZXRhaWxzJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxDcmVhdGVQYWdlIC8+KVxuICAgICAgXG4gICAgICAvLyBOYXZpZ2F0ZSB0byBzdGVwIDNcbiAgICAgIGNvbnN0IHRpdGxlSW5wdXQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2lucHV0LXRpdGxlJylcbiAgICAgIGF3YWl0IHVzZXJFdmVudC50eXBlKHRpdGxlSW5wdXQsICdUZXN0IENhbXBhaWduJylcbiAgICAgIFxuICAgICAgLy8gU3RlcCAxIC0+IDJcbiAgICAgIGxldCBjb250aW51ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLUNvbnRpbnVlJylcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhjb250aW51ZUJ1dHRvbilcbiAgICAgIFxuICAgICAgLy8gU3RlcCAyIC0+IDNcbiAgICAgIGNvbnRpbnVlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tQ29udGludWUnKVxuICAgICAgYXdhaXQgdXNlckV2ZW50LmNsaWNrKGNvbnRpbnVlQnV0dG9uKVxuICAgIH0pXG5cbiAgICBpdCgncmVuZGVycyBmaW5hbCBkZXRhaWwgZmllbGRzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1dlYnNpdGUgb3IgU29jaWFsIE1lZGlhJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdGdW5kaW5nIEdvYWwgKE9wdGlvbmFsKScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdpbnB1dC13ZWJzaXRlX3VybCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdpbnB1dC1nb2FsX2Ftb3VudCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgfSlcblxuICAgIGl0KCdzaG93cyBMYXVuY2ggQ2FtcGFpZ24gYnV0dG9uIGluc3RlYWQgb2YgQ29udGludWUnLCAoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tTGF1bmNoIENhbXBhaWduJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRlc3RJZCgnYnV0dG9uLUNvbnRpbnVlJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgfSlcblxuICAgIGl0KCdhbGxvd3MgbmF2aWdhdGlvbiBiYWNrIHRvIHN0ZXAgMicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGJhY2tCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1CYWNrJylcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhiYWNrQnV0dG9uKVxuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU3RlcCAyIG9mIDMnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1BheW1lbnQgU2V0dXAnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ/CfmoAgRm9ybSBTdWJtaXNzaW9uJywgKCkgPT4ge1xuICAgIGl0KCdzdWNjZXNzZnVsbHkgc3VibWl0cyBjYW1wYWlnbiBhbmQgcmVkaXJlY3RzIHRvIGRhc2hib2FyZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8Q3JlYXRlUGFnZSAvPilcbiAgICAgIFxuICAgICAgLy8gRmlsbCBvdXQgY29tcGxldGUgZm9ybVxuICAgICAgY29uc3QgdGl0bGVJbnB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5wdXQtdGl0bGUnKVxuICAgICAgYXdhaXQgdXNlckV2ZW50LnR5cGUodGl0bGVJbnB1dCwgJ1Rlc3QgQ2FtcGFpZ24nKVxuICAgICAgXG4gICAgICBjb25zdCBkZXNjcmlwdGlvbklucHV0ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdpbnB1dC1kZXNjcmlwdGlvbicpXG4gICAgICBhd2FpdCB1c2VyRXZlbnQudHlwZShkZXNjcmlwdGlvbklucHV0LCAnVGhpcyBpcyBhIHRlc3QgY2FtcGFpZ24gZGVzY3JpcHRpb24nKVxuICAgICAgXG4gICAgICAvLyBOYXZpZ2F0ZSB0aHJvdWdoIHN0ZXBzXG4gICAgICBsZXQgY29udGludWVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1Db250aW51ZScpXG4gICAgICBhd2FpdCB1c2VyRXZlbnQuY2xpY2soY29udGludWVCdXR0b24pXG4gICAgICBcbiAgICAgIC8vIFN0ZXAgMjogQWRkIEJpdGNvaW4gYWRkcmVzc1xuICAgICAgY29uc3QgYml0Y29pbklucHV0ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdpbnB1dC1iaXRjb2luX2FkZHJlc3MnKVxuICAgICAgYXdhaXQgdXNlckV2ZW50LnR5cGUoYml0Y29pbklucHV0LCAnYmMxcXRlc3QxMjNhZGRyZXNzJylcbiAgICAgIFxuICAgICAgY29udGludWVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1Db250aW51ZScpXG4gICAgICBhd2FpdCB1c2VyRXZlbnQuY2xpY2soY29udGludWVCdXR0b24pXG4gICAgICBcbiAgICAgIC8vIFN0ZXAgMzogU3VibWl0XG4gICAgICBjb25zdCBsYXVuY2hCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1MYXVuY2ggQ2FtcGFpZ24nKVxuICAgICAgYXdhaXQgdXNlckV2ZW50LmNsaWNrKGxhdW5jaEJ1dHRvbilcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdCh0b2FzdC5zdWNjZXNzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgn8J+OiSBDYW1wYWlnbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSEnKVxuICAgICAgICBleHBlY3QobW9ja1B1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvZGFzaGJvYXJkJylcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGl0KCd2YWxpZGF0ZXMgdGl0bGUgcmVxdWlyZW1lbnQgb24gc3VibWlzc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8Q3JlYXRlUGFnZSAvPilcbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIHByb2NlZWQgd2l0aG91dCB0aXRsZVxuICAgICAgY29uc3QgY29udGludWVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1Db250aW51ZScpXG4gICAgICBleHBlY3QoY29udGludWVCdXR0b24pLnRvQmVEaXNhYmxlZCgpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn8J+SviBEcmFmdCBGdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xuICAgIGl0KCdzYXZlcyBkcmFmdCB3aGVuIFNhdmUgRHJhZnQgYnV0dG9uIGlzIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBsb2NhbFN0b3JhZ2VNb2NrID0ge1xuICAgICAgICBzZXRJdGVtOiBqZXN0LmZuKClcbiAgICAgIH1cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdsb2NhbFN0b3JhZ2UnLCB7XG4gICAgICAgIHZhbHVlOiBsb2NhbFN0b3JhZ2VNb2NrXG4gICAgICB9KVxuXG4gICAgICByZW5kZXIoPENyZWF0ZVBhZ2UgLz4pXG4gICAgICBcbiAgICAgIC8vIEFkZCB0aXRsZSB0byBlbmFibGUgc2F2ZSBkcmFmdFxuICAgICAgY29uc3QgdGl0bGVJbnB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5wdXQtdGl0bGUnKVxuICAgICAgYXdhaXQgdXNlckV2ZW50LnR5cGUodGl0bGVJbnB1dCwgJ1Rlc3QgQ2FtcGFpZ24nKVxuICAgICAgXG4gICAgICBjb25zdCBzYXZlRHJhZnRCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1TYXZlIERyYWZ0JylcbiAgICAgIGV4cGVjdChzYXZlRHJhZnRCdXR0b24pLm5vdC50b0JlRGlzYWJsZWQoKVxuICAgICAgXG4gICAgICBhd2FpdCB1c2VyRXZlbnQuY2xpY2soc2F2ZURyYWZ0QnV0dG9uKVxuICAgICAgXG4gICAgICBleHBlY3QobG9jYWxTdG9yYWdlTW9jay5zZXRJdGVtKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgYGNhbXBhaWduLWRyYWZ0LSR7bW9ja1VzZXIuaWR9YCxcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1Rlc3QgQ2FtcGFpZ24nKVxuICAgICAgKVxuICAgICAgZXhwZWN0KHRvYXN0LnN1Y2Nlc3MpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdEcmFmdCBzYXZlZCcpXG4gICAgfSlcblxuICAgIGl0KCdkaXNhYmxlcyBzYXZlIGRyYWZ0IHdoZW4gbm8gdGl0bGUgaXMgcHJvdmlkZWQnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPENyZWF0ZVBhZ2UgLz4pXG4gICAgICBcbiAgICAgIGNvbnN0IHNhdmVEcmFmdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLVNhdmUgRHJhZnQnKVxuICAgICAgZXhwZWN0KHNhdmVEcmFmdEJ1dHRvbikudG9CZURpc2FibGVkKClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfwn6etIE5hdmlnYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ2FsbG93cyBjYW5jZWxpbmcgYW5kIHJldHVybmluZyB0byBkYXNoYm9hcmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPENyZWF0ZVBhZ2UgLz4pXG4gICAgICBcbiAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLUNhbmNlbCcpXG4gICAgICBhd2FpdCB1c2VyRXZlbnQuY2xpY2soY2FuY2VsQnV0dG9uKVxuICAgICAgXG4gICAgICBleHBlY3QobW9ja1B1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvZGFzaGJvYXJkJylcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfwn5OKIFByb2dyZXNzIFRyYWNraW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG93cyBjb3JyZWN0IHByb2dyZXNzIHBlcmNlbnRhZ2UgZm9yIGVhY2ggc3RlcCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8Q3JlYXRlUGFnZSAvPilcbiAgICAgIFxuICAgICAgLy8gU3RlcCAxOiAzMyVcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCczMyUgY29tcGxldGUnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgICAgXG4gICAgICAvLyBOYXZpZ2F0ZSB0byBzdGVwIDJcbiAgICAgIGNvbnN0IHRpdGxlSW5wdXQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2lucHV0LXRpdGxlJylcbiAgICAgIGF3YWl0IHVzZXJFdmVudC50eXBlKHRpdGxlSW5wdXQsICdUZXN0IENhbXBhaWduJylcbiAgICAgIFxuICAgICAgbGV0IGNvbnRpbnVlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tQ29udGludWUnKVxuICAgICAgYXdhaXQgdXNlckV2ZW50LmNsaWNrKGNvbnRpbnVlQnV0dG9uKVxuICAgICAgXG4gICAgICAvLyBTdGVwIDI6IDY3JVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJzY3JSBjb21wbGV0ZScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgICBcbiAgICAgIC8vIE5hdmlnYXRlIHRvIHN0ZXAgM1xuICAgICAgY29udGludWVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1Db250aW51ZScpXG4gICAgICBhd2FpdCB1c2VyRXZlbnQuY2xpY2soY29udGludWVCdXR0b24pXG4gICAgICBcbiAgICAgIC8vIFN0ZXAgMzogMTAwJVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJzEwMCUgY29tcGxldGUnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIH0pXG4gIH0pXG59KSAiXSwidmVyc2lvbiI6M30=
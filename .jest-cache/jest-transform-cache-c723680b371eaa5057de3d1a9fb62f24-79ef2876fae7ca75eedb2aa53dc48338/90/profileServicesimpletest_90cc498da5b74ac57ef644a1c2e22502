a19340bf6f1e256ed52d7858b47d9664
"use strict";
/**
 * PROFILE SERVICE - SIMPLE TEST COVERAGE
 *
 * This test suite provides simple coverage for the ProfileService,
 * testing user profile operations without complex Supabase mocking.
 *
 * Created: 2025-01-08
 * Last Modified: 2025-01-08
 * Last Modified Summary: Simple ProfileService tests for user management operations
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock Supabase client to return null for all operations
jest.mock('@/services/supabase/client', () => ({
    __esModule: true,
    default: {
        from: jest.fn(() => ({
            select: jest.fn().mockReturnThis(),
            eq: jest.fn().mockReturnThis(),
            single: jest.fn(() => Promise.resolve({ data: null, error: null })),
            update: jest.fn().mockReturnThis(),
            insert: jest.fn().mockReturnThis(),
        })),
        auth: {
            getUser: jest.fn(() => Promise.resolve({
                data: { user: null },
                error: null
            })),
            updateUser: jest.fn(() => Promise.resolve({
                error: null
            }))
        },
        rpc: jest.fn(() => Promise.resolve({
            data: null,
            error: { message: 'RPC not available' }
        }))
    }
}));
// Mock other dependencies
jest.mock('@/stores/auth', () => ({
    useAuthStore: jest.fn()
}));
jest.mock('@/services/supabase/profiles', () => ({
    updateProfile: jest.fn()
}));
jest.mock('sonner', () => ({
    toast: {
        success: jest.fn(),
        error: jest.fn()
    }
}));
jest.mock('@/utils/logger', () => ({
    logProfile: jest.fn(),
    logger: {
        error: jest.fn(),
        warn: jest.fn(),
        info: jest.fn()
    }
}));
// Import after mocking
const profileService_1 = require("../profileService");
describe('ðŸ‘¤ Profile Service - Simple Coverage', () => {
    beforeEach(() => {
        jest.clearAllMocks();
    });
    describe('ðŸŽ¯ Core Service Methods', () => {
        test('should export ProfileService class', () => {
            expect(profileService_1.ProfileService).toBeDefined();
            expect(typeof profileService_1.ProfileService).toBe('function');
        });
        test('should have static getProfile method', () => {
            expect(typeof profileService_1.ProfileService.getProfile).toBe('function');
        });
        test('should have static updateProfile method', () => {
            expect(typeof profileService_1.ProfileService.updateProfile).toBe('function');
        });
        test('should have static createProfile method', () => {
            expect(typeof profileService_1.ProfileService.createProfile).toBe('function');
        });
        test('should have static updatePassword method', () => {
            expect(typeof profileService_1.ProfileService.updatePassword).toBe('function');
        });
        test('should have static fallbackProfileUpdate method', () => {
            expect(typeof profileService_1.ProfileService.fallbackProfileUpdate).toBe('function');
        });
    });
    describe('ðŸ‘¤ Get Profile Functionality', () => {
        test('should handle empty user ID', async () => {
            const result = await profileService_1.ProfileService.getProfile('');
            expect(result).toBeNull();
        });
        test('should handle null user ID', async () => {
            const result = await profileService_1.ProfileService.getProfile(null);
            expect(result).toBeNull();
        });
        test('should handle undefined user ID', async () => {
            const result = await profileService_1.ProfileService.getProfile(undefined);
            expect(result).toBeNull();
        });
    });
    describe('âœï¸ Update Profile Functionality', () => {
        test('should handle missing user ID', async () => {
            const formData = {
                username: 'testuser'
            };
            const result = await profileService_1.ProfileService.updateProfile('', formData);
            expect(result.success).toBe(false);
            expect(result.error).toBe('User ID is required');
        });
        test('should handle null user ID', async () => {
            const formData = {
                username: 'testuser'
            };
            const result = await profileService_1.ProfileService.updateProfile(null, formData);
            expect(result.success).toBe(false);
            expect(result.error).toBe('User ID is required');
        });
        test('should handle undefined user ID', async () => {
            const formData = {
                username: 'testuser'
            };
            const result = await profileService_1.ProfileService.updateProfile(undefined, formData);
            expect(result.success).toBe(false);
            expect(result.error).toBe('User ID is required');
        });
    });
    describe('âž• Create Profile Functionality', () => {
        test('should handle profile creation with minimal data', async () => {
            const formData = {
                username: 'newuser'
            };
            const result = await profileService_1.ProfileService.createProfile('user-123', formData);
            // Should not throw errors and return a result
            expect(result).toBeDefined();
            expect(typeof result.success).toBe('boolean');
        });
        test('should handle empty user ID in create', async () => {
            const formData = {
                username: 'newuser'
            };
            // Should handle gracefully without throwing
            const result = await profileService_1.ProfileService.createProfile('', formData);
            expect(result).toBeDefined();
        });
    });
    describe('ðŸ” Password Update Functionality', () => {
        test('should handle password update call', async () => {
            const result = await profileService_1.ProfileService.updatePassword('newpassword123');
            // Should not throw errors and return a result
            expect(result).toBeDefined();
            expect(typeof result.success).toBe('boolean');
        });
        test('should handle empty password', async () => {
            const result = await profileService_1.ProfileService.updatePassword('');
            expect(result).toBeDefined();
            expect(typeof result.success).toBe('boolean');
        });
    });
    describe('ðŸ”„ Fallback Profile Update', () => {
        test('should handle fallback update call', async () => {
            const updates = {
                username: 'testuser',
                display_name: 'Test User'
            };
            const result = await profileService_1.ProfileService.fallbackProfileUpdate('user-123', updates);
            // Should not throw errors and return a result
            expect(result).toBeDefined();
            expect(typeof result.success).toBe('boolean');
        });
        test('should handle empty updates object', async () => {
            const result = await profileService_1.ProfileService.fallbackProfileUpdate('user-123', {});
            expect(result).toBeDefined();
            expect(typeof result.success).toBe('boolean');
        });
    });
    describe('ðŸ› ï¸ Data Structure Validation', () => {
        test('should handle all ProfileFormData fields', () => {
            const completeFormData = {
                username: 'testuser',
                display_name: 'Test User',
                bio: 'Test bio',
                bitcoin_address: 'bc1qtest',
                avatar_url: 'https://example.com/avatar.jpg',
                banner_url: 'https://example.com/banner.jpg'
            };
            // Validate all fields are present
            expect(completeFormData).toHaveProperty('username');
            expect(completeFormData).toHaveProperty('display_name');
            expect(completeFormData).toHaveProperty('bio');
            expect(completeFormData).toHaveProperty('bitcoin_address');
            expect(completeFormData).toHaveProperty('avatar_url');
            expect(completeFormData).toHaveProperty('banner_url');
        });
        test('should handle partial ProfileFormData', () => {
            const partialFormData = {
                username: 'testuser'
            };
            expect(partialFormData.username).toBe('testuser');
            expect(partialFormData.display_name).toBeUndefined();
        });
        test('should handle null values in ProfileFormData', () => {
            const formData = {
                username: 'testuser',
                display_name: null,
                bio: null,
                bitcoin_address: null,
                avatar_url: null,
                banner_url: null
            };
            expect(formData.username).toBe('testuser');
            expect(formData.display_name).toBeNull();
            expect(formData.bio).toBeNull();
        });
    });
    describe('ðŸ§ª Edge Cases', () => {
        test('should handle special characters in profile data', () => {
            const formData = {
                username: 'user_with-special.chars',
                display_name: 'User with Ã©mojis ðŸš€',
                bio: 'Bio with "quotes" and <tags>',
                bitcoin_address: 'bc1qspecial123'
            };
            // Should not throw errors during data preparation
            expect(formData).toBeDefined();
            expect(formData.username).toContain('special');
            expect(formData.display_name).toContain('Ã©mojis');
            expect(formData.bio).toContain('quotes');
        });
        test('should handle extremely long field values', () => {
            var _a, _b;
            const longString = 'A'.repeat(10000);
            const formData = {
                username: 'testuser',
                bio: longString
            };
            expect(formData.bio).toHaveLength(10000);
            expect((_a = formData.bio) === null || _a === void 0 ? void 0 : _a[0]).toBe('A');
            expect((_b = formData.bio) === null || _b === void 0 ? void 0 : _b[9999]).toBe('A');
        });
        test('should handle unicode characters', () => {
            const formData = {
                username: 'user123',
                display_name: 'æµ‹è¯•ç”¨æˆ· ðŸŒŸ Ã±Ã¡mÃ©È™',
                bio: 'Bio with unicode: ä½ å¥½ä¸–ç•Œ ðŸš€ðŸ’°âš¡ï¸'
            };
            expect(formData.display_name).toContain('æµ‹è¯•');
            expect(formData.bio).toContain('ä½ å¥½ä¸–ç•Œ');
        });
        test('should handle whitespace-only fields', () => {
            const formData = {
                username: '   ',
                display_name: '\t\n  \r',
                bio: '     ',
                bitcoin_address: '\n\t'
            };
            expect(formData.username).toBe('   ');
            expect(formData.display_name).toContain('\t');
            expect(formData.bio).toContain(' ');
        });
    });
    describe('ðŸ”’ Error Handling', () => {
        test('should handle function calls without throwing', async () => {
            // Test all main functions don't throw synchronously
            expect(() => {
                profileService_1.ProfileService.getProfile('test');
                profileService_1.ProfileService.updateProfile('test', {});
                profileService_1.ProfileService.createProfile('test', {});
                profileService_1.ProfileService.updatePassword('test');
                profileService_1.ProfileService.fallbackProfileUpdate('test', {});
            }).not.toThrow();
        });
        test('should return results with success property', async () => {
            const updateResult = await profileService_1.ProfileService.updateProfile('user-123', {});
            const createResult = await profileService_1.ProfileService.createProfile('user-123', {});
            const passwordResult = await profileService_1.ProfileService.updatePassword('test');
            const fallbackResult = await profileService_1.ProfileService.fallbackProfileUpdate('user-123', {});
            expect(updateResult).toHaveProperty('success');
            expect(createResult).toHaveProperty('success');
            expect(passwordResult).toHaveProperty('success');
            expect(fallbackResult).toHaveProperty('success');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvZy9kZXYvb3JhbmdlY2F0L3NyYy9zZXJ2aWNlcy9fX3Rlc3RzX18vcHJvZmlsZVNlcnZpY2Uuc2ltcGxlLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7R0FTRzs7QUFFSCx5REFBeUQ7QUFDekQsSUFBSSxDQUFDLElBQUksQ0FBQyw0QkFBNEIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQzdDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCLE9BQU8sRUFBRTtRQUNQLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFDbkIsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7WUFDbEMsRUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7WUFDOUIsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7WUFDbkUsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7WUFDbEMsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7U0FDbkMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxFQUFFO1lBQ0osT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztnQkFDckMsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRTtnQkFDcEIsS0FBSyxFQUFFLElBQUk7YUFDWixDQUFDLENBQUM7WUFDSCxVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDO2dCQUN4QyxLQUFLLEVBQUUsSUFBSTthQUNaLENBQUMsQ0FBQztTQUNK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LFNBQVMsQ0FBQyxDQUFBO1lBQzlDLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUE7WUFDaEQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUNsRCxDQUFDLENBQUMsQ0FBQTtJQUVKLENBQUMsQ0FBQyxDQUFBO0FBRUosQ0FBQyxDQUFDLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvZy9kZXYvb3JhbmdlY2F0L3NyYy9zZXJ2aWNlcy9fX3Rlc3RzX18vcHJvZmlsZVNlcnZpY2Uuc2ltcGxlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQUk9GSUxFIFNFUlZJQ0UgLSBTSU1QTEUgVEVTVCBDT1ZFUkFHRVxuICogXG4gKiBUaGlzIHRlc3Qgc3VpdGUgcHJvdmlkZXMgc2ltcGxlIGNvdmVyYWdlIGZvciB0aGUgUHJvZmlsZVNlcnZpY2UsXG4gKiB0ZXN0aW5nIHVzZXIgcHJvZmlsZSBvcGVyYXRpb25zIHdpdGhvdXQgY29tcGxleCBTdXBhYmFzZSBtb2NraW5nLlxuICogXG4gKiBDcmVhdGVkOiAyMDI1LTAxLTA4XG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAxLTA4XG4gKiBMYXN0IE1vZGlmaWVkIFN1bW1hcnk6IFNpbXBsZSBQcm9maWxlU2VydmljZSB0ZXN0cyBmb3IgdXNlciBtYW5hZ2VtZW50IG9wZXJhdGlvbnNcbiAqL1xuXG4vLyBNb2NrIFN1cGFiYXNlIGNsaWVudCB0byByZXR1cm4gbnVsbCBmb3IgYWxsIG9wZXJhdGlvbnNcbmplc3QubW9jaygnQC9zZXJ2aWNlcy9zdXBhYmFzZS9jbGllbnQnLCAoKSA9PiAoe1xuICBfX2VzTW9kdWxlOiB0cnVlLFxuICBkZWZhdWx0OiB7XG4gICAgZnJvbTogamVzdC5mbigoKSA9PiAoe1xuICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGVxOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIHNpbmdsZTogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBkYXRhOiBudWxsLCBlcnJvcjogbnVsbCB9KSksXG4gICAgICB1cGRhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgaW5zZXJ0OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICB9KSksXG4gICAgYXV0aDoge1xuICAgICAgZ2V0VXNlcjogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICBkYXRhOiB7IHVzZXI6IG51bGwgfSxcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pKSxcbiAgICAgIHVwZGF0ZVVzZXI6IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH0pKVxuICAgIH0sXG4gICAgcnBjOiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICBkYXRhOiBudWxsLFxuICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ1JQQyBub3QgYXZhaWxhYmxlJyB9XG4gICAgfSkpXG4gIH1cbn0pKVxuXG4vLyBNb2NrIG90aGVyIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKCdAL3N0b3Jlcy9hdXRoJywgKCkgPT4gKHtcbiAgdXNlQXV0aFN0b3JlOiBqZXN0LmZuKClcbn0pKVxuXG5qZXN0Lm1vY2soJ0Avc2VydmljZXMvc3VwYWJhc2UvcHJvZmlsZXMnLCAoKSA9PiAoe1xuICB1cGRhdGVQcm9maWxlOiBqZXN0LmZuKClcbn0pKVxuXG5qZXN0Lm1vY2soJ3Nvbm5lcicsICgpID0+ICh7XG4gIHRvYXN0OiB7XG4gICAgc3VjY2VzczogamVzdC5mbigpLFxuICAgIGVycm9yOiBqZXN0LmZuKClcbiAgfVxufSkpXG5cbmplc3QubW9jaygnQC91dGlscy9sb2dnZXInLCAoKSA9PiAoe1xuICBsb2dQcm9maWxlOiBqZXN0LmZuKCksXG4gIGxvZ2dlcjoge1xuICAgIGVycm9yOiBqZXN0LmZuKCksXG4gICAgd2FybjogamVzdC5mbigpLFxuICAgIGluZm86IGplc3QuZm4oKVxuICB9XG59KSlcblxuLy8gSW1wb3J0IGFmdGVyIG1vY2tpbmdcbmltcG9ydCB7IFByb2ZpbGVTZXJ2aWNlIH0gZnJvbSAnLi4vcHJvZmlsZVNlcnZpY2UnXG5cbmludGVyZmFjZSBQcm9maWxlRm9ybURhdGEge1xuICB1c2VybmFtZT86IHN0cmluZ1xuICBkaXNwbGF5X25hbWU/OiBzdHJpbmcgfCBudWxsXG4gIGJpbz86IHN0cmluZyB8IG51bGxcbiAgYml0Y29pbl9hZGRyZXNzPzogc3RyaW5nIHwgbnVsbFxuICBhdmF0YXJfdXJsPzogc3RyaW5nIHwgbnVsbFxuICBiYW5uZXJfdXJsPzogc3RyaW5nIHwgbnVsbFxufVxuXG5kZXNjcmliZSgn8J+RpCBQcm9maWxlIFNlcnZpY2UgLSBTaW1wbGUgQ292ZXJhZ2UnLCAoKSA9PiB7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKClcbiAgfSlcblxuICBkZXNjcmliZSgn8J+OryBDb3JlIFNlcnZpY2UgTWV0aG9kcycsICgpID0+IHtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgZXhwb3J0IFByb2ZpbGVTZXJ2aWNlIGNsYXNzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KFByb2ZpbGVTZXJ2aWNlKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QodHlwZW9mIFByb2ZpbGVTZXJ2aWNlKS50b0JlKCdmdW5jdGlvbicpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIHN0YXRpYyBnZXRQcm9maWxlIG1ldGhvZCcsICgpID0+IHtcbiAgICAgIGV4cGVjdCh0eXBlb2YgUHJvZmlsZVNlcnZpY2UuZ2V0UHJvZmlsZSkudG9CZSgnZnVuY3Rpb24nKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBzdGF0aWMgdXBkYXRlUHJvZmlsZSBtZXRob2QnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodHlwZW9mIFByb2ZpbGVTZXJ2aWNlLnVwZGF0ZVByb2ZpbGUpLnRvQmUoJ2Z1bmN0aW9uJylcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgc3RhdGljIGNyZWF0ZVByb2ZpbGUgbWV0aG9kJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHR5cGVvZiBQcm9maWxlU2VydmljZS5jcmVhdGVQcm9maWxlKS50b0JlKCdmdW5jdGlvbicpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIHN0YXRpYyB1cGRhdGVQYXNzd29yZCBtZXRob2QnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodHlwZW9mIFByb2ZpbGVTZXJ2aWNlLnVwZGF0ZVBhc3N3b3JkKS50b0JlKCdmdW5jdGlvbicpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIHN0YXRpYyBmYWxsYmFja1Byb2ZpbGVVcGRhdGUgbWV0aG9kJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHR5cGVvZiBQcm9maWxlU2VydmljZS5mYWxsYmFja1Byb2ZpbGVVcGRhdGUpLnRvQmUoJ2Z1bmN0aW9uJylcbiAgICB9KVxuXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ/CfkaQgR2V0IFByb2ZpbGUgRnVuY3Rpb25hbGl0eScsICgpID0+IHtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHVzZXIgSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQcm9maWxlU2VydmljZS5nZXRQcm9maWxlKCcnKVxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZU51bGwoKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG51bGwgdXNlciBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb2ZpbGVTZXJ2aWNlLmdldFByb2ZpbGUobnVsbCBhcyBhbnkpXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdW5kZWZpbmVkIHVzZXIgSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQcm9maWxlU2VydmljZS5nZXRQcm9maWxlKHVuZGVmaW5lZCBhcyBhbnkpXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpXG4gICAgfSlcblxuICB9KVxuXG4gIGRlc2NyaWJlKCfinI/vuI8gVXBkYXRlIFByb2ZpbGUgRnVuY3Rpb25hbGl0eScsICgpID0+IHtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG1pc3NpbmcgdXNlciBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZvcm1EYXRhOiBQcm9maWxlRm9ybURhdGEgPSB7XG4gICAgICAgIHVzZXJuYW1lOiAndGVzdHVzZXInXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb2ZpbGVTZXJ2aWNlLnVwZGF0ZVByb2ZpbGUoJycsIGZvcm1EYXRhKVxuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpXG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdVc2VyIElEIGlzIHJlcXVpcmVkJylcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBudWxsIHVzZXIgSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmb3JtRGF0YTogUHJvZmlsZUZvcm1EYXRhID0ge1xuICAgICAgICB1c2VybmFtZTogJ3Rlc3R1c2VyJ1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQcm9maWxlU2VydmljZS51cGRhdGVQcm9maWxlKG51bGwgYXMgYW55LCBmb3JtRGF0YSlcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKVxuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnVXNlciBJRCBpcyByZXF1aXJlZCcpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdW5kZWZpbmVkIHVzZXIgSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmb3JtRGF0YTogUHJvZmlsZUZvcm1EYXRhID0ge1xuICAgICAgICB1c2VybmFtZTogJ3Rlc3R1c2VyJ1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQcm9maWxlU2VydmljZS51cGRhdGVQcm9maWxlKHVuZGVmaW5lZCBhcyBhbnksIGZvcm1EYXRhKVxuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpXG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdVc2VyIElEIGlzIHJlcXVpcmVkJylcbiAgICB9KVxuXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+KelSBDcmVhdGUgUHJvZmlsZSBGdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgcHJvZmlsZSBjcmVhdGlvbiB3aXRoIG1pbmltYWwgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZvcm1EYXRhOiBQcm9maWxlRm9ybURhdGEgPSB7XG4gICAgICAgIHVzZXJuYW1lOiAnbmV3dXNlcidcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUHJvZmlsZVNlcnZpY2UuY3JlYXRlUHJvZmlsZSgndXNlci0xMjMnLCBmb3JtRGF0YSlcblxuICAgICAgLy8gU2hvdWxkIG5vdCB0aHJvdyBlcnJvcnMgYW5kIHJldHVybiBhIHJlc3VsdFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuc3VjY2VzcykudG9CZSgnYm9vbGVhbicpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgdXNlciBJRCBpbiBjcmVhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmb3JtRGF0YTogUHJvZmlsZUZvcm1EYXRhID0ge1xuICAgICAgICB1c2VybmFtZTogJ25ld3VzZXInXG4gICAgICB9XG5cbiAgICAgIC8vIFNob3VsZCBoYW5kbGUgZ3JhY2VmdWxseSB3aXRob3V0IHRocm93aW5nXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQcm9maWxlU2VydmljZS5jcmVhdGVQcm9maWxlKCcnLCBmb3JtRGF0YSlcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKClcbiAgICB9KVxuXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ/CflJAgUGFzc3dvcmQgVXBkYXRlIEZ1bmN0aW9uYWxpdHknLCAoKSA9PiB7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBwYXNzd29yZCB1cGRhdGUgY2FsbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb2ZpbGVTZXJ2aWNlLnVwZGF0ZVBhc3N3b3JkKCduZXdwYXNzd29yZDEyMycpXG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBub3QgdGhyb3cgZXJyb3JzIGFuZCByZXR1cm4gYSByZXN1bHRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LnN1Y2Nlc3MpLnRvQmUoJ2Jvb2xlYW4nKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHBhc3N3b3JkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUHJvZmlsZVNlcnZpY2UudXBkYXRlUGFzc3dvcmQoJycpXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LnN1Y2Nlc3MpLnRvQmUoJ2Jvb2xlYW4nKVxuICAgIH0pXG5cbiAgfSlcblxuICBkZXNjcmliZSgn8J+UhCBGYWxsYmFjayBQcm9maWxlIFVwZGF0ZScsICgpID0+IHtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGZhbGxiYWNrIHVwZGF0ZSBjYWxsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXBkYXRlcyA9IHtcbiAgICAgICAgdXNlcm5hbWU6ICd0ZXN0dXNlcicsXG4gICAgICAgIGRpc3BsYXlfbmFtZTogJ1Rlc3QgVXNlcidcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUHJvZmlsZVNlcnZpY2UuZmFsbGJhY2tQcm9maWxlVXBkYXRlKCd1c2VyLTEyMycsIHVwZGF0ZXMpXG5cbiAgICAgIC8vIFNob3VsZCBub3QgdGhyb3cgZXJyb3JzIGFuZCByZXR1cm4gYSByZXN1bHRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LnN1Y2Nlc3MpLnRvQmUoJ2Jvb2xlYW4nKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHVwZGF0ZXMgb2JqZWN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUHJvZmlsZVNlcnZpY2UuZmFsbGJhY2tQcm9maWxlVXBkYXRlKCd1c2VyLTEyMycsIHt9KVxuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5zdWNjZXNzKS50b0JlKCdib29sZWFuJylcbiAgICB9KVxuXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ/Cfm6DvuI8gRGF0YSBTdHJ1Y3R1cmUgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGFsbCBQcm9maWxlRm9ybURhdGEgZmllbGRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcGxldGVGb3JtRGF0YTogUHJvZmlsZUZvcm1EYXRhID0ge1xuICAgICAgICB1c2VybmFtZTogJ3Rlc3R1c2VyJyxcbiAgICAgICAgZGlzcGxheV9uYW1lOiAnVGVzdCBVc2VyJyxcbiAgICAgICAgYmlvOiAnVGVzdCBiaW8nLFxuICAgICAgICBiaXRjb2luX2FkZHJlc3M6ICdiYzFxdGVzdCcsXG4gICAgICAgIGF2YXRhcl91cmw6ICdodHRwczovL2V4YW1wbGUuY29tL2F2YXRhci5qcGcnLFxuICAgICAgICBiYW5uZXJfdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9iYW5uZXIuanBnJ1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSBhbGwgZmllbGRzIGFyZSBwcmVzZW50XG4gICAgICBleHBlY3QoY29tcGxldGVGb3JtRGF0YSkudG9IYXZlUHJvcGVydHkoJ3VzZXJuYW1lJylcbiAgICAgIGV4cGVjdChjb21wbGV0ZUZvcm1EYXRhKS50b0hhdmVQcm9wZXJ0eSgnZGlzcGxheV9uYW1lJylcbiAgICAgIGV4cGVjdChjb21wbGV0ZUZvcm1EYXRhKS50b0hhdmVQcm9wZXJ0eSgnYmlvJylcbiAgICAgIGV4cGVjdChjb21wbGV0ZUZvcm1EYXRhKS50b0hhdmVQcm9wZXJ0eSgnYml0Y29pbl9hZGRyZXNzJylcbiAgICAgIGV4cGVjdChjb21wbGV0ZUZvcm1EYXRhKS50b0hhdmVQcm9wZXJ0eSgnYXZhdGFyX3VybCcpXG4gICAgICBleHBlY3QoY29tcGxldGVGb3JtRGF0YSkudG9IYXZlUHJvcGVydHkoJ2Jhbm5lcl91cmwnKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHBhcnRpYWwgUHJvZmlsZUZvcm1EYXRhJywgKCkgPT4ge1xuICAgICAgY29uc3QgcGFydGlhbEZvcm1EYXRhOiBQcm9maWxlRm9ybURhdGEgPSB7XG4gICAgICAgIHVzZXJuYW1lOiAndGVzdHVzZXInXG4gICAgICB9XG5cbiAgICAgIGV4cGVjdChwYXJ0aWFsRm9ybURhdGEudXNlcm5hbWUpLnRvQmUoJ3Rlc3R1c2VyJylcbiAgICAgIGV4cGVjdChwYXJ0aWFsRm9ybURhdGEuZGlzcGxheV9uYW1lKS50b0JlVW5kZWZpbmVkKClcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBudWxsIHZhbHVlcyBpbiBQcm9maWxlRm9ybURhdGEnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmb3JtRGF0YTogUHJvZmlsZUZvcm1EYXRhID0ge1xuICAgICAgICB1c2VybmFtZTogJ3Rlc3R1c2VyJyxcbiAgICAgICAgZGlzcGxheV9uYW1lOiBudWxsLFxuICAgICAgICBiaW86IG51bGwsXG4gICAgICAgIGJpdGNvaW5fYWRkcmVzczogbnVsbCxcbiAgICAgICAgYXZhdGFyX3VybDogbnVsbCxcbiAgICAgICAgYmFubmVyX3VybDogbnVsbFxuICAgICAgfVxuXG4gICAgICBleHBlY3QoZm9ybURhdGEudXNlcm5hbWUpLnRvQmUoJ3Rlc3R1c2VyJylcbiAgICAgIGV4cGVjdChmb3JtRGF0YS5kaXNwbGF5X25hbWUpLnRvQmVOdWxsKClcbiAgICAgIGV4cGVjdChmb3JtRGF0YS5iaW8pLnRvQmVOdWxsKClcbiAgICB9KVxuXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ/Cfp6ogRWRnZSBDYXNlcycsICgpID0+IHtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHNwZWNpYWwgY2hhcmFjdGVycyBpbiBwcm9maWxlIGRhdGEnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmb3JtRGF0YTogUHJvZmlsZUZvcm1EYXRhID0ge1xuICAgICAgICB1c2VybmFtZTogJ3VzZXJfd2l0aC1zcGVjaWFsLmNoYXJzJyxcbiAgICAgICAgZGlzcGxheV9uYW1lOiAnVXNlciB3aXRoIMOpbW9qaXMg8J+agCcsXG4gICAgICAgIGJpbzogJ0JpbyB3aXRoIFwicXVvdGVzXCIgYW5kIDx0YWdzPicsXG4gICAgICAgIGJpdGNvaW5fYWRkcmVzczogJ2JjMXFzcGVjaWFsMTIzJ1xuICAgICAgfVxuXG4gICAgICAvLyBTaG91bGQgbm90IHRocm93IGVycm9ycyBkdXJpbmcgZGF0YSBwcmVwYXJhdGlvblxuICAgICAgZXhwZWN0KGZvcm1EYXRhKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QoZm9ybURhdGEudXNlcm5hbWUpLnRvQ29udGFpbignc3BlY2lhbCcpXG4gICAgICBleHBlY3QoZm9ybURhdGEuZGlzcGxheV9uYW1lKS50b0NvbnRhaW4oJ8OpbW9qaXMnKVxuICAgICAgZXhwZWN0KGZvcm1EYXRhLmJpbykudG9Db250YWluKCdxdW90ZXMnKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGV4dHJlbWVseSBsb25nIGZpZWxkIHZhbHVlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGxvbmdTdHJpbmcgPSAnQScucmVwZWF0KDEwMDAwKVxuICAgICAgXG4gICAgICBjb25zdCBmb3JtRGF0YTogUHJvZmlsZUZvcm1EYXRhID0ge1xuICAgICAgICB1c2VybmFtZTogJ3Rlc3R1c2VyJyxcbiAgICAgICAgYmlvOiBsb25nU3RyaW5nXG4gICAgICB9XG5cbiAgICAgIGV4cGVjdChmb3JtRGF0YS5iaW8pLnRvSGF2ZUxlbmd0aCgxMDAwMClcbiAgICAgIGV4cGVjdChmb3JtRGF0YS5iaW8/LlswXSkudG9CZSgnQScpXG4gICAgICBleHBlY3QoZm9ybURhdGEuYmlvPy5bOTk5OV0pLnRvQmUoJ0EnKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHVuaWNvZGUgY2hhcmFjdGVycycsICgpID0+IHtcbiAgICAgIGNvbnN0IGZvcm1EYXRhOiBQcm9maWxlRm9ybURhdGEgPSB7XG4gICAgICAgIHVzZXJuYW1lOiAndXNlcjEyMycsXG4gICAgICAgIGRpc3BsYXlfbmFtZTogJ+a1i+ivleeUqOaItyDwn4yfIMOxw6Ftw6nImScsXG4gICAgICAgIGJpbzogJ0JpbyB3aXRoIHVuaWNvZGU6IOS9oOWlveS4lueVjCDwn5qA8J+SsOKaoe+4jydcbiAgICAgIH1cblxuICAgICAgZXhwZWN0KGZvcm1EYXRhLmRpc3BsYXlfbmFtZSkudG9Db250YWluKCfmtYvor5UnKVxuICAgICAgZXhwZWN0KGZvcm1EYXRhLmJpbykudG9Db250YWluKCfkvaDlpb3kuJbnlYwnKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHdoaXRlc3BhY2Utb25seSBmaWVsZHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmb3JtRGF0YTogUHJvZmlsZUZvcm1EYXRhID0ge1xuICAgICAgICB1c2VybmFtZTogJyAgICcsXG4gICAgICAgIGRpc3BsYXlfbmFtZTogJ1xcdFxcbiAgXFxyJyxcbiAgICAgICAgYmlvOiAnICAgICAnLFxuICAgICAgICBiaXRjb2luX2FkZHJlc3M6ICdcXG5cXHQnXG4gICAgICB9XG5cbiAgICAgIGV4cGVjdChmb3JtRGF0YS51c2VybmFtZSkudG9CZSgnICAgJylcbiAgICAgIGV4cGVjdChmb3JtRGF0YS5kaXNwbGF5X25hbWUpLnRvQ29udGFpbignXFx0JylcbiAgICAgIGV4cGVjdChmb3JtRGF0YS5iaW8pLnRvQ29udGFpbignICcpXG4gICAgfSlcblxuICB9KVxuXG4gIGRlc2NyaWJlKCfwn5SSIEVycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZnVuY3Rpb24gY2FsbHMgd2l0aG91dCB0aHJvd2luZycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRlc3QgYWxsIG1haW4gZnVuY3Rpb25zIGRvbid0IHRocm93IHN5bmNocm9ub3VzbHlcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIFByb2ZpbGVTZXJ2aWNlLmdldFByb2ZpbGUoJ3Rlc3QnKVxuICAgICAgICBQcm9maWxlU2VydmljZS51cGRhdGVQcm9maWxlKCd0ZXN0Jywge30pXG4gICAgICAgIFByb2ZpbGVTZXJ2aWNlLmNyZWF0ZVByb2ZpbGUoJ3Rlc3QnLCB7fSlcbiAgICAgICAgUHJvZmlsZVNlcnZpY2UudXBkYXRlUGFzc3dvcmQoJ3Rlc3QnKVxuICAgICAgICBQcm9maWxlU2VydmljZS5mYWxsYmFja1Byb2ZpbGVVcGRhdGUoJ3Rlc3QnLCB7fSlcbiAgICAgIH0pLm5vdC50b1Rocm93KClcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiByZXN1bHRzIHdpdGggc3VjY2VzcyBwcm9wZXJ0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVwZGF0ZVJlc3VsdCA9IGF3YWl0IFByb2ZpbGVTZXJ2aWNlLnVwZGF0ZVByb2ZpbGUoJ3VzZXItMTIzJywge30pXG4gICAgICBjb25zdCBjcmVhdGVSZXN1bHQgPSBhd2FpdCBQcm9maWxlU2VydmljZS5jcmVhdGVQcm9maWxlKCd1c2VyLTEyMycsIHt9KVxuICAgICAgY29uc3QgcGFzc3dvcmRSZXN1bHQgPSBhd2FpdCBQcm9maWxlU2VydmljZS51cGRhdGVQYXNzd29yZCgndGVzdCcpXG4gICAgICBjb25zdCBmYWxsYmFja1Jlc3VsdCA9IGF3YWl0IFByb2ZpbGVTZXJ2aWNlLmZhbGxiYWNrUHJvZmlsZVVwZGF0ZSgndXNlci0xMjMnLCB7fSlcblxuICAgICAgZXhwZWN0KHVwZGF0ZVJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3N1Y2Nlc3MnKVxuICAgICAgZXhwZWN0KGNyZWF0ZVJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3N1Y2Nlc3MnKVxuICAgICAgZXhwZWN0KHBhc3N3b3JkUmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnc3VjY2VzcycpXG4gICAgICBleHBlY3QoZmFsbGJhY2tSZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdzdWNjZXNzJylcbiAgICB9KVxuXG4gIH0pXG5cbn0pICJdLCJ2ZXJzaW9uIjozfQ==
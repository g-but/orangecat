{"version":3,"names":["cov_2r3cjm4ntt","actualCoverage","s","ssr_1","require","headers_1","supabaseUrl","b","process","env","NEXT_PUBLIC_SUPABASE_URL","supabaseAnonKey","NEXT_PUBLIC_SUPABASE_ANON_KEY","NODE_ENV","logger","warn","undefined","createServerClient","f","cookieStore","cookies","get","name","_a","value","set","options","remove","Object","assign","maxAge","exports"],"sources":["/home/g/dev/orangecat/src/services/supabase/server.ts"],"sourcesContent":["import { createServerClient as createSupabaseServerClient, type CookieOptions } from '@supabase/ssr'\nimport { cookies as getNextCookies } from 'next/headers'\nimport { Database } from '@/types/database'\nimport { SupabaseClient } from '@supabase/supabase-js'\n\n// Environment variables with fallbacks for build time\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || 'https://ohkueislstxomdjavyhs.supabase.co'\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9oa3VlaXNsc3R4b21kamF2eWhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ1NDc5NTAsImV4cCI6MjA2MDEyMzk1MH0.Qc6ahUbs_5BCa4csEYsBtyxNUDYb4h3Y4K_16N1DNaY'\n\n// Warn if using fallback values in production\nif ((!process.env.NEXT_PUBLIC_SUPABASE_URL || !process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY) && process.env.NODE_ENV === 'production') {\n  logger.warn('Missing Supabase environment variables in production. Using fallback values. Some features may not work correctly.', undefined, 'Security')\n}\n\n// Create a server-side Supabase client\nexport const createServerClient = async () => {\n  const cookieStore = await getNextCookies()\n\n  return createSupabaseServerClient<Database>(supabaseUrl, supabaseAnonKey, {\n    cookies: {\n      get(name: string) {\n        return cookieStore.get(name)?.value\n      },\n      set(name: string, value: string, options: CookieOptions) {\n        try {\n          cookieStore.set(name, value, options)\n        } catch {\n          // no-op in unsupported contexts\n        }\n      },\n      remove(name: string, options: CookieOptions) {\n        try {\n          cookieStore.set(name, '', { ...options, maxAge: 0 })\n        } catch {\n          // no-op in unsupported contexts\n        }\n      },\n    },\n  })\n}"],"mappings":"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","ignoreList":[]}
{"version":3,"names":["exports","PWAInstallButton","cov_g1w5g9z3v","s","IOSInstallInstructions","useIOSSafari","react_1","__importStar","require","button_1","lucide_react_1","utils_1","logger_1","className","variant","b","size","showBanner","f","deferredPrompt","setDeferredPrompt","useState","canInstall","setCanInstall","isInstalled","setIsInstalled","showInstallBanner","setShowInstallBanner","isInstalling","setIsInstalling","useEffect","checkIfInstalled","window","matchMedia","matches","navigator","standalone","document","referrer","startsWith","handleBeforeInstallPrompt","e","console","log","preventDefault","lastBannerShown","localStorage","getItem","daysSinceLastShown","Date","now","parseInt","setItem","toString","handleAppInstalled","addEventListener","removeEventListener","handleInstallClick","prompt","choiceResult","userChoice","outcome","logger","info","undefined","error","Error","message","String","handleBannerDismiss","jsx_runtime_1","jsx","children","jsxs","Smartphone","Button","onClick","disabled","Fragment","Download","X","sizeClasses","sm","md","lg","id","cn","onClose","isIOSSafari","setIsIOSSafari","userAgent","isIOS","test","isSafari","isStandalone"],"sources":["/home/g/dev/orangecat/src/components/mobile/PWAInstallButton.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState, useEffect } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Download, X, Smartphone } from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { logger } from '@/utils/logger'\n\ninterface PWAInstallButtonProps {\n  className?: string\n  variant?: 'default' | 'outline' | 'ghost' | 'banner'\n  size?: 'sm' | 'md' | 'lg'\n  showBanner?: boolean\n}\n\ninterface BeforeInstallPromptEvent extends Event {\n  readonly platforms: string[]\n  readonly userChoice: Promise<{\n    outcome: 'accepted' | 'dismissed'\n    platform: string\n  }>\n  prompt(): Promise<void>\n}\n\ndeclare global {\n  interface WindowEventMap {\n    beforeinstallprompt: BeforeInstallPromptEvent\n  }\n}\n\nexport function PWAInstallButton({ \n  className, \n  variant = 'default',\n  size = 'md',\n  showBanner = false \n}: PWAInstallButtonProps) {\n  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null)\n  const [canInstall, setCanInstall] = useState(false)\n  const [isInstalled, setIsInstalled] = useState(false)\n  const [showInstallBanner, setShowInstallBanner] = useState(false)\n  const [isInstalling, setIsInstalling] = useState(false)\n\n  useEffect(() => {\n    // Check if already installed\n    const checkIfInstalled = () => {\n      // Check for PWA display mode\n      if (window.matchMedia('(display-mode: standalone)').matches) {\n        setIsInstalled(true)\n        return\n      }\n      \n      // Check for iOS Safari standalone\n      if ((navigator as any).standalone === true) {\n        setIsInstalled(true)\n        return\n      }\n      \n      // Check for Android TWA\n      if (document.referrer.startsWith('android-app://')) {\n        setIsInstalled(true)\n        return\n      }\n    }\n\n    checkIfInstalled()\n\n    // Listen for install prompt\n    const handleBeforeInstallPrompt = (e: BeforeInstallPromptEvent) => {\n      console.log('[PWA] Install prompt available')\n      e.preventDefault()\n      setDeferredPrompt(e)\n      setCanInstall(true)\n      \n      // Show banner if requested and not shown recently\n      const lastBannerShown = localStorage.getItem('pwa-banner-shown')\n      const daysSinceLastShown = lastBannerShown \n        ? (Date.now() - parseInt(lastBannerShown)) / (1000 * 60 * 60 * 24)\n        : 999\n        \n      if (showBanner && daysSinceLastShown > 7) {\n        setShowInstallBanner(true)\n        localStorage.setItem('pwa-banner-shown', Date.now().toString())\n      }\n    }\n\n    // Listen for app installed\n    const handleAppInstalled = () => {\n      console.log('[PWA] App installed')\n      setIsInstalled(true)\n      setCanInstall(false)\n      setDeferredPrompt(null)\n      setShowInstallBanner(false)\n    }\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt)\n    window.addEventListener('appinstalled', handleAppInstalled)\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt)\n      window.removeEventListener('appinstalled', handleAppInstalled)\n    }\n  }, [showBanner])\n\n  const handleInstallClick = async () => {\n    if (!deferredPrompt) return\n\n    setIsInstalling(true)\n    \n    try {\n      await deferredPrompt.prompt()\n      const choiceResult = await deferredPrompt.userChoice\n      \n      console.log('[PWA] User choice:', choiceResult.outcome)\n      \n      if (choiceResult.outcome === 'accepted') {\n        logger.info('PWA install prompt accepted by user', undefined, 'PWA')\n      } else {\n        logger.info('PWA install prompt dismissed by user', undefined, 'PWA')\n      }\n    } catch (error) {\n      logger.error('PWA installation failed', { error: error instanceof Error ? error.message : String(error) }, 'PWA')\n    } finally {\n      setDeferredPrompt(null)\n      setCanInstall(false)\n      setIsInstalling(false)\n      setShowInstallBanner(false)\n    }\n  }\n\n  const handleBannerDismiss = () => {\n    setShowInstallBanner(false)\n    localStorage.setItem('pwa-banner-dismissed', Date.now().toString())\n  }\n\n  // Don't show if installed or can't install\n  if (isInstalled || !canInstall) {\n    return null\n  }\n\n  // Banner variant\n  if (variant === 'banner' && showInstallBanner) {\n    return (\n      <div className=\"fixed top-16 left-4 right-4 z-50 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg shadow-lg p-4 md:max-w-md md:left-auto\">\n        <div className=\"flex items-start space-x-3\">\n          <div className=\"flex-shrink-0\">\n            <Smartphone className=\"w-6 h-6\" />\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"text-sm font-semibold\">Install OrangeCat</h3>\n            <p className=\"text-xs opacity-90 mt-1\">\n              Add to your home screen for quick access and offline features\n            </p>\n            <div className=\"flex space-x-2 mt-3\">\n              <Button\n                variant=\"secondary\"\n                size=\"sm\"\n                onClick={handleInstallClick}\n                disabled={isInstalling}\n                className=\"bg-white text-orange-600 hover:bg-gray-100 text-xs px-3 py-1\"\n              >\n                {isInstalling ? (\n                  <>\n                    <div className=\"animate-spin w-3 h-3 border border-orange-600 border-t-transparent rounded-full mr-1\" />\n                    Installing...\n                  </>\n                ) : (\n                  <>\n                    <Download className=\"w-3 h-3 mr-1\" />\n                    Install\n                  </>\n                )}\n              </Button>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={handleBannerDismiss}\n                className=\"text-white hover:bg-white/20 text-xs px-2 py-1\"\n              >\n                Later\n              </Button>\n            </div>\n          </div>\n          <button\n            onClick={handleBannerDismiss}\n            className=\"flex-shrink-0 text-white/80 hover:text-white p-1\"\n          >\n            <X className=\"w-4 h-4\" />\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  // Button variant\n  const sizeClasses = {\n    sm: 'text-xs px-2 py-1',\n    md: 'text-sm px-4 py-2',\n    lg: 'text-base px-6 py-3'\n  }\n\n  return (\n    <Button\n      id=\"pwa-install-btn\"\n      variant={variant === 'banner' ? 'default' : variant}\n      size={size}\n      onClick={handleInstallClick}\n      disabled={isInstalling}\n      className={cn(\n        'transition-all duration-200',\n        sizeClasses[size],\n        className\n      )}\n    >\n      {isInstalling ? (\n        <>\n          <div className=\"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2\" />\n          Installing...\n        </>\n      ) : (\n        <>\n          <Download className=\"w-4 h-4 mr-2\" />\n          Install App\n        </>\n      )}\n    </Button>\n  )\n}\n\n// iOS Install Instructions Component\nexport function IOSInstallInstructions({ onClose }: { onClose: () => void }) {\n  return (\n    <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n      <div className=\"bg-white rounded-lg p-6 max-w-sm w-full\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h3 className=\"text-lg font-semibold\">Install OrangeCat</h3>\n          <button onClick={onClose} className=\"p-1\">\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n        \n        <div className=\"space-y-4 text-sm\">\n          <div className=\"flex items-start space-x-3\">\n            <div className=\"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\n              <span className=\"text-blue-600 font-bold text-xs\">1</span>\n            </div>\n            <p>Tap the <strong>Share</strong> button at the bottom of Safari</p>\n          </div>\n          \n          <div className=\"flex items-start space-x-3\">\n            <div className=\"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\n              <span className=\"text-blue-600 font-bold text-xs\">2</span>\n            </div>\n            <p>Scroll down and tap <strong>\"Add to Home Screen\"</strong></p>\n          </div>\n          \n          <div className=\"flex items-start space-x-3\">\n            <div className=\"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\n              <span className=\"text-blue-600 font-bold text-xs\">3</span>\n            </div>\n            <p>Tap <strong>\"Add\"</strong> to install OrangeCat on your home screen</p>\n          </div>\n        </div>\n        \n        <Button \n          onClick={onClose} \n          className=\"w-full mt-6\"\n          variant=\"outline\"\n        >\n          Got it\n        </Button>\n      </div>\n    </div>\n  )\n}\n\n// Hook to detect iOS Safari\nexport function useIOSSafari() {\n  const [isIOSSafari, setIsIOSSafari] = useState(false)\n\n  useEffect(() => {\n    const userAgent = navigator.userAgent\n    const isIOS = /iPad|iPhone|iPod/.test(userAgent)\n    const isSafari = /Safari/.test(userAgent) && !/Chrome|CriOS|OPiOS|FxiOS/.test(userAgent)\n    const isStandalone = (navigator as any).standalone === true\n    \n    setIsIOSSafari(isIOS && isSafari && !isStandalone)\n  }, [])\n\n  return isIOSSafari\n} "],"mappings":"AAAA,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}